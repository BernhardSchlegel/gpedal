(function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e['default']}:function(){return e};return t.d(n,'a',n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p='',t(t.s=72)})([function(e){var t=function(){return this}();try{t=t||Function('return this')()||(1,eval)('this')}catch(n){'object'==typeof window&&(t=window)}e.exports=t},function(e){'use strict';e.exports=function(e,t,n){if(!t)return e;for(var i in t)t.hasOwnProperty(i)&&(e.hasOwnProperty(i)&&!1===n||e[i]===t[i]||(e[i]=t[i]));return e}},function(e,t,n){'use strict';var i=n(1);e.exports=function(e,t){'function'!=typeof e&&(t=e,e=Object);var n=function(){return this.initialize?this.initialize.apply(this,arguments)||this:this},r=function(){};return r.prototype=e.prototype,n.prototype=new r,i(n.prototype,t),n}},function(e,t,n){'use strict';function i(e,t){this._groups=e,this._parents=t}function r(){return new i([[document.documentElement]],P)}n.d(t,'b',function(){return P}),t.a=i;var o=n(80),s=n(81),l=n(83),d=n(85),c=n(32),p=n(87),u=n(88),g=n(89),h=n(90),m=n(91),_=n(92),y=n(93),f=n(94),b=n(95),v=n(96),x=n(97),E=n(98),S=n(99),k=n(100),w=n(101),C=n(102),T=n(103),I=n(104),N=n(105),L=n(106),M=n(107),A=n(108),D=n(109),O=n(110),R=n(111),P=[null];i.prototype=r.prototype={constructor:i,select:o.a,selectAll:s.a,filter:l.a,data:d.a,enter:c.b,exit:p.a,merge:u.a,order:g.a,sort:h.a,call:m.a,nodes:_.a,node:y.a,size:f.a,empty:b.a,each:v.a,attr:x.a,style:E.a,property:S.a,classed:k.a,text:w.a,html:C.a,raise:T.a,lower:I.a,append:N.a,insert:L.a,remove:M.a,clone:A.a,datum:D.a,on:O.a,dispatch:R.a}},function(e){'use strict';e.exports={isURI:function(e){return e&&e.protocol&&e.host&&e.path},isSameOrigin:function(e){return e.protocol===location.protocol&&e.hostname===location.hostname&&e.port===location.port},parse:function(e){if('string'!=typeof e)return e;var t={},r=function(n,i){e=e.replace(i,function(e){return t[n]=e,''}),t[n]=t[n]||''},o,s,l,d,i,n;for(r('protocol',/^[a-z]+\:/i),r('host',/^\/\/[^\/\?#]+/),/^\//.test(e)||t.host||(e=location.pathname.replace(/[^\/]*$/,'')+e),r('pathname',/^[^\?#]*/),r('search',/^\?[^#]*/),r('hash',/^#.*/),t.protocol=t.protocol||location.protocol,t.host?(t.host=t.host.substr(2),o=t.host.split(':'),t.hostname=o[0],t.port=o[1]||''):(t.host=location.host,t.hostname=location.hostname,t.port=location.port),t.pathname=t.pathname||'/',t.path=t.pathname+t.search,s=t.search.replace(/^\?/,''),l=s?s.split('&'):[],n={},(d=0,i=l.length);d<i;d++)o=l[d].split('='),n[decodeURIComponent(o[0]||'')]=decodeURIComponent(o[1]||'');return t.query=n,t.href=this.stringify(t),t},stringify:function(e){var t=e.protocol+'//'+e.hostname;return e.port&&(t+=':'+e.port),t+=e.pathname+this.queryString(e.query)+(e.hash||''),t},queryString:function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(encodeURIComponent(n)+'='+encodeURIComponent(e[n]));return 0===t.length?'':'?'+t.join('&')}}},function(e,t){'use strict';t.a=function(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}},function(e,t,n){'use strict';var i=n(21);n.d(t,'a',function(){return i.e}),n.d(t,'f',function(){return i.g}),n.d(t,'d',function(){return i.f});var r=n(129);n.d(t,'e',function(){return r.a}),n.d(t,'c',function(){return r.b});var o=n(130);n.d(t,'b',function(){return o.a})},function(e,t,n){'use strict';(function(t){var i=n(2),r=n(68).Cookie,o=n(15),s=n(4),l=n(26),d=n(1),c=n(10),p=n(169),u=n(66),g=d(i({className:'Transport',DEFAULT_PORTS:{"http:":80,"https:":443,"ws:":80,"wss:":443},MAX_DELAY:0,batching:!0,initialize:function(e,t){this._dispatcher=e,this.endpoint=t,this._outbox=[],this._proxy=d({},this._dispatcher.proxy),this._proxy.origin||(this._proxy.origin=this._findProxy())},close:function(){},encode:function(){return''},sendMessage:function(e){return(this.debug('Client ? sending message to ?: ?',this._dispatcher.clientId,s.stringify(this.endpoint),e),!this.batching)?o.resolve(this.request([e])):(this._outbox.push(e),this._flushLargeBatch(),e.channel===u.HANDSHAKE)?this._publish(0.01):(e.channel===u.CONNECT&&(this._connectMessage=e),this._publish(this.MAX_DELAY))},_makePromise:function(){var e=this;this._requestPromise=this._requestPromise||new o(function(t){e._resolvePromise=t})},_publish:function(e){return this._makePromise(),this.addTimeout('publish',e,function(){this._flush(),delete this._requestPromise},this),this._requestPromise},_flush:function(){this.removeTimeout('publish'),1<this._outbox.length&&this._connectMessage&&(this._connectMessage.advice={timeout:0}),this._resolvePromise(this.request(this._outbox)),this._connectMessage=null,this._outbox=[]},_flushLargeBatch:function(){var e=this.encode(this._outbox);if(!(e.length<this._dispatcher.maxRequestSize)){var t=this._outbox.pop();this._makePromise(),this._flush(),t&&this._outbox.push(t)}},_receive:function(e){if(e){e=[].concat(e),this.debug('Client ? received from ? via ?: ?',this._dispatcher.clientId,s.stringify(this.endpoint),this.connectionType,e);for(var t=0,i=e.length;t<i;t++)this._dispatcher.handleResponse(e[t])}},_handleError:function(e){e=[].concat(e),this.debug('Client ? failed to send to ? via ?: ?',this._dispatcher.clientId,s.stringify(this.endpoint),this.connectionType,e);for(var t=0,i=e.length;t<i;t++)this._dispatcher.handleError(e[t])},_getCookies:function(){var e=this._dispatcher.cookies,t=s.stringify(this.endpoint);return e?l.map(e.getCookiesSync(t),function(e){return e.cookieString()}).join('; '):''},_storeCookies:function(e){var t=this._dispatcher.cookies,o=s.stringify(this.endpoint),l;if(e&&t){e=[].concat(e);for(var d=0,i=e.length;d<i;d++)l=r.parse(e[d]),t.setCookieSync(l,o)}},_findProxy:function(){if('undefined'!=typeof t){var e=this.endpoint.protocol;if(e){var n=e.replace(/:$/,'').toLowerCase()+'_proxy',i=n.toUpperCase(),r=t.env,o,s;return'http_proxy'==n&&r.REQUEST_METHOD?(o=Object.keys(r).filter(function(e){return /^http_proxy$/i.test(e)}),1===o.length?o[0]===n&&void 0===r[i]&&(s=r[n]):1<o.length&&(s=r[n]),s=s||r['CGI_'+i]):(s=r[n]||r[i],s&&!r[n]&&console.warn('The environment variable '+i+' is discouraged. Use '+n+'.')),s}}}}),{get:function(e,t,n,i,r){var o=e.endpoint;l.asyncEach(this._transports,function(o,s){var d=o[0],c=o[1],p=e.endpointFor(d);return 0<=l.indexOf(n,d)?s():0>l.indexOf(t,d)?(c.isUsable(e,p,function(){}),s()):void c.isUsable(e,p,function(t){if(!t)return s();var n=c.hasOwnProperty('create')?c.create(e,p):new c(e,p);i.call(r,n)})},function(){throw new Error('Could not find a usable connection type for '+s.stringify(o))})},register:function(e,t){this._transports.push([e,t]),t.prototype.connectionType=e},getConnectionTypes:function(){return l.map(this._transports,function(e){return e[0]})},_transports:[]});d(g.prototype,c),d(g.prototype,p),e.exports=g}).call(t,n(168))},function(e,t){'use strict';t.a=function(e){return null===e?NaN:+e}},function(e,t,n){'use strict';function i(e,n){return function(i){return e+i*n}}function r(e,n,i){return e=s(e,i),n=s(n,i)-e,i=1/i,function(r){return s(e+r*n,i)}}function o(e,t){var n=t-e;return n?i(e,n):Object(l.a)(isNaN(e)?t:e)}var s=Math.pow;t.c=function(e,t){var n=t-e;return n?i(e,180<n||-180>n?n-360*Math.round(n/360):n):Object(l.a)(isNaN(e)?t:e)},t.b=function(e){return 1==(e=+e)?o:function(t,n){return n-t?r(t,n,e):Object(l.a)(isNaN(t)?n:t)}},t.a=o;var l=n(53)},function(e,t,n){'use strict';var i=n(11),r={LOG_LEVELS:{fatal:4,error:3,warn:2,info:1,debug:0},writeLog:function(e,t){var n=r.logger||(r.wrapper||r).logger;if(n){var o=Array.prototype.slice.apply(e),s='[Faye',l=this.className,d=o.shift().replace(/\?/g,function(){try{return i(o.shift())}catch(e){return'[Object]'}});l&&(s+='.'+l),s+='] ','function'==typeof n[t]?n[t](s+d):'function'==typeof n&&n(s+d)}}};for(var o in r.LOG_LEVELS)(function(e){r[e]=function(){this.writeLog(arguments,e)}})(o);e.exports=r},function(e){'use strict';e.exports=function(e){return JSON.stringify(e,function(e,t){return this[e]instanceof Array?this[e]:t})}},function(e,t,n){'use strict';(function(t){var i=n(15);e.exports={then:function(e,t){var n=this;return this._promise||(this._promise=new i(function(e,t){n._resolve=e,n._reject=t})),0===arguments.length?this._promise:this._promise.then(e,t)},callback:function(e,t){return this.then(function(n){e.call(t,n)})},errback:function(e,t){return this.then(null,function(n){e.call(t,n)})},timeout:function(e,n){this.then();var i=this;this._timer=t.setTimeout(function(){i._reject(n)},1e3*e)},setDeferredStatus:function(e,n){this._timer&&t.clearTimeout(this._timer),this.then(),'succeeded'===e?this._resolve(n):'failed'===e?this._reject(n):delete this._promise}}}).call(t,n(0))},function(e,t){'use strict';t.a=function(e,n){return e=+e,n-=e,function(i){return e+n*i}}},function(e,t,n){'use strict';var i=n(24);t.a=function(e){return e=Object(i.a)(Math.abs(e)),e?e[1]:NaN}},function(e,t,n){'use strict';var i=n(65),r=0,o=1,s=2,l=function(e){return e},d=function(e){throw e},c=function(e){if(this._state=r,this._onFulfilled=[],this._onRejected=[],'function'==typeof e){var t=this;e(function(e){m(t,e)},function(e){y(t,e)})}};c.prototype.then=function(e,t){var n=new c;return p(this,e,n),u(this,t,n),n},c.prototype['catch']=function(e){return this.then(null,e)};var p=function(e,t,n){'function'!=typeof t&&(t=l);var i=function(e){g(t,e,n)};e._state===r?e._onFulfilled.push(i):e._state===o&&i(e._value)},u=function(e,t,n){'function'!=typeof t&&(t=d);var i=function(e){g(t,e,n)};e._state===r?e._onRejected.push(i):e._state===s&&i(e._reason)},g=function(e,t,n){i(function(){h(e,t,n)})},h=function(e,t,n){var i;try{i=e(t)}catch(e){return y(n,e)}i===n?y(n,new TypeError('Recursive promise chain detected')):m(n,i)},m=function(e,t){var n=!1,i,r;try{if(i=typeof t,r=null!==t&&('function'===i||'object'===i)&&t.then,'function'!=typeof r)return _(e,t);r.call(t,function(t){n^(n=!0)&&m(e,t)},function(t){n^(n=!0)&&y(e,t)})}catch(t){if(!(n^(n=!0)))return;y(e,t)}},_=function(e,t){if(e._state===r){e._state=o,e._value=t,e._onRejected=[];for(var n=e._onFulfilled,i;i=n.shift();)i(t)}},y=function(e,t){if(e._state===r){e._state=s,e._reason=t,e._onFulfilled=[];for(var n=e._onRejected,i;i=n.shift();)i(t)}};c.resolve=function(e){return new c(function(t){t(e)})},c.reject=function(e){return new c(function(t,n){n(e)})},c.all=function(e){return new c(function(t,r){var o=[],s=e.length,n;if(0===s)return t(o);for(n=0;n<s;n++)(function(e,n){c.resolve(e).then(function(e){o[n]=e,0==--s&&t(o)},r)})(e[n],n)})},c.race=function(e){return new c(function(t,r){for(var o=0,i=e.length;o<i;o++)c.resolve(e[o]).then(t,r)})},c.deferred=c.pending=function(){var e={};return e.promise=new c(function(t,n){e.resolve=t,e.reject=n}),e},e.exports=c},function(e,t){'use strict';t.d=function(e){return new Promise((t)=>setTimeout(t,e))},t.b=function(e){return new Promise(function(t,n){let i=new FileReader;i.onload=(n)=>{t(n.target.result)},i.onerror=(t)=>{n(t.target.error)},i.readAsText(e,'UTF-8')})},t.c=function(e){return new Promise(function(t){let n=!1,i=(r)=>{e.removeEventListener('characteristicvaluechanged',i),e.stopNotifications(),n||(n=!0,t(r.target.value))};e.addEventListener('characteristicvaluechanged',i),e.startNotifications()})},t.a=function(e){let t=e.getUTCMonth()+1;t=10>t?'0'+t:t;let n=e.getUTCDate();n=10>n?'0'+n:n;let i=e.getUTCHours();i=10>i?'0'+i:i;let r=e.getUTCMinutes();r=10>r?'0'+r:r;let o=e.getUTCSeconds();return o=10>o?'0'+o:o,e.getUTCFullYear()+'-'+t+'-'+n+'T'+i+':'+r+':'+o+'Z'}},function(e,t,n){'use strict';var i=n(38);n.d(t,'a',function(){return i.a});var r=n(5),o=n(39),s=n(113),l=n(114),d=n(41),c=n(18),p=n(115),u=n(118),g=n(119),h=n(46),m=n(120),_=n(121),y=n(122),f=n(123),b=n(47),v=n(40),x=n(124),E=n(19),S=n(44),k=n(125),w=n(126),C=n(127),T=n(45);n.d(t,'d',function(){return T.a}),n.d(t,'b',function(){return T.b}),n.d(t,'c',function(){return T.c});var I=n(48),N=n(42),L=n(128)},function(e,t){'use strict';t.a=function(e,t){var r=e.length,n=-1,i,o,s;if(null==t){for(;++n<r;)if(null!=(i=e[n])&&i>=i)for(o=s=i;++n<r;)null!=(i=e[n])&&(o>i&&(o=i),s<i&&(s=i));}else for(;++n<r;)if(null!=(i=t(e[n],n,e))&&i>=i)for(o=s=i;++n<r;)null!=(i=t(e[n],n,e))&&(o>i&&(o=i),s<i&&(s=i));return[o,s]}},function(e,t,n){'use strict';var r=n(8);t.a=function(e,t,o){if(null==o&&(o=r.a),!!(c=e.length)){if(0>=(t=+t)||2>c)return+o(e[0],0,e);if(1<=t)return+o(e[c-1],c-1,e);var s=(c-1)*t,i=Math.floor(s),l=+o(e[i],i,e),d=+o(e[i+1],i+1,e),c;return l+(d-l)*(s-i)}}},function(e,t,n){'use strict';var i=n(6),r=n(51),o=n(54),s=n(55),l=n(13),d=n(56),p=n(57),u=n(53);t.a=function(e,n){var g=typeof n,t;return null==n||'boolean'==g?Object(u.a)(n):('number'==g?l.a:'string'==g?(t=Object(i.a)(n))?(n=t,r.a):p.a:n instanceof i.a?r.a:n instanceof Date?s.a:Array.isArray(n)?o.a:'function'!=typeof n.valueOf&&'function'!=typeof n.toString||isNaN(n)?d.a:l.a)(e,n)}},function(e,t,n){'use strict';function i(){}function d(e){var t;return e=(e+'').trim().toLowerCase(),(t=S.exec(e))?(t=parseInt(t[1],16),new c(15&t>>8|240&t>>4,15&t>>4|240&t,(15&t)<<4|15&t,1)):(t=k.exec(e))?r(parseInt(t[1],16)):(t=w.exec(e))?new c(t[1],t[2],t[3],1):(t=C.exec(e))?new c(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=T.exec(e))?o(t[1],t[2],t[3],t[4]):(t=I.exec(e))?o(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=N.exec(e))?p(t[1],t[2]/100,t[3]/100,1):(t=L.exec(e))?p(t[1],t[2]/100,t[3]/100,t[4]):M.hasOwnProperty(e)?r(M[e]):'transparent'===e?new c(NaN,NaN,NaN,0):null}function r(e){return new c(255&e>>16,255&e>>8,255&e,1)}function o(e,t,n,i){return 0>=i&&(e=t=n=NaN),new c(e,t,n,i)}function s(e){return(e instanceof i||(e=d(e)),!e)?new c:(e=e.rgb(),new c(e.r,e.g,e.b,e.opacity))}function l(e,t,n,i){return 1===arguments.length?s(e):new c(e,t,n,null==i?1:i)}function c(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}function p(e,t,n,i){return 0>=i?e=t=n=NaN:0>=n||1<=n?e=t=NaN:0>=t&&(e=NaN),new m(e,t,n,i)}function u(e){if(e instanceof m)return new m(e.h,e.s,e.l,e.opacity);if(e instanceof i||(e=d(e)),!e)return new m;if(e instanceof m)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,c=f(t,n,r),p=y(t,n,r),u=NaN,g=p-c,s=(p+c)/2;return g?(u=t===p?(n-r)/g+6*(n<r):n===p?(r-t)/g+2:(t-n)/g+4,g/=0.5>s?p+c:2-p-c,u*=60):g=0<s&&1>s?0:u,new m(u,g,s,e.opacity)}function g(e,t,n,i){return 1===arguments.length?u(e):new m(e,t,n,null==i?1:i)}function m(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}function _(e,t,n){return 255*(60>e?t+(n-t)*e/60:180>e?n:240>e?t+(n-t)*(240-e)/60:t)}var y=Math.max,f=Math.min,h=Math.round,b=Math.pow;t.a=i,n.d(t,'d',function(){return x}),n.d(t,'c',function(){return E}),t.e=d,t.h=s,t.g=l,t.b=c,t.f=g;var v=n(22),x=0.7,E=1/x,S=/^#([0-9a-f]{3})$/,k=/^#([0-9a-f]{6})$/,w=/^rgb\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*\)$/,C=/^rgb\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*\)$/,T=/^rgba\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,I=/^rgba\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,N=/^hsl\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*\)$/,L=/^hsla\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,M={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Object(v.a)(i,d,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+''}}),Object(v.a)(c,l,Object(v.b)(i,{brighter:function(e){return e=null==e?E:b(E,e),new c(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?x:b(x,e),new c(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&255>=this.r&&0<=this.g&&255>=this.g&&0<=this.b&&255>=this.b&&0<=this.opacity&&1>=this.opacity},toString:function(){var e=this.opacity;return e=isNaN(e)?1:y(0,f(1,e)),(1===e?'rgb(':'rgba(')+y(0,f(255,h(this.r)||0))+', '+y(0,f(255,h(this.g)||0))+', '+y(0,f(255,h(this.b)||0))+(1===e?')':', '+e+')')}})),Object(v.a)(m,g,Object(v.b)(i,{brighter:function(e){return e=null==e?E:b(E,e),new m(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?x:b(x,e),new m(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(0>this.h),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(0.5>n?n:1-n)*t,r=2*n-i;return new c(_(240<=e?e-240:e+120,r,i),_(e,r,i),_(120>e?e+240:e-120,r,i),this.opacity)},displayable:function(){return(0<=this.s&&1>=this.s||isNaN(this.s))&&0<=this.l&&1>=this.l&&0<=this.opacity&&1>=this.opacity}}))},function(e,t){'use strict';t.b=function(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n},t.a=function(e,t,n){e.prototype=t.prototype=n,n.constructor=e}},function(e,t){'use strict';function r(e,t,n,i,r){var o=e*e,s=o*e;return((1-3*e+3*o-s)*t+(4-6*o+3*s)*n+(1+3*e+3*o-3*s)*i+s*r)/6}t.a=r,t.b=function(e){var o=e.length-1;return function(n){var t=0>=n?n=0:1<=n?(n=1,o-1):Math.floor(n*o),i=e[t],s=e[t+1],l=0<t?e[t-1]:2*i-s,d=t<o-1?e[t+2]:2*s-i;return r((n-t/o)*o,l,i,s,d)}}},function(e,t){'use strict';t.a=function(e,t){if(0>(r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf('e')))return null;var n=e.slice(0,r),r;return[1<n.length?n[0]+n.slice(2):n,+e.slice(r+1)]}},function(e,t,n){'use strict';var i=n(157),r=n.n(i);const o={container:(e)=>{return JSON.parse(localStorage.getItem(e))||[]},unshift:(e,t)=>{let n=o.container(e);n=n.filter((e)=>e!==t),n.unshift(t),localStorage.setItem(e,JSON.stringify(n))},remove:(e,t)=>{let n=o.container(e);n=n.filter((e)=>e!==t),localStorage.removeItem(t),localStorage.setItem(e,JSON.stringify(n))},add:(e,t,n)=>{let i=o.container(e);if(i.unshift(t),3<i.length){let e=i.pop();localStorage.removeItem(e)}localStorage.setItem(e,JSON.stringify(i)),o.set(t,n)},set:(e,t)=>{let n=t;'toJSON'in t&&(n=t.toJSON()),localStorage.setItem(e,r.a.compressToUTF16(JSON.stringify(n)))},get:(e)=>{let t=localStorage.getItem(e);return void 0!==t&&null!==t?JSON.parse(r.a.decompressFromUTF16(t)):t}};t.a=o},function(e){'use strict';e.exports={commonElement:function(e,t){for(var r=0,i=e.length;r<i;r++)if(-1!==this.indexOf(t,e[r]))return e[r];return null},indexOf:function(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0,i=e.length;r<i;r++)if(e[r]===t)return r;return-1},map:function(e,t,r){if(e.map)return e.map(t,r);var o=[];if(e instanceof Array)for(var s=0,i=e.length;s<i;s++)o.push(t.call(r||null,e[s],s));else for(var n in e)e.hasOwnProperty(n)&&o.push(t.call(r||null,n,e[n]));return o},filter:function(e,t,r){if(e.filter)return e.filter(t,r);for(var o=[],s=0,i=e.length;s<i;s++)t.call(r||null,e[s],s)&&o.push(e[s]);return o},asyncEach:function(e,t,r,o){var s=e.length,n=-1,i=0,l=!1,d=function(){return i-=1,n+=1,n===s?r&&r.call(o):void t(e[n],p)},c=function(){if(!l){for(l=!0;0<i;)d();l=!1}},p=function(){i+=1,c()};p()}}},function(e,t,n){'use strict';(function(t){var n={_registry:[],on:function(e,t,n,i){var r=function(){n.call(i)};e.addEventListener?e.addEventListener(t,r,!1):e.attachEvent('on'+t,r),this._registry.push({_element:e,_type:t,_callback:n,_context:i,_handler:r})},detach:function(e,t,n,r){for(var o=this._registry.length,i;o--;)i=this._registry[o],e&&e!==i._element||t&&t!==i._type||n&&n!==i._callback||r&&r!==i._context||(i._element.removeEventListener?i._element.removeEventListener(i._type,i._handler,!1):i._element.detachEvent('on'+i._type,i._handler),this._registry.splice(o,1),i=null)}};t.onunload!==void 0&&n.on(t,'unload',n.detach,n),e.exports={Event:n}}).call(t,n(0))},function(e,t,n){'use strict';var i=n(1),r=n(165),o={countListeners:function(e){return this.listeners(e).length},bind:function(e,t,n){var i=Array.prototype.slice,r=function(){t.apply(n,i.call(arguments))};return this._listeners=this._listeners||[],this._listeners.push([e,t,n,r]),this.on(e,r)},unbind:function(e,t,i){this._listeners=this._listeners||[];for(var r=this._listeners.length,n;r--;)n=this._listeners[r],n[0]!==e||t&&(n[1]!==t||n[2]!==i)||(this._listeners.splice(r,1),this.removeListener(e,n[3]))}};i(o,r.prototype),o.trigger=o.emit,e.exports=o},function(e){'use strict';var t=function(e){var n,r,i;if(e instanceof Array){for(n=[],r=e.length;r--;)n[r]=t(e[r]);return n}if('object'==typeof e){for(i in n=null===e?null:{},e)n[i]=t(e[i]);return n}return e};e.exports=t},function(e,t){'use strict';t.a=function(e){return new Promise(function(t,n){r.geocode({location:e},function(e,i){'OK'===i?t(e):n(new Error(i))})})},t.c=function(e,t){return new Promise(function(n,r){i.getPanorama({location:e,radius:t},(e,t)=>{t==google.maps.StreetViewStatus.OK?n(e):r(new Error(t))})})},t.b=function(e){return new Promise(function(t,i){n.getElevationAlongPath(e,(e,n)=>{n==google.maps.ElevationStatus.OK?t(e):i(new Error(n))})})};let n=new google.maps.ElevationService,i=new google.maps.StreetViewService,r=new google.maps.Geocoder},function(e,t){'use strict';function n(){}t.a=function(e){return null==e?n:function(){return this.querySelector(e)}}},function(e,t,n){'use strict';function i(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}t.a=i;var r=n(33),o=n(3);t.b=function(){return new o.a(this._enter||this._groups.map(r.a),this._parents)},i.prototype={constructor:i,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}}},function(e,t){'use strict';t.a=function(e){return Array(e.length)}},function(e,t,n){'use strict';var r=n(35);t.a=function(e){var t=e+='',n=t.indexOf(':');return 0<=n&&'xmlns'!==(t=e.slice(0,n))&&(e=e.slice(n+1)),r.a.hasOwnProperty(t)?{space:r.a[t],local:e}:e}},function(e,t,n){'use strict';n.d(t,'b',function(){return i});var i='http://www.w3.org/1999/xhtml';t.a={svg:'http://www.w3.org/2000/svg',xhtml:i,xlink:'http://www.w3.org/1999/xlink',xml:'http://www.w3.org/XML/1998/namespace',xmlns:'http://www.w3.org/2000/xmlns/'}},function(e,t){'use strict';t.a=function(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}},function(e,t,n){'use strict';function i(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===s.b&&t.documentElement.namespaceURI===s.b?t.createElement(e):t.createElementNS(n,e)}}function r(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}var o=n(34),s=n(35);t.a=function(e){var t=Object(o.a)(e);return(t.local?r:i)(t)}},function(e,t,n){'use strict';var i=n(5),r=n(39),o=Object(r.a)(i.a),s=o.right,l=o.left;t.a=s},function(e,t,n){'use strict';function i(e){return function(t,n){return Object(r.a)(e(t),n)}}var r=n(5);t.a=function(e){return 1===e.length&&(e=i(e)),{left:function(t,n,i,r){for(null==i&&(i=0),null==r&&(r=t.length);i<r;){var o=i+r>>>1;0>e(t[o],n)?i=o+1:r=o}return i},right:function(t,n,i,r){for(null==i&&(i=0),null==r&&(r=t.length);i<r;){var o=i+r>>>1;0<e(t[o],n)?r=o:i=o+1}return i}}}},function(e,t){'use strict';function n(e,t){return[e,t]}t.a=n},function(e,t,n){'use strict';var i=n(42);t.a=function(e,t){var n=Object(i.a)(e,t);return n?Math.sqrt(n):n}},function(e,t,n){'use strict';var r=n(8);t.a=function(e,t){var o=e.length,n=0,s=-1,i=0,l=0,d,c;if(null==t)for(;++s<o;)isNaN(d=Object(r.a)(e[s]))||(c=d-i,i+=c/++n,l+=c*(d-i));else for(;++s<o;)isNaN(d=Object(r.a)(t(e[s],s,e)))||(c=d-i,i+=c/++n,l+=c*(d-i));return 1<n?l/(n-1):void 0}},function(e,t,n){'use strict';n.d(t,'b',function(){return r}),n.d(t,'a',function(){return o});var i=Array.prototype,r=i.slice,o=i.map},function(e,t){'use strict';t.a=function(e,t,r){e=+e,t=+t,r=2>(i=arguments.length)?(t=e,e=0,1):3>i?1:+r;for(var o=-1,i=0|Math.max(0,Math.ceil((t-e)/r)),n=Array(i);++o<i;)n[o]=e+o*r;return n}},function(e,t){'use strict';function r(e,t,r){var o=(t-e)/s(0,r),g=l(i(o)/n),h=o/d(10,g);return 0<=g?(h>=c?10:h>=p?5:h>=u?2:1)*d(10,g):-d(10,-g)/(h>=c?10:h>=p?5:h>=u?2:1)}var n=Math.LN10,i=Math.log,o=Math.ceil,s=Math.max,l=Math.floor,d=Math.pow;t.b=r,t.c=function(e,t,r){var o=Math.abs(t-e)/s(0,r),g=d(10,l(i(o)/n)),h=o/g;return h>=c?g*=10:h>=p?g*=5:h>=u&&(g*=2),t<e?-g:g};var c=7.0710678118654755,p=3.1622776601683795,u=1.4142135623730951;t.a=function(e,t,s){var d=-1,i,c,n,p;if(t=+t,e=+e,s=+s,e===t&&0<s)return[e];if((i=t<e)&&(c=e,e=t,t=c),0===(p=r(e,t,s))||!isFinite(p))return[];if(0<p)for(e=o(e/p),t=l(t/p),n=Array(c=o(t-e+1));++d<c;)n[d]=(e+d)*p;else for(e=l(e*p),t=o(t*p),n=Array(c=o(e-t+1));++d<c;)n[d]=(e-d)/p;return i&&n.reverse(),n}},function(e,t){'use strict';t.a=function(e){return Math.ceil(Math.log(e.length)/Math.LN2)+1}},function(e,t){'use strict';t.a=function(e,t){var r=e.length,n=-1,i,o;if(null==t){for(;++n<r;)if(null!=(i=e[n])&&i>=i)for(o=i;++n<r;)null!=(i=e[n])&&o>i&&(o=i);}else for(;++n<r;)if(null!=(i=t(e[n],n,e))&&i>=i)for(o=i;++n<r;)null!=(i=t(e[n],n,e))&&o>i&&(o=i);return o}},function(e,t,n){'use strict';function r(e){return e.length}var o=n(47);t.a=function(e){if(!(c=e.length))return[];for(var t=-1,i=Object(o.a)(e,r),s=Array(i);++t<i;)for(var l=-1,d=s[t]=Array(c),c;++l<c;)d[l]=e[l][t];return s}},function(e,t,n){'use strict';var i=n(20);n.d(t,'a',function(){return i.a});var r=n(54),o=n(23),s=n(52),l=n(55),d=n(13);n.d(t,'b',function(){return d.a});var c=n(56),p=n(131);n.d(t,'c',function(){return p.a});var u=n(57),g=n(132),h=n(135),m=n(51),_=n(136),y=n(137),f=n(138),b=n(139),v=n(140)},function(e,t,n){'use strict';var i=Math.PI;n.d(t,'a',function(){return r}),n.d(t,'b',function(){return o});var r=i/180,o=180/i},function(e,t,n){'use strict';function i(e){return function(t){var s=t.length,n=Array(s),r=Array(s),l=Array(s),d,i;for(d=0;d<s;++d)i=Object(o.f)(t[d]),n[d]=i.r||0,r[d]=i.g||0,l[d]=i.b||0;return n=e(n),r=e(r),l=e(l),i.opacity=1,function(e){return i.r=n(e),i.g=r(e),i.b=l(e),i+''}}}var o=n(6),r=n(23),s=n(52),l=n(9);t.a=function e(t){function n(e,t){var n=i((e=Object(o.f)(e)).r,(t=Object(o.f)(t)).r),r=i(e.g,t.g),s=i(e.b,t.b),d=Object(l.a)(e.opacity,t.opacity);return function(i){return e.r=n(i),e.g=r(i),e.b=s(i),e.opacity=d(i),e+''}}var i=Object(l.b)(t);return n.gamma=e,n}(1);var d=i(r.b),c=i(s.a)},function(e,t,n){'use strict';var r=n(23);t.a=function(e){var o=e.length;return function(n){var t=Math.floor((0>(n%=1)?++n:n)*o),i=e[(t+o-1)%o],s=e[t%o],l=e[(t+1)%o],d=e[(t+2)%o];return Object(r.a)((n-t/o)*o,i,s,l,d)}}},function(e,t){'use strict';t.a=function(e){return function(){return e}}},function(e,t,n){'use strict';var r=n(20);t.a=function(e,t){var n=t?t.length:0,o=e?Math.min(n,e.length):0,s=Array(o),l=Array(n),d;for(d=0;d<o;++d)s[d]=Object(r.a)(e[d],t[d]);for(;d<n;++d)l[d]=t[d];return function(e){for(d=0;d<o;++d)l[d]=s[d](e);return l}}},function(e,t){'use strict';t.a=function(e,n){var i=new Date;return e=+e,n-=e,function(r){return i.setTime(e+n*r),i}}},function(e,t,n){'use strict';var r=n(20);t.a=function(e,t){var n={},i={},o;for(o in(null===e||'object'!=typeof e)&&(e={}),(null===t||'object'!=typeof t)&&(t={}),t)o in e?n[o]=Object(r.a)(e[o],t[o]):i[o]=t[o];return function(e){for(o in n)i[o]=n[o](e);return i}}},function(e,t,n){'use strict';function r(e){return function(){return e}}function o(e){return function(n){return e(n)+''}}var l=n(13),d=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,c=new RegExp(d.source,'g');t.a=function(e,n){var t=d.lastIndex=c.lastIndex=0,p=-1,u=[],s=[],g,h,m;for(e+='',n+='';(g=d.exec(e))&&(h=c.exec(n));)(m=h.index)>t&&(m=n.slice(t,m),u[p]?u[p]+=m:u[++p]=m),(g=g[0])===(h=h[0])?u[p]?u[p]+=h:u[++p]=h:(u[++p]=null,s.push({i:p,x:Object(l.a)(g,h)})),t=c.lastIndex;return t<n.length&&(m=n.slice(t),u[p]?u[p]+=m:u[++p]=m),2>u.length?s[0]?o(s[0].x):r(n):(n=s.length,function(e){for(var t=0,i;t<n;++t)u[(i=s[t]).i]=i.x(e);return u.join('')})}},function(e,t,n){'use strict';var i=Math.max,r=Math.min,o=n(14),s=n(148),l=n(149),d=n(59),c=n(60),p=n(61),u=n(152),g=['y','z','a','f','p','n','\xB5','m','','k','M','G','T','P','E','Z','Y'];t.a=function(e){function t(e){function t(e){var t=S,r=k,d,i,n;if('c'===E)r=w(e)+r,e='';else{e=+e;var c=0>e;if(e=w(Math.abs(e),x),c&&0==+e&&(c=!1),t=(c?'('===l?l:'-':'-'===l||'('===l?'':l)+t,r=('s'===E?g[8+p.b/3]:'')+r+(c&&'('===l?')':''),C)for(d=-1,i=e.length;++d<i;)if(n=e.charCodeAt(d),48>n||57<n){r=(46===n?m+e.slice(d+1):e.slice(d))+r,e=e.slice(0,d);break}}v&&!f&&(e=h(e,Infinity));var u=t.length+e.length+r.length,y=u<b?Array(b-u+1).join(o):'';switch(v&&f&&(e=h(y+e,y.length?b-r.length:Infinity),y=''),s){case'<':e=t+e+r+y;break;case'=':e=t+y+e+r;break;case'^':e=y.slice(0,u=y.length>>1)+t+e+r+y.slice(u);break;default:e=y+t+e+r;}return _(e)}e=Object(d.a)(e);var o=e.fill,s=e.align,l=e.sign,u=e.symbol,f=e.zero,b=e.width,v=e.comma,x=e.precision,E=e.type,S='$'===u?n[0]:'#'===u&&/[boxX]/.test(E)?'0'+E.toLowerCase():'',k='$'===u?n[1]:/[%p]/.test(E)?y:'',w=c.a[E],C=!E||/[defgprs%]/.test(E);return x=null==x?E?6:12:/[gprs]/.test(E)?i(1,r(21,x)):i(0,r(20,x)),t.toString=function(){return e+''},t}var h=e.grouping&&e.thousands?Object(s.a)(e.grouping,e.thousands):u.a,n=e.currency,m=e.decimal,_=e.numerals?Object(l.a)(e.numerals):u.a,y=e.percent||'%';return{format:t,formatPrefix:function(n,s){var l=t((n=Object(d.a)(n),n.type='f',n)),c=3*i(-8,r(8,Math.floor(Object(o.a)(s)/3))),p=Math.pow(10,-c),u=g[8+c/3];return function(e){return l(p*e)+u}}}}},function(e,t,n){'use strict';function i(e){return new r(e)}function r(e){if(!(g=l.exec(e)))throw new Error('invalid format: '+e);var t=g[1]||' ',n=g[2]||'>',i=g[3]||'-',r=g[4]||'',o=!!g[5],d=g[6]&&+g[6],c=!!g[7],p=g[8]&&+g[8].slice(1),u=g[9]||'',g;'n'===u?(c=!0,u='g'):!s.a[u]&&(u=''),(o||'0'===t&&'='===n)&&(o=!0,t='0',n='='),this.fill=t,this.align=n,this.sign=i,this.symbol=r,this.zero=o,this.width=d,this.comma=c,this.precision=p,this.type=u}var o=Math.max;t.a=i;var s=n(60),l=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;i.prototype=r.prototype,r.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?'0':'')+(null==this.width?'':o(1,0|this.width))+(this.comma?',':'')+(null==this.precision?'':'.'+o(0,0|this.precision))+this.type}},function(e,t,n){'use strict';var i=Math.round,r=n(150),o=n(61),s=n(151);t.a={"":r.a,"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return i(e).toString(2)},c:function(e){return e+''},d:function(e){return i(e).toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return i(e).toString(8)},p:function(e,t){return Object(s.a)(100*e,t)},r:s.a,s:o.a,X:function(e){return i(e).toString(16).toUpperCase()},x:function(e){return i(e).toString(16)}}},function(e,t,n){'use strict';var r=Math.max;n.d(t,'b',function(){return s});var o=n(24),s;t.a=function(e,t){var l=Object(o.a)(e,t);if(!l)return e+'';var c=l[0],p=l[1],u=p-(s=3*r(-8,Math.min(8,Math.floor(p/3))))+1,i=c.length;return u===i?c:u>i?c+Array(u-i+1).join('0'):0<u?c.slice(0,u)+'.'+c.slice(u):'0.'+Array(1-u).join('0')+Object(o.a)(e,r(0,t+u-1))[0]}},function(e,t){'use strict';t.a={STRAVA_CLIENT_ID:'19775',STRAVA_CLIENT_SECRET:'d1fd34e8c88fc5611ff41d9361e0668e9fe676f0',STRAVA_ACCESS_TOKEN:'b4eb2c4a2517d2b916583bcbeec2aa2f6a22a8b2'}},function(e,t,n){'use strict';var i=n(156),r=n(16),o=n(30),s=n(25),l=n(158),d=n.n(l);class c{constructor({elevation:e,grade:t,smoothedGrade:n,distance:i,heading:r,climb:o,opposite:s,location:l}){this.elevation=e,this.grade=t,this.smoothedGrade=n,this.distance=i,this.heading=r,this.climb=o,this.opposite=s,this.location=l instanceof google.maps.LatLng?l:new google.maps.LatLng(l.lat,l.lng)}toJSON(){let{elevation:e,grade:t,smoothedGrade:n,distance:i,heading:r,climb:o,opposite:s}=this,l=this.location.toJSON();return{elevation:e,grade:t,smoothedGrade:n,distance:i,heading:r,climb:o,opposite:s,location:l}}static fromJSON(e){return new c(e)}}t.b=c;t.a=class{constructor(e){this.fileBody=e,this.md5=d()(e),this.points=[]}expandPointsWithGradeAndHeading(){for(let e=0,t;e<this.points.length;e++)if(t=this.points[e],e<this.points.length-1){let n=this.points[e+1];t.heading=google.maps.geometry.spherical.computeHeading(t.location,n.location);let i=google.maps.geometry.spherical.computeDistanceBetween(t.location,n.location),r=n.elevation-t.elevation;t.distance=i,t.grade=100*(r/i),t.opposite=r,t.climb=r}else t.distance=0,t.heading=0,t.grade=0,t.opposite=0,t.climb=0;let e=this.points.map((e,t)=>{return[t,e.grade]}),t=i.a.smooth.kernel2().kernel('Gaussian').data(e).scale(2);t();let n=t.output();for(let e=0;e<this.points.length;e++)this.points[e].smoothedGrade=n[e][1],(0.95>this.points[e].smoothedGrade||0>this.points[e].climb)&&(this.points[e].climb=0)}async expandPointsWithElevation(e){let t=0,n=20,i=512;for(;t<e.length;){0<t&&(await Object(r.d)(4e3));let s=[],l=0,d=0;for(let r=t;r<e.length;r++){let t=e[r],o=0;if(r<e.length-1){let n=e[r+1];o=google.maps.geometry.spherical.computeDistanceBetween(t.location,n.location)}if(l+=o,d+=1,l<=i*n&&d<i)s.push(t.location);else{d-=1,l-=o;break}}let p={path:s,samples:Math.ceil(l/n)},u=await Object(o.b)(p),g=u.map((t)=>{return new c({elevation:t.elevation,location:t.location})});Array.prototype.push.apply(this.points,g),t=d+t}}async create(){let e='gpx-cache-'+this.md5,t=s.a.get(e);if(t!==void 0&&null!==t)s.a.unshift('gpx-cache',e),this.points=t.map((e)=>{return c.fromJSON(e)});else{let t=new DOMParser,n=t.parseFromString(this.fileBody,'text/xml'),i=Array.from(n.documentElement.getElementsByTagName('trkpt')).map((e)=>{let t=parseFloat(e.getAttribute('lat')),n=parseFloat(e.getAttribute('lon'));return new c({location:{lat:t,lng:n}})});await this.expandPointsWithElevation(i),this.expandPointsWithGradeAndHeading(),s.a.add('gpx-cache',e,this.points)}return this.points}}},function(e){e.exports={VERSION:'1.2.4',BAYEUX_VERSION:'1.0',ID_LENGTH:160,JSONP_CALLBACK:'jsonpcallback',CONNECTION_TYPES:['long-polling','cross-origin-long-polling','callback-polling','websocket','eventsource','in-process'],MANDATORY_CONNECTION_TYPES:['long-polling','callback-polling','in-process']}},function(e,t,n){'use strict';function i(e){var t;t=s.length?s.pop():new r,t.task=e,o(t)}function r(){this.task=null}var o=n(163),s=[],l=[],d=o.makeRequestCallFromTimer(function(){if(l.length)throw l.shift()});e.exports=i,r.prototype.call=function(){try{this.task.call()}catch(e){i.onerror?i.onerror(e):(l.push(e),d())}finally{this.task=null,s[s.length]=this}}},function(e,t,n){'use strict';var i=n(2),r=n(1),o=n(28),s=n(67),l=i({initialize:function(e){this.id=this.name=e},push:function(e){this.trigger('message',e)},isUnused:function(){return 0===this.countListeners('message')}});r(l.prototype,o),r(l,{HANDSHAKE:'/meta/handshake',CONNECT:'/meta/connect',SUBSCRIBE:'/meta/subscribe',UNSUBSCRIBE:'/meta/unsubscribe',DISCONNECT:'/meta/disconnect',META:'meta',SERVICE:'service',expand:function(e){var t=this.parse(e),r=['/**',e],o=t.slice();o[o.length-1]='*',r.push(this.unparse(o));for(var s=1,i=t.length;s<i;s++)o=t.slice(0,s),o.push('**'),r.push(this.unparse(o));return r},isValid:function(e){return s.CHANNEL_NAME.test(e)||s.CHANNEL_PATTERN.test(e)},parse:function(e){return this.isValid(e)?e.split('/').slice(1):null},unparse:function(e){return'/'+e.join('/')},isMeta:function(e){var t=this.parse(e);return t?t[0]===this.META:null},isService:function(e){var t=this.parse(e);return t?t[0]===this.SERVICE:null},isSubscribable:function(e){return this.isValid(e)?!this.isMeta(e)&&!this.isService(e):null},Set:i({initialize:function(){this._channels={}},getKeys:function(){var e=[];for(var t in this._channels)e.push(t);return e},remove:function(e){delete this._channels[e]},hasSubscription:function(e){return this._channels.hasOwnProperty(e)},subscribe:function(e,t){for(var r=0,i=e.length,n;r<i;r++){n=e[r];var o=this._channels[n]=this._channels[n]||new l(n);o.bind('message',t)}},unsubscribe:function(e,t){var n=this._channels[e];return!!n&&(n.unbind('message',t),!!n.isUnused()&&(this.remove(e),!0))},distributeMessage:function(e){for(var t=l.expand(e.channel),r=0,i=t.length,n;r<i;r++)n=this._channels[t[r]],n&&n.trigger('message',e)}})}),e.exports=l},function(e){'use strict';e.exports={CHANNEL_NAME:/^\/(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)))+(\/(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)))+)*$/,CHANNEL_PATTERN:/^(\/(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)))+)*\/\*{1,2}$/,ERROR:/^([0-9][0-9][0-9]:(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)| |\/|\*|\.))*(,(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)| |\/|\*|\.))*)*:(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)| |\/|\*|\.))*|[0-9][0-9][0-9]::(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)| |\/|\*|\.))*)$/,VERSION:/^([0-9])+(\.(([a-z]|[A-Z])|[0-9])(((([a-z]|[A-Z])|[0-9])|\-|\_))*)*$/}},function(e){'use strict';e.exports={}},function(e,t,n){'use strict';var i=n(2);e.exports=i({initialize:function(){this._index={}},add:function(e){var t=void 0===e.id?e:e.id;return!this._index.hasOwnProperty(t)&&(this._index[t]=e,!0)},forEach:function(e,t){for(var n in this._index)this._index.hasOwnProperty(n)&&e.call(t,this._index[n])},isEmpty:function(){for(var e in this._index)if(this._index.hasOwnProperty(e))return!1;return!0},member:function(e){for(var t in this._index)if(this._index[t]===e)return!0;return!1},remove:function(e){var t=void 0===e.id?e:e.id,n=this._index[t];return delete this._index[t],n},toArray:function(){var e=[];return this.forEach(function(t){e.push(t)}),e}})},function(e,t,n){'use strict';(function(t){var i=n(2),r=n(4),o=n(27),s=n(1),l=n(11),d=n(7),c=s(i(d,{encode:function(e){return l(e)},request:function(e){var n=this.endpoint.href,i=this,r;if(t.XMLHttpRequest)r=new XMLHttpRequest;else if(t.ActiveXObject)r=new ActiveXObject('Microsoft.XMLHTTP');else return this._handleError(e);r.open('POST',n,!0),r.setRequestHeader('Content-Type','application/json'),r.setRequestHeader('Pragma','no-cache'),r.setRequestHeader('X-Requested-With','XMLHttpRequest');var s=this._dispatcher.headers;for(var l in s)s.hasOwnProperty(l)&&r.setRequestHeader(l,s[l]);var d=function(){r.abort()};return void 0!==t.onbeforeunload&&o.Event.on(t,'beforeunload',d),r.onreadystatechange=function(){if(r&&4===r.readyState){var n=null,s=r.status,l=r.responseText;if(void 0!==t.onbeforeunload&&o.Event.detach(t,'beforeunload',d),r.onreadystatechange=function(){},r=null,!(200<=s&&300>s||304===s||1223===s))return i._handleError(e);try{n=JSON.parse(l)}catch(e){}n?i._receive(n):i._handleError(e)}},r.send(this.encode(e)),r}}),{isUsable:function(e,t,n,i){var o='ReactNative'===navigator.product||r.isSameOrigin(t);n.call(i,o)}});e.exports=c}).call(t,n(0))},function(e,t,n){'use strict';var i=n(1),r=function(e,t){this.message=e,this.options=t,this.attempts=0};i(r.prototype,{getTimeout:function(){return this.options.timeout},getInterval:function(){return this.options.interval},isDeliverable:function(){var e=this.options.attempts,t=this.attempts,n=this.options.deadline,i=new Date().getTime();return void 0!==e&&t>=e?!1:void 0!==n&&i>n?!1:!0},send:function(){this.attempts+=1},succeed:function(){},fail:function(){},abort:function(){}}),e.exports=r},function(e,t,n){'use strict';Object.defineProperty(t,'__esModule',{value:!0});var i=n(73);document.addEventListener('DOMContentLoaded',()=>{Object(i.a)()})},function(e,t,n){'use strict';t.a=function(){let e=new URL(window.location),t=new p.a(e.search);if(t.get('state')&&t.get('code')){let e=t.get('code');localStorage.setItem('strava-oauth-code-'+s.a.STRAVA_CLIENT_ID,e);let n=window.location.pathname;return'true'===t.get('useant')&&(n+='?useant=true'),void window.location.assign(n)}let n=window.location.protocol,c='true'!==t.get('useant');(s.a.STRAVA_CLIENT_ID===void 0||null===s.a.STRAVA_CLIENT_ID||''===s.a.STRAVA_CLIENT_ID)&&(document.getElementById('container-strava').style.display='none'),localStorage.getItem('strava-oauth-code-'+s.a.STRAVA_CLIENT_ID)&&(document.getElementById('strava-btn-connect').style.display='none',document.getElementById('strava-btn-connected').style.display='block');let u=d.a.container('route-progress'),h=document.getElementById('continue-previous');for(let e of u)try{let t=d.a.get(e);var m=document.createElement('option');let n=new Date;n.setTime(t.id),m.innerHTML=n.toLocaleDateString()+' '+n.toLocaleTimeString()+' - '+t.routeName,m.setAttribute('value',e),h.add(m)}catch(e){localStorage.clear(),location.reload();break}let _=[['virtual',new l.g]],y=[],f=[],b=document.getElementById('gpx-file-upload'),v=document.getElementById('display-unit'),x=document.getElementById('rider-weight'),E=document.getElementById('begin-session'),S=document.getElementById('btn-bluetooth-device-txt'),k=document.getElementById('btn-ant-device-txt'),w=document.getElementById('strava-btn-connect'),C=document.getElementById('btn-bluetooth-device'),T=document.getElementById('btn-ant-device'),I=document.getElementById('power-meter'),N=document.getElementById('hr-meter'),L=document.getElementById('cadence-meter'),M=document.getElementById('menuopen-btn'),A=document.getElementById('btn-fullscreen'),D=document.getElementById('bluetooth-device-container'),O=document.getElementById('ant-device-container'),R=document.getElementById('ant-ws-url'),P=(e)=>{I.options.length=0;for(let[n,i]of _){var t=document.createElement('option');t.innerHTML=i.name,t.setAttribute('value',i.id),i.id===e.id&&t.setAttribute('selected','true'),I.add(t)}'virtual'===I.value&&1<_.length&&I.options[1].setAttribute('selected','true'),N.options.length=0;for(let[n,i]of y){var t=document.createElement('option');t.innerHTML=i.name,t.setAttribute('value',i.id),i.id===e.id&&t.setAttribute('selected','true'),N.options.add(t)}if(0===N.options.length){var t=document.createElement('option');t.innerHTML='Disabled',t.setAttribute('value',''),N.options.add(t)}L.options.length=0;for(let[n,i]of f){var t=document.createElement('option');t.innerHTML=i.name,t.setAttribute('value',i.id),i.id===e.id&&t.setAttribute('selected','true'),L.options.add(t)}if(0===L.options.length){var t=document.createElement('option');t.innerHTML='Disabled',t.setAttribute('value',''),L.options.add(t)}},U;for(let e of document.querySelectorAll('#route-nav a'))e.onclick=(t)=>{t.preventDefault();let e=t.target.getAttribute('href');for(let e of document.querySelectorAll('.nav-link'))e.classList.remove('active');t.target.classList.add('active');for(let e of document.querySelectorAll('.tab-pane'))e.classList.remove('active');document.querySelector(e).classList.add('active')};v.onchange=()=>{'imperial'===v.value?(document.getElementById('rider-weight-label').innerHTML='Rider Weight (lbs)',document.getElementById('rider-weight').setAttribute('placeholder',185)):(document.getElementById('rider-weight-label').innerHTML='Rider Weight (kg)',document.getElementById('rider-weight').setAttribute('placeholder',85))},M.onclick=(t)=>{t.preventDefault(),'none'===document.getElementById('ui-finalize-container').style.display?U.showFinalizeUI('Complete Ride'):document.getElementById('ui-finalize-container').style.display='none'},A.onclick=(t)=>{t.preventDefault(),null===g.a.fullscreenElement?g.a.requestFullscreen(document.body):g.a.exitFullscreen()},w.onclick=(n)=>{n.preventDefault();let e=window.location.protocol,i=window.location.host,r=e+'//'+i+window.location.pathname;'true'===t.get('useant')&&(r+='?useant=true'),window.location.assign('https://www.strava.com/oauth/authorize?client_id='+s.a.STRAVA_CLIENT_ID+'&response_type=code&redirect_uri='+encodeURIComponent(r)+'&scope=write&state=strava')},C.onclick=(t)=>{if(t.preventDefault(),'undefined'==typeof navigator||!('bluetooth'in navigator))return document.getElementById('btn-bluetooth-device').style.display='none',void(document.getElementById('btn-bluetooth-device-warning').style.display='block');if(!C.classList.contains('disabled'))C.classList.add('disabled');else return;S.innerHTML='Connecting ...',async function(){let e=await navigator.bluetooth.requestDevice({filters:[{services:[6157]},{services:[6168]},{services:[6166]}]}),t=await e.gatt.connect(),n;if(!_.find((t)=>t[0]===e.id)){let i;try{i=await t.getPrimaryService(6168)}catch(e){}if(i){let r=await i.getCharacteristic(10851),s=new l.f,d=await Object(o.c)(r),c=s.getData(d);'cumulative_crank_revolutions'in c?(n=new l.d(e,t,i,r),_.push([n.id,n]),f.push([n.id,n])):(n=new l.e(e,t,i,r),_.push([n.id,n]))}}if(!f.find((t)=>t[0]===e.id)){let i;try{i=await t.getPrimaryService(6166)}catch(e){}if(i){let r=await i.getCharacteristic(10843);n=new l.b(e,t,i,r),f.push([n.id,n])}}if(!y.find((t)=>t[0]===e.id)){let i;try{i=await t.getPrimaryService(6157)}catch(e){}if(i){let r=await i.getCharacteristic(10807);n=new l.c(e,t,i,r),y.push([n.id,n])}}n&&P(n),C.classList.remove('disabled'),S.innerHTML='Connect'}().catch((e)=>{C.classList.remove('disabled'),S.innerHTML='Connect',console.log('Error: ',e)})},T.onclick=(t)=>{if(t.preventDefault(),!T.classList.contains('disabled'))T.classList.add('disabled');else return;k.innerHTML='Scanning ...';let e=document.getElementById('btn-ant-device-error');R.style.display='none',e.style.display='none',async function(){let t=R.value;localStorage.setItem('ant-ws-url',t),t||('https:'===n?t='https://localhost:4430/':t='http://localhost:8000/');const i=new l.a(t);i.addListener('bike_power',(e)=>{_.push([e.id,e]),P(e)}),i.addListener('speed_cadence',(e)=>{f.push([e.id,e]),P(e)}),i.addListener('hr',(e)=>{y.push([e.id,e]),P(e)}),i.addListener('namechange',(e)=>{P(e)}),i.addListener('error',()=>{R.style.display='inline';let t='';'https:'===n&&(t='<br/>You may need to allow a self signed cert for '+i.url+' by clicking <a href="'+i.url+'" target="_blank">here</a>'),e.innerHTML='<br/> Could not connect to the ANT-WS server located at: '+i.url+t,e.style.display='inline',T.classList.remove('disabled'),k.innerHTML='Scan'}),i.scan()}().catch((e)=>{T.classList.remove('disabled'),k.innerHTML='Scan',console.log('Error: ',e)})},E.onclick=(t)=>{if(t.preventDefault(),(b.value||h.value)&&x.value){if(!E.classList.contains('disabled'))E.classList.add('disabled');else return;(async function(){let e=x.value,t=v.value,n=I.value,s=_.find((e)=>e[0]===n)[1];s.listen();let l=N.value,c;l&&(c=y.find((e)=>e[0]===l)[1],c.listen());let p=L.value,u;if(p&&(u=f.find((e)=>e[0]===p)[1],u.listen()),localStorage.setItem('form-weight',e),localStorage.setItem('form-unit',t),h.value){let e=d.a.get(h.value);U=i.a.fromJSON(e),U.powerMeter=s,U.heartMeter=c,U.cadenceMeter=u,d.a.unshift('route-progress',U.cacheName())}else{let n=await Object(o.b)(b.files[0]),l=new r.a(n),p=await l.create();U=new i.a({points:p,riderWeight:e,unit:t,powerMeter:s,heartMeter:c,cadenceMeter:u}),d.a.add('route-progress',U.cacheName(),U)}i.a.transitionUI(),await U.init(),U.updateUI(),await U.updatePosition(),d.a.remove('route-progress',U.cacheName()),U.showFinalizeUI('Ride Finished')})().catch((e)=>{console.log('Error: ',e)})}else{let e='';b.value||h.value?!x.value&&(e='Please enter the riders weight.'):e='Please select a GPX file.';let t=document.getElementById('messages');t.innerHTML=e,t.style.display='block',window.scrollTo(0,0)}},localStorage.getItem('form-weight')&&(x.value=localStorage.getItem('form-weight')),localStorage.getItem('form-unit')&&(v.value=localStorage.getItem('form-unit'),v.onchange()),localStorage.getItem('ant-ws-url')&&(R.value=localStorage.getItem('ant-ws-url')),c||(D.style.display='none',O.style.display='block')};var i=n(74),r=n(63),o=n(16),s=n(62),l=n(160),d=n(25),c=n(179),p=n.n(c),u=n(180),g=n.n(u)},function(e,t,n){'use strict';var i=Math.floor,r=n(30),o=n(16),s=n(75),l=n(76),d=n(77),c=n.n(d),u=n(78),p=n(62),g=n(63),h=n(25),m=n(159),_=n.n(m);class y{constructor({id:e,powerMeter:t,heartMeter:n,cadenceMeter:i,riderWeight:r,unit:o,routeName:d='',history:c=[],points:s,ridingState:l}){this.id=e,this.powerMeter=t,this.heartMeter=n,this.cadenceMeter=i,this.riderWeight=r,this.unit=o,this.routeName=d,this.history=c,this.points=s,this.ridingState=l,this.routeCompleted=!1,this.powerSamples=[],(this.id===void 0||null===this.id)&&(this.id=new Date().getTime()),'string'==typeof this.riderWeight&&(this.riderWeight=parseInt(this.riderWeight)),(this.ridingState===void 0||null===this.ridingState)&&(this.ridingState={pointIdx:0,point:this.points[0],pointPct:0,lastSampleTime:new Date,location:this.points[0].location,elevation:this.points[0].elevation,average_grade:0,mapMode:'SV',watts:0,rpm:void 0,bpm:void 0,speed:0,distance:0,climb:0,elapsed:0})}async init(){this.miniMap=new google.maps.Map(document.getElementById('tracker'),{center:this.ridingState.point.location,zoom:14,fullscreenControl:!1,zoomControl:!0,mapTypeId:google.maps.MapTypeId.TERRAIN});let e=this.points.map((e)=>{return{lat:e.location.lat(),lng:e.location.lng()}}),t=new google.maps.Polyline({path:e,geodesic:!0,strokeColor:'#0c7ac9',strokeOpacity:1,strokeWeight:2});t.setMap(this.miniMap),this.fullMap=new google.maps.Map(document.getElementById('map-view'),{center:this.ridingState.point.location,zoom:18,fullscreenControl:!1,zoomControl:!0,mapTypeId:google.maps.MapTypeId.TERRAIN});let n=new google.maps.Polyline({path:e,geodesic:!0,strokeColor:'#0c7ac9',strokeOpacity:1,strokeWeight:2});n.setMap(this.fullMap),this.fullMarker=new google.maps.Marker({position:this.ridingState.point.location,map:this.fullMap,icon:'./images/here.png'}),this.fullMarker.setMap(this.fullMap);let i=this.streetViewPanoramaInit(this.ridingState.point.location,this.ridingState.point.heading);this.miniMap.setStreetView(i),this.zoomSvg=u.a.select('#ui-elevation').append('svg').attr('id','ui-elevation-svg').attr('x',0).attr('y',0).attr('viewBox','0 0 150 60').attr('preserveAspectRatio','none'),this.drawHeightMap(),this.powerMeter.addListener('power',(e)=>this.collectPower(e)),this.heartMeter&&this.heartMeter.addListener('hr',(e)=>this.collectHR(e)),this.cadenceMeter&&this.cadenceMeter.addListener('cadence',(e)=>this.collectCadence(e));let o=await Object(r.a)(this.points[0].location),s=['street_address','route','intersection','postal_code'];for(let e of o){let t='';if(0<e.types.length&&(t=e.types[0]),s.includes(t))continue;else{this.routeName=e.formatted_address;break}}}collectPower(e){this.powerSamples.push(e)}collectHR(e){this.ridingState.bpm=e}collectCadence(e){this.ridingState.rpm=e}streetViewPanoramaInit(e,t){let n=document.getElementById('street-view');n.innerHTML='';let i=new google.maps.StreetViewPanorama(n,{visible:!0,fullscreenControl:!1,clickToGo:!1,addressControl:!1,panControl:!1,zoomControl:!1,linksControl:!1,pov:{heading:t,pitch:0},position:e});return i.addListener('status_changed',()=>{i.setPov({heading:this.ridingState.point.heading,pitch:0})}),i}drawHeightMap(){this.fullSvg=u.a.select('#ui-heightmap').append('svg').attr('id','ui-heightmap-svg').attr('x',0).attr('y',0).attr('viewBox','0 0 150 37.5').attr('preserveAspectRatio','none'),this.fullSvgData=[];for(let e=0;e<this.points.length;e++)this.fullSvgData.push([e,this.points[e].elevation]);let[e,t]=u.a.extent(this.fullSvgData,(e)=>e[1]);125>t-e&&(t=e+125);const n=u.a.scaleLinear().domain([t,e]).range([6,33]),i=u.a.scaleLinear().domain([0,this.points.length-1]).range([0,150]);this.fullSvgData=this.fullSvgData.map((e)=>{return[i(e[0]),n(e[1])]}),this.fullSvgData.push([150,37.5]),this.fullSvgData.push([0,37.5]),this.fullSvgData.push([0,this.fullSvgData[0][1]]);let r=this.fullSvg.selectAll('polygon').data([this.fullSvgData]).attr('points',(e)=>{return e.map((e)=>{return[e[0],e[1]].join(',')}).join(' ')});r.enter().append('polygon').attr('points',(e)=>{return e.map((e)=>{return[e[0],e[1]].join(',')}).join(' ')}).attr('fill','#31A3CC').attr('stroke','#31A3CC').attr('stroke-width','1')}updateGraphs(){let e=Array(101);for(let t=0,n;t<e.length;t++)n=t-50+this.ridingState.pointIdx,0>n&&(n=0),n>=this.points.length&&(n=this.points.length-1),e[t]=[t,this.points[n].elevation];let[t,n]=u.a.extent(e,(e)=>e[1]);50>n-t&&(n=t+50);const i=u.a.scaleLinear().domain([n,t]).range([15,60-0.32*60]),r=u.a.scaleLinear().domain([0,100]).range([0,150]);e=e.map((e)=>{return[r(e[0]),i(e[1])]}),e.push([150,60]),e.push([0,60]),e.push([0,e[0][1]]);let o=this.zoomSvg.selectAll('polygon').data([e]).attr('points',(e)=>{return e.map((e)=>{return[e[0],e[1]].join(',')}).join(' ')});o.enter().append('polygon').attr('points',(e)=>{return e.map((e)=>{return[e[0],e[1]].join(',')}).join(' ')}).attr('fill','#31A3CC').attr('stroke','#31A3CC').attr('stroke-width','1');let s=this.zoomSvg.selectAll('image').data([e[51]]).attr('x',(e)=>{return e[0]-7.5}).attr('y',(e)=>{return e[1]-15}).attr('width','15').attr('height','15').attr('xlink:href','./images/marker.svg');s.enter().append('image').attr('x',(e)=>{e[0]}).attr('y',(e)=>{e[1]});let l=this.fullSvg.selectAll('image').data([this.fullSvgData[this.ridingState.pointIdx]]).attr('x',(e)=>{return e[0]-3}).attr('y',(e)=>{return e[1]-6}).attr('width','6').attr('height','6').attr('xlink:href','./images/marker.svg');l.enter().append('image').attr('x',(e)=>{e[0]}).attr('y',(e)=>{e[1]})}async updatePosition(){for(let e=0;!this.routeCompleted;){this.powerSamples.length&&(this.ridingState.watts=this.powerSamples.reduce((e,t)=>e+t,0)/this.powerSamples.length,this.powerSamples.length=0);let t=new Date,n=(t-this.ridingState.lastSampleTime)/1e3;this.ridingState.lastSampleTime=t;let i=1,s=0,l=0;for(;0<i;){let e=this.speedFromPower(this.ridingState.watts,this.ridingState.point.smoothedGrade,this.ridingState.point.elevation),t=this.ridingState.speed+0.2*(e-this.ridingState.speed);0.447>t&&(t=0);let r=t*n*i,o=this.ridingState.point.distance-this.ridingState.point.distance*this.ridingState.pointPct;if(r>o){let e=o/r;if(l+=this.ridingState.point.smoothedGrade*e,i-=i*e,this.ridingState.pointIdx+=1,this.ridingState.pointPct=0,this.ridingState.climb+=this.ridingState.point.climb,this.ridingState.point=this.points[this.ridingState.pointIdx],s+=o,this.ridingState.pointIdx>=this.points.length)break}else{let e=i;l+=this.ridingState.point.smoothedGrade*e,i=0,0==o?this.ridingState.pointPct=0:(this.ridingState.pointPct=1-(o-r)/this.ridingState.point.distance,s+=r)}}if(this.ridingState.pointIdx>=this.points.length)break;if(this.ridingState.average_grade=l,this.ridingState.distance+=s,this.ridingState.elevation=this.ridingState.point.elevation+this.ridingState.point.opposite*this.ridingState.pointPct,this.ridingState.speed=s/n,0<this.ridingState.speed&&(this.ridingState.elapsed+=n),this.ridingState.location=google.maps.geometry.spherical.interpolate(this.ridingState.point.location,this.points[this.ridingState.pointIdx+1].location,this.ridingState.pointPct),this.history.push({time:t,location:this.ridingState.location,power:this.ridingState.watts,elevation:this.ridingState.elevation,hr:this.ridingState.bpm,cad:this.ridingState.rpm}),0==e%5){let e=this.miniMap.getStreetView();try{let t=await Object(r.c)(this.ridingState.location,50);'profileUrl'in t.location||('MV'===this.ridingState.mapMode&&(document.getElementById('map-view').style.display='none',document.getElementById('tracker').style.display='block',document.getElementById('street-view').style.display='block',e.setVisible(!0),google.maps.event.trigger(e,'resize'),google.maps.event.trigger(this.miniMap,'resize')),this.miniMap.panTo(this.ridingState.location),'MV'===this.ridingState.mapMode?e.setPano(t.location.pano):e.setPosition(this.ridingState.location),this.ridingState.mapMode='SV')}catch(t){'SV'===this.ridingState.mapMode&&(e.setVisible(!1),document.getElementById('street-view').style.display='none',document.getElementById('tracker').style.display='none',document.getElementById('map-view').style.display='block',google.maps.event.trigger(this.fullMap,'resize')),this.ridingState.mapMode='MV',this.fullMap.panTo(this.ridingState.location),this.fullMarker.setPosition(this.ridingState.location)}}0==e%30&&Promise.resolve().then(()=>{h.a.set(this.cacheName(),this)}),this.updateGraphs(),e+=1,await Object(o.d)(1e3)}this.routeCompleted=!0}speedFromPower(e,t,n){let i=1e3*Math.exp(-n/7e3),r={units:'metric',rp_wr:this.riderWeight*('imperial'===this.unit?0.453592:1),rp_wb:8,rp_a:0.65,rp_cd:0.63,rp_dtl:4,ep_crr:5e-3,ep_g:t,ep_rho:Object(s.a)(23.8889,i,7.5)},o=Object(l.a)(e,r);return o*=0.277778,o}async updateUI(){for(;!0&&!this.routeCompleted;){let e=this.ridingState.elapsed.toFixed(),t=i(e/3600),n=i((e-3600*t)/60),r=e-3600*t-60*n;10>n&&(n='0'+n),10>r&&(r='0'+r);let s=0===t?n+':'+r:t+':'+n+':'+r;let l=this.ridingState.distance*('imperial'===this.unit?6.21371e-4:1e-3);l=100<l?l.toFixed():l.toFixed(1);let d=this.ridingState.average_grade.toFixed(1);('-0'===d||'-0.0'===d)&&(d='0.0');let c=document.getElementById('grade-unit-icon');0<=d?c.classList.contains('fa-long-arrow-down')&&(c.classList.remove('fa-long-arrow-down'),c.classList.add('fa-long-arrow-up')):c.classList.contains('fa-long-arrow-up')&&(c.classList.remove('fa-long-arrow-up'),c.classList.add('fa-long-arrow-down'));let p=this.ridingState.watts;p=void 0!==p&&null!==p?p.toFixed():'--';let u=this.ridingState.bpm;u=void 0!==u&&null!==u?u.toFixed():'--';let g=this.ridingState.rpm;g=void 0!==g&&null!==g?g.toFixed():'--',document.getElementById('watts').innerHTML=p,document.getElementById('heart').innerHTML=u,document.getElementById('cadence').innerHTML=g,document.getElementById('speed').innerHTML=(this.ridingState.speed*('imperial'===this.unit?2.23694:3.6)).toFixed(),document.getElementById('distance').innerHTML=l,document.getElementById('climb').innerHTML=(this.ridingState.climb*('imperial'===this.unit?3.28084:1)).toFixed(),document.getElementById('time').innerHTML=s,document.getElementById('grade').innerHTML=d,document.getElementById('distance-unit-value').innerHTML='imperial'===this.unit?'mi':'&nbsp;km',document.getElementById('speed-unit-value').innerHTML='imperial'===this.unit?'mph':'kph',document.getElementById('climb-container-value').innerHTML='imperial'===this.unit?'ft':'m',await Object(o.d)(1e3)}}async stravaExport(){let e=document.getElementById('btn-export-strava');if(!e.classList.contains('disabled'))e.classList.add('disabled');else return;e.innerHTML='Exporting',this.routeCompleted=!0;let t=document.getElementById('input-ride-name'),n=t.value,i=document.getElementById('strava-gpx-template').innerHTML,r=this.history.map((e)=>{return{lat:e.location.lat(),lng:e.location.lng(),elevation:e.elevation.toFixed(5),time:Object(o.a)(e.time),power:e.power,hr:e.hr,cad:e.cad}}),s=c.a.render(i,{export_time:Object(o.a)(new Date),export_name:n,points:r}),l=new FormData;l.set('client_id',p.a.STRAVA_CLIENT_ID),l.set('client_secret',p.a.STRAVA_CLIENT_SECRET),l.set('code',localStorage.getItem('strava-oauth-code-'+p.a.STRAVA_CLIENT_ID));let d=await fetch('https://www.strava.com/oauth/token',{method:'POST',body:l}),u=await d.json(),g=u.access_token,m=new File([s],'import_to_strava.gpx',{type:'text/xml'}),_=new FormData;_.set('activity_type','virtualride'),_.set('name',n),_.set('data_type','gpx'),_.set('file',m);let y=new Headers;y.set('Authorization','Bearer '+g);let f=await fetch('https://www.strava.com/api/v3/uploads',{method:'POST',headers:y,body:_}),b=await f.json(),v=b.id;for(;;){let e=await fetch('https://www.strava.com/api/v3/uploads/'+v,{headers:y}),t=await e.json();if(t.activity_id)break;await Object(o.d)(4e3)}h.a.remove('route-progress',this.cacheName()),e.innerHTML='Done!'}showFinalizeUI(e){if(document.getElementById('ui-finalize-container').style.display='block',document.getElementById('ui-finalize-label').innerHTML=e,localStorage.getItem('strava-oauth-code-'+p.a.STRAVA_CLIENT_ID)){let e=new Date,t='GPedal - ';t+=this.routeName?this.routeName:e.getMonth()+1+'/'+e.getDate();let n=document.getElementById('input-ride-name');n.value=t,n.style.display='block';let i=document.getElementById('btn-export-strava');i.style.display='block',i.onclick=(t)=>{t.preventDefault(),this.stravaExport().catch((e)=>{console.log('Error: ',e)})}}}cacheName(){return'route-progress-'+this.id}toJSON(){let{history:e,id:t,points:n,riderWeight:i,ridingState:r,routeName:o,unit:s}=this;return e=e.map((e)=>{return e=Object.assign({},e),e.location=e.location.toJSON(),e.time=e.time.toJSON(),e}),n=n.map((e)=>{return e.toJSON()}),r=Object.assign({},r),r.lastSampleTime=r.lastSampleTime.toJSON(),r.location=r.location.toJSON(),r.point=r.point.toJSON(),r.bpm=void 0,r.rpm=void 0,r.speed=0,r.watts=0,{history:e,id:t,points:n,riderWeight:i,ridingState:r,routeName:o,unit:s}}static fromJSON(e){for(let t of e.history)t.location=new google.maps.LatLng(t.location.lat,t.location.lng),t.time=new Date(t.time);return e.points=e.points.map((e)=>{return g.b.fromJSON(e)}),e.ridingState.lastSampleTime=new Date(e.ridingState.lastSampleTime),e.ridingState.location=new google.maps.LatLng(e.ridingState.location.lat,e.ridingState.location.lng),e.ridingState.point=g.b.fromJSON(e.ridingState.point),new y(e)}static transitionUI(){document.getElementById('configure-container').style.display='none',document.getElementById('app-container').style.display='block'}}t.a=y},function(e,t){'use strict';t.a=function(e,t,n){var i=6.1078/Math.pow(0.99999683+n*(-0.0090826951+n*(7.8736169e-5+n*(-6.1117958e-7+n*(4.3884187e-9+n*(-2.9883885e-11+n*(2.1874425e-13+n*(-1.7892321e-15+n*(1.1112018e-17+n*-3.0994571e-20)))))))),8),r=100*i;return(100*t-r)/(287.0531*(e+273.15))+r/(461.4964*(e+273.15))}},function(e,t){'use strict';function n(e,t){var n=9.8067*(t.rp_wr+t.rp_wb)*Math.sin(r(t.ep_g/100)),i=9.8067*(t.rp_wr+t.rp_wb)*Math.cos(r(t.ep_g/100))*t.ep_crr,o=0.5*t.rp_a*t.rp_cd*t.ep_rho*(1e3*e/3600)*(1e3*e/3600),s={};return s.Fgravity=n,s.Frolling=i,s.Fdrag=o,s}function i(e,t){var i=n(e,t),r=i.Fgravity+i.Frolling+i.Fdrag,o=r*(1e3*e/3600)/(1-t.rp_dtl/100);return o}var r=Math.atan;t.a=function(e,t){var n=-1e3,r=1e3,o=0,s=i(o,t),l=0;do{if(Math.abs(s-e)<1e-6)break;s>e?r=o:n=o,o=(r+n)/2,s=i(o,t)}while(100>l++);return o}},function(e,t){var n,i,r;(function(o,s){'object'==typeof t&&t&&'string'!=typeof t.nodeName?s(t):(i=[t],n=s,r='function'==typeof n?n.apply(t,i):n,!(r!==void 0&&(e.exports=r)))})(this,function(e){function t(e){return'function'==typeof e}function n(e){return m(e)?'array':typeof e}function i(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,'\\$&')}function r(e,t){return null!=e&&'object'==typeof e&&t in e}function o(e,t){return _.call(e,t)}function s(e){return!o(y,e)}function l(t,n){function r(){if(h&&!_)for(;g.length;)delete u[g.pop()];else g=[];h=!1,_=!1}function o(e){if('string'==typeof e&&(e=e.split(v,2)),!m(e)||2!==e.length)throw new Error('Invalid tags: '+e);y=new RegExp(i(e[0])+'\\s*'),f=new RegExp('\\s*'+i(e[1])),k=new RegExp('\\s*'+i('}'+e[1]))}if(!t)return[];var l=[],u=[],g=[],h=!1,_=!1,y,f,k;o(n||e.tags);for(var w=new p(t),C,T,I,N,L,M;!w.eos();){if(C=w.pos,I=w.scanUntil(y),I)for(var A=0,D=I.length;A<D;++A)N=I.charAt(A),s(N)?g.push(u.length):_=!0,u.push(['text',N,C,C+1]),C+=1,'\n'===N&&r();if(!w.scan(y))break;if(h=!0,T=w.scan(S)||'name',w.scan(b),'='===T?(I=w.scanUntil(x),w.scan(x),w.scanUntil(f)):'{'===T?(I=w.scanUntil(k),w.scan(E),w.scanUntil(f),T='&'):I=w.scanUntil(f),!w.scan(f))throw new Error('Unclosed tag at '+w.pos);if(L=[T,I,C,w.pos],u.push(L),'#'===T||'^'===T)l.push(L);else if('/'===T){if(M=l.pop(),!M)throw new Error('Unopened section "'+I+'" at '+C);if(M[1]!==I)throw new Error('Unclosed section "'+M[1]+'" at '+C)}else'name'===T||'{'===T||'&'===T?_=!0:'='===T&&o(I)}if(M=l.pop(),M)throw new Error('Unclosed section "'+M[1]+'" at '+w.pos);return c(d(u))}function d(e){for(var t=[],n=0,i=e.length,r,o;n<i;++n)r=e[n],r&&('text'===r[0]&&o&&'text'===o[0]?(o[1]+=r[1],o[3]=r[3]):(t.push(r),o=r));return t}function c(e){for(var t=[],n=t,r=[],o=0,i=e.length,s,l;o<i;++o)switch(s=e[o],s[0]){case'#':case'^':n.push(s),r.push(s),n=s[4]=[];break;case'/':l=r.pop(),l[5]=s[2],n=0<r.length?r[r.length-1][4]:t;break;default:n.push(s);}return t}function p(e){this.string=e,this.tail=e,this.pos=0}function u(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function g(){this.cache={}}var h=Object.prototype.toString,m=Array.isArray||function(e){return'[object Array]'===h.call(e)},_=RegExp.prototype.test,y=/\S/,f={"&":'&amp;',"<":'&lt;',">":'&gt;','"':'&quot;',"'":'&#39;',"/":'&#x2F;',"`":'&#x60;',"=":'&#x3D;'},b=/\s*/,v=/\s+/,x=/\s*=/,E=/\s*\}/,S=/#|\^|\/|>|\{|&|=|!/;p.prototype.eos=function(){return''===this.tail},p.prototype.scan=function(e){var t=this.tail.match(e);if(!t||0!==t.index)return'';var n=t[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n},p.prototype.scanUntil=function(e){var t=this.tail.search(e),n;return-1===t?(n=this.tail,this.tail=''):0===t?n='':(n=this.tail.substring(0,t),this.tail=this.tail.substring(t)),this.pos+=n.length,n},u.prototype.push=function(e){return new u(e,this)},u.prototype.lookup=function(e){var n=this.cache,i;if(n.hasOwnProperty(e))i=n[e];else{for(var o=this,s=!1,l,d;o;){if(0<e.indexOf('.'))for(i=o.view,l=e.split('.'),d=0;null!=i&&d<l.length;)d===l.length-1&&(s=r(i,l[d])),i=i[l[d++]];else i=o.view[e],s=r(o.view,e);if(s)break;o=o.parent}n[e]=i}return t(i)&&(i=i.call(this.view)),i},g.prototype.clearCache=function(){this.cache={}},g.prototype.parse=function(e,t){var n=this.cache,i=n[e];return null==i&&(i=n[e]=l(e,t)),i},g.prototype.render=function(e,t,n){var i=this.parse(e),r=t instanceof u?t:new u(t);return this.renderTokens(i,r,n,e)},g.prototype.renderTokens=function(e,t,n,r){for(var o='',s=0,i=e.length,l,d,c;s<i;++s)c=void 0,l=e[s],d=l[0],'#'===d?c=this.renderSection(l,t,n,r):'^'===d?c=this.renderInverted(l,t,n,r):'>'===d?c=this.renderPartial(l,t,n,r):'&'===d?c=this.unescapedValue(l,t):'name'===d?c=this.escapedValue(l,t):'text'===d&&(c=this.rawValue(l)),void 0!==c&&(o+=c);return o},g.prototype.renderSection=function(e,n,i,r){function o(e){return s.render(e,n,i)}var s=this,l='',d=n.lookup(e[1]);if(d){if(m(d))for(var c=0,p=d.length;c<p;++c)l+=this.renderTokens(e[4],n.push(d[c]),i,r);else if('object'==typeof d||'string'==typeof d||'number'==typeof d)l+=this.renderTokens(e[4],n.push(d),i,r);else if(t(d)){if('string'!=typeof r)throw new Error('Cannot use higher-order sections without the original template');d=d.call(n.view,r.slice(e[3],e[5]),o),null!=d&&(l+=d)}else l+=this.renderTokens(e[4],n,i,r);return l}},g.prototype.renderInverted=function(e,t,n,i){var r=t.lookup(e[1]);if(!r||m(r)&&0===r.length)return this.renderTokens(e[4],t,n,i)},g.prototype.renderPartial=function(e,n,i){if(i){var r=t(i)?i(e[1]):i[e[1]];if(null!=r)return this.renderTokens(this.parse(r),n,i,r)}},g.prototype.unescapedValue=function(e,t){var n=t.lookup(e[1]);if(null!=n)return n},g.prototype.escapedValue=function(t,n){var i=n.lookup(t[1]);if(null!=i)return e.escape(i)},g.prototype.rawValue=function(e){return e[1]},e.name='mustache.js',e.version='2.3.2',e.tags=['{{','}}'];var k=new g;return e.clearCache=function(){return k.clearCache()},e.parse=function(e,t){return k.parse(e,t)},e.render=function(e,t,i){if('string'!=typeof e)throw new TypeError('Invalid template! Template should be a "string" but "'+n(e)+'" was given as the first argument for mustache#render(template, view, partials)');return k.render(e,t,i)},e.to_html=function(n,i,r,o){var s=e.render(n,i,r);return t(o)?void o(s):s},e.escape=function(e){return(e+'').replace(/[&<>"'`=\/]/g,function(e){return f[e]})},e.Scanner=p,e.Context=u,e.Writer=g,e})},function(e,t,n){'use strict';var i=n(79),r=n(112),o=n(18);const s={select:i.a,scaleLinear:r.a,extent:o.a};t.a=s},function(e,t,n){'use strict';var i=n(3);t.a=function(e){return'string'==typeof e?new i.a([[document.querySelector(e)]],[document.documentElement]):new i.a([[e]],i.b)}},function(e,t,n){'use strict';var r=n(3),o=n(31);t.a=function(e){'function'!=typeof e&&(e=Object(o.a)(e));for(var t=this._groups,s=t.length,l=Array(s),d=0;d<s;++d)for(var c=t[d],p=c.length,n=l[d]=Array(p),u=0,i,g;u<p;++u)(i=c[u])&&(g=e.call(i,i.__data__,u,c))&&('__data__'in i&&(g.__data__=i.__data__),n[u]=g);return new r.a(l,this._parents)}},function(e,t,n){'use strict';var r=n(3),o=n(82);t.a=function(e){'function'!=typeof e&&(e=Object(o.a)(e));for(var t=this._groups,s=t.length,l=[],d=[],c=0;c<s;++c)for(var p=t[c],u=p.length,n=0,i;n<u;++n)(i=p[n])&&(l.push(e.call(i,i.__data__,n,p)),d.push(i));return new r.a(l,d)}},function(e,t){'use strict';function n(){return[]}t.a=function(e){return null==e?n:function(){return this.querySelectorAll(e)}}},function(e,t,n){'use strict';var r=n(3),o=n(84);t.a=function(e){'function'!=typeof e&&(e=Object(o.a)(e));for(var t=this._groups,s=t.length,l=Array(s),d=0;d<s;++d)for(var c=t[d],p=c.length,n=l[d]=[],u=0,i;u<p;++u)(i=c[u])&&e.call(i,i.__data__,u,c)&&n.push(i);return new r.a(l,this._parents)}},function(e,t){'use strict';var n=function(e){return function(){return this.matches(e)}};if('undefined'!=typeof document){var i=document.documentElement;if(!i.matches){var r=i.webkitMatchesSelector||i.msMatchesSelector||i.mozMatchesSelector||i.oMatchesSelector;n=function(e){return function(){return r.call(this,e)}}}}t.a=n},function(e,t,n){'use strict';function i(e,t,n,r,o,l){for(var d=0,i=t.length,c=l.length,p;d<c;++d)(p=t[d])?(p.__data__=l[d],r[d]=p):n[d]=new s.a(e,l[d]);for(;d<i;++d)(p=t[d])&&(o[d]=p)}function r(e,t,n,r,o,l,c){var p={},u=t.length,g=l.length,h=Array(u),m,i,_;for(m=0;m<u;++m)(i=t[m])&&(h[m]=_=d+c.call(i,i.__data__,m,t),_ in p?o[m]=i:p[_]=i);for(m=0;m<g;++m)_=d+c.call(e,l[m],m,l),(i=p[_])?(r[m]=i,i.__data__=l[m],p[_]=null):n[m]=new s.a(e,l[m]);for(m=0;m<u;++m)(i=t[m])&&p[h[m]]===i&&(o[m]=i)}var o=n(3),s=n(32),l=n(86),d='$';t.a=function(e,t){if(!e)return f=Array(this.size()),h=-1,this.each(function(e){f[++h]=e}),f;var n=t?r:i,s=this._parents,d=this._groups;'function'!=typeof e&&(e=Object(l.a)(e));for(var c=d.length,p=Array(c),u=Array(c),g=Array(c),h=0;h<c;++h){var m=s[h],_=d[h],y=_.length,f=e.call(m,m&&m.__data__,h,s),b=f.length,v=u[h]=Array(b),x=p[h]=Array(b),E=g[h]=Array(y);n(m,_,v,x,E,f,t);for(var S=0,k=0,w,C;S<b;++S)if(w=v[S]){for(S>=k&&(k=S+1);!(C=x[k])&&++k<b;);w._next=C||null}}return p=new o.a(p,s),p._enter=u,p._exit=g,p}},function(e,t){'use strict';t.a=function(e){return function(){return e}}},function(e,t,n){'use strict';var i=n(33),r=n(3);t.a=function(){return new r.a(this._exit||this._groups.map(i.a),this._parents)}},function(e,t,n){'use strict';var r=n(3);t.a=function(e){for(var t=this._groups,o=e._groups,s=t.length,l=o.length,d=Math.min(s,l),c=Array(s),p=0;p<d;++p)for(var u=t[p],g=o[p],h=u.length,n=c[p]=Array(h),m=0,i;m<h;++m)(i=u[m]||g[m])&&(n[m]=i);for(;p<s;++p)c[p]=t[p];return new r.a(c,this._parents)}},function(e,t){'use strict';t.a=function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],o=r.length-1,i=r[o],s;0<=--o;)(s=r[o])&&(i&&i!==s.nextSibling&&i.parentNode.insertBefore(s,i),i=s);return this}},function(e,t,n){'use strict';function r(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}var o=n(3);t.a=function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=r);for(var s=this._groups,l=s.length,d=Array(l),c=0;c<l;++c){for(var p=s[c],u=p.length,n=d[c]=Array(u),g=0,i;g<u;++g)(i=p[g])&&(n[g]=i);n.sort(t)}return new o.a(d,this._parents).order()}},function(e,t){'use strict';t.a=function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}},function(e,t){'use strict';t.a=function(){var e=Array(this.size()),t=-1;return this.each(function(){e[++t]=this}),e}},function(e,t){'use strict';t.a=function(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var o=e[t],s=0,i=o.length,n;s<i;++s)if(n=o[s],n)return n;return null}},function(e,t){'use strict';t.a=function(){var e=0;return this.each(function(){++e}),e}},function(e,t){'use strict';t.a=function(){return!this.node()}},function(e,t){'use strict';t.a=function(e){for(var t=this._groups,r=0,o=t.length;r<o;++r)for(var s=t[r],l=0,i=s.length,n;l<i;++l)(n=s[l])&&e.call(n,n.__data__,l,s);return this}},function(e,t,n){'use strict';function i(e){return function(){this.removeAttribute(e)}}function r(e){return function(){this.removeAttributeNS(e.space,e.local)}}function o(e,t){return function(){this.setAttribute(e,t)}}function s(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function l(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function d(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}var c=n(34);t.a=function(e,t){var n=Object(c.a)(e);if(2>arguments.length){var p=this.node();return n.local?p.getAttributeNS(n.space,n.local):p.getAttribute(n)}return this.each((null==t?n.local?r:i:'function'==typeof t?n.local?d:l:n.local?s:o)(n,t))}},function(e,t,n){'use strict';function i(e){return function(){this.style.removeProperty(e)}}function r(e,t,n){return function(){this.style.setProperty(e,t,n)}}function o(e,t,n){return function(){var i=t.apply(this,arguments);null==i?this.style.removeProperty(e):this.style.setProperty(e,i,n)}}function s(e,t){return e.style.getPropertyValue(t)||Object(l.a)(e).getComputedStyle(e,null).getPropertyValue(t)}var l=n(36);t.a=function(e,t,n){return 1<arguments.length?this.each((null==t?i:'function'==typeof t?o:r)(e,t,null==n?'':n)):s(this.node(),e)}},function(e,t){'use strict';function n(e){return function(){delete this[e]}}function i(e,t){return function(){this[e]=t}}function r(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}t.a=function(e,t){return 1<arguments.length?this.each((null==t?n:'function'==typeof t?r:i)(e,t)):this.node()[e]}},function(e,t){'use strict';function r(e){return e.trim().split(/^|\s+/)}function o(e){return e.classList||new n(e)}function n(e){this._node=e,this._names=r(e.getAttribute('class')||'')}function i(e,t){for(var r=o(e),s=-1,i=t.length;++s<i;)r.add(t[s])}function s(e,t){for(var r=o(e),s=-1,i=t.length;++s<i;)r.remove(t[s])}function l(e){return function(){i(this,e)}}function d(e){return function(){s(this,e)}}function c(e,t){return function(){(t.apply(this,arguments)?i:s)(this,e)}}n.prototype={add:function(e){var t=this._names.indexOf(e);0>t&&(this._names.push(e),this._node.setAttribute('class',this._names.join(' ')))},remove:function(e){var t=this._names.indexOf(e);0<=t&&(this._names.splice(t,1),this._node.setAttribute('class',this._names.join(' ')))},contains:function(e){return 0<=this._names.indexOf(e)}},t.a=function(e,t){var s=r(e+'');if(2>arguments.length){for(var p=o(this.node()),u=-1,i=s.length;++u<i;)if(!p.contains(s[u]))return!1;return!0}return this.each(('function'==typeof t?c:t?l:d)(s,t))}},function(e,t){'use strict';function n(){this.textContent=''}function i(e){return function(){this.textContent=e}}function r(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?'':t}}t.a=function(e){return arguments.length?this.each(null==e?n:('function'==typeof e?r:i)(e)):this.node().textContent}},function(e,t){'use strict';function n(){this.innerHTML=''}function i(e){return function(){this.innerHTML=e}}function r(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?'':t}}t.a=function(e){return arguments.length?this.each(null==e?n:('function'==typeof e?r:i)(e)):this.node().innerHTML}},function(e,t){'use strict';function n(){this.nextSibling&&this.parentNode.appendChild(this)}t.a=function(){return this.each(n)}},function(e,t){'use strict';function n(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}t.a=function(){return this.each(n)}},function(e,t,n){'use strict';var i=n(37);t.a=function(e){var t='function'==typeof e?e:Object(i.a)(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}},function(e,t,n){'use strict';function i(){return null}var r=n(37),o=n(31);t.a=function(e,t){var n='function'==typeof e?e:Object(r.a)(e),s=null==t?i:'function'==typeof t?t:Object(o.a)(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),s.apply(this,arguments)||null)})}},function(e,t){'use strict';function n(){var e=this.parentNode;e&&e.removeChild(this)}t.a=function(){return this.each(n)}},function(e,t){'use strict';function n(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function i(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}t.a=function(e){return this.select(e?i:n)}},function(e,t){'use strict';t.a=function(e){return arguments.length?this.property('__data__',e):this.node().__data__}},function(e,t){'use strict';function n(e,t,n){return e=i(e,t,n),function(t){var n=t.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||e.call(this,t)}}function i(e,t,n){return function(i){var r=d;d=i;try{e.call(this,this.__data__,t,n)}finally{d=r}}}function r(e){return e.trim().split(/^|\s+/).map(function(e){var n='',r=e.indexOf('.');return 0<=r&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function o(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)(s=t[n],(!e.type||s.type===e.type)&&s.name===e.name)?this.removeEventListener(s.type,s.listener,s.capture):t[++r]=s;++r?t.length=r:delete this.__on}}}function s(e,t,r){var s=l.hasOwnProperty(e.type)?n:i;return function(n,l,i){var d=this.__on,c=s(t,l,i),p;if(d)for(var o=0,u=d.length;o<u;++o)if((p=d[o]).type===e.type&&p.name===e.name)return this.removeEventListener(p.type,p.listener,p.capture),this.addEventListener(p.type,p.listener=c,p.capture=r),void(p.value=t);this.addEventListener(e.type,c,r),p={type:e.type,name:e.name,value:t,listener:c,capture:r},d?d.push(p):this.__on=[p]}}var l={},d=null;if('undefined'!=typeof document){var c=document.documentElement;'onmouseenter'in c||(l={mouseenter:'mouseover',mouseleave:'mouseout'})}t.a=function(e,l,d){var c=r(e+''),p=c.length,n,i;if(2>arguments.length){var t=this.node().__on;if(t)for(var u=0,g=t.length,h;u<g;++u)for(n=0,h=t[u];n<p;++n)if((i=c[n]).type===h.type&&i.name===h.name)return h.value;return}for(t=l?s:o,null==d&&(d=!1),n=0;n<p;++n)this.each(t(c[n],l,d));return this}},function(e,t,n){'use strict';function i(e,t,n){var i=Object(s.a)(e),r=i.CustomEvent;'function'==typeof r?r=new r(t,n):(r=i.document.createEvent('Event'),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function r(e,t){return function(){return i(this,e,t)}}function o(e,t){return function(){return i(this,e,t.apply(this,arguments))}}var s=n(36);t.a=function(e,t){return this.each(('function'==typeof t?o:r)(e,t))}},function(e,t,n){'use strict';function i(e){var t=e.domain;return e.ticks=function(e){var n=t();return Object(l.d)(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){return Object(p.a)(t(),e,n)},e.nice=function(n){null==n&&(n=10);var i=t(),r=0,d=i.length-1,c=i[r],p=i[d],u;return p<c&&(u=c,c=p,p=u,u=r,r=d,d=u),u=Object(l.b)(c,p,n),0<u?(c=s(c/u)*u,p=o(p/u)*u,u=Object(l.b)(c,p,n)):0>u&&(c=o(c*u)/u,p=s(p*u)/u,u=Object(l.b)(c,p,n)),0<u?(i[r]=s(c/u)*u,i[d]=o(p/u)*u,t(i)):0>u&&(i[r]=o(c*u)/u,i[d]=s(p*u)/u,t(i)),e},e}function r(){var e=Object(c.b)(c.c,d.b);return e.copy=function(){return Object(c.a)(e,r())},i(e)}var o=Math.ceil,s=Math.floor;t.a=r;var l=n(17),d=n(49),c=n(141),p=n(145)},function(e,t,n){'use strict';var i=n(40)},function(){'use strict'},function(e,t,n){'use strict';var i=n(43),r=n(38),o=n(116),s=n(18),l=n(117),d=n(44),c=n(45),p=n(46)},function(e,t){'use strict';t.a=function(e){return function(){return e}}},function(e,t){'use strict';t.a=function(e){return e}},function(e,t,n){'use strict';var i=n(43),r=n(5),o=n(8),s=n(19)},function(e,t,n){'use strict';var i=n(41)},function(){'use strict'},function(e,t,n){'use strict';var i=n(8)},function(e,t,n){'use strict';var i=n(5),r=n(8),o=n(19)},function(){'use strict'},function(){'use strict'},function(e,t,n){'use strict';var i=n(5)},function(){'use strict'},function(){'use strict'},function(e,t,n){'use strict';var i=n(48)},function(e,t,n){'use strict';function i(e){if(e instanceof s)return new s(e.l,e.a,e.b,e.opacity);if(e instanceof g){var t=e.h*y.a;return new s(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}e instanceof _.b||(e=Object(_.h)(e));var n=c(e.r),i=c(e.g),r=c(e.b),o=d((0.4124564*n+0.3575761*i+0.1804375*r)/v),l=d((0.2126729*n+0.7151522*i+0.072175*r)/E),p=d((0.0193339*n+0.119192*i+0.9503041*r)/S);return new s(116*l-16,500*(o-l),200*(l-p),e.opacity)}function r(e,t,n,r){return 1===arguments.length?i(e):new s(e,t,n,null==r?1:r)}function s(e,t,n,i){this.l=+e,this.a=+t,this.b=+n,this.opacity=+i}function d(e){return e>w?h(e,1/3):e/k+b}function o(e){return e>x?e*e*e:k*(e-b)}function l(e){return 255*(0.0031308>=e?12.92*e:1.055*h(e,1/2.4)-0.055)}function c(e){return 0.04045>=(e/=255)?e/12.92:h((e+0.055)/1.055,2.4)}function p(e){if(e instanceof g)return new g(e.h,e.c,e.l,e.opacity);e instanceof s||(e=i(e));var t=Math.atan2(e.b,e.a)*y.b;return new g(0>t?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function u(e,t,n,i){return 1===arguments.length?p(e):new g(e,t,n,null==i?1:i)}function g(e,t,n,i){this.h=+e,this.c=+t,this.l=+n,this.opacity=+i}var h=Math.pow;t.a=r,t.b=u;var m=n(22),_=n(21),y=n(50),f=18,v=0.95047,E=1,S=1.08883,b=4/29,x=6/29,k=3*x*x,w=x*x*x;Object(m.a)(s,r,Object(m.b)(_.a,{brighter:function(e){return new s(this.l+f*(null==e?1:e),this.a,this.b,this.opacity)},darker:function(e){return new s(this.l-f*(null==e?1:e),this.a,this.b,this.opacity)},rgb:function(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return e=E*o(e),t=v*o(t),n=S*o(n),new _.b(l(3.2404542*t-1.5371385*e-0.4985314*n),l(-0.969266*t+1.8760108*e+0.041556*n),l(0.0556434*t-0.2040259*e+1.0572252*n),this.opacity)}})),Object(m.a)(g,u,Object(m.b)(_.a,{brighter:function(e){return new g(this.h,this.c,this.l+f*(null==e?1:e),this.opacity)},darker:function(e){return new g(this.h,this.c,this.l-f*(null==e?1:e),this.opacity)},rgb:function(){return i(this).rgb()}}))},function(e,t,n){'use strict';function i(e){if(e instanceof d)return new d(e.h,e.s,e.l,e.opacity);e instanceof c.b||(e=Object(c.h)(e));var t=e.r/255,n=e.g/255,i=e.b/255,r=(x*i+f*t-v*n)/(x+f-v),o=i-r,l=(y*(n-r)-m*o)/_,u=Math.sqrt(l*l+o*o)/(y*r*(1-r)),s=u?Math.atan2(l,o)*p.b-120:NaN;return new d(0>s?s+360:s,u,r,e.opacity)}function r(e,t,n,r){return 1===arguments.length?i(e):new d(e,t,n,null==r?1:r)}function d(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}var o=Math.pow;t.a=r;var s=n(22),c=n(21),p=n(50),u=-0.14861,g=+1.78277,m=-0.29227,_=-0.90649,y=+1.97294,f=y*_,v=y*g,x=g*m-_*u;Object(s.a)(d,r,Object(s.b)(c.a,{brighter:function(e){return e=null==e?c.c:o(c.c,e),new d(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?c.d:o(c.d,e),new d(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*p.a,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),i=Math.cos(e),r=Math.sin(e);return new c.b(255*(t+n*(u*i+g*r)),255*(t+n*(m*i+_*r)),255*(t+n*(y*i)),this.opacity)}}))},function(e,t){'use strict';t.a=function(e,n){return e=+e,n-=e,function(i){return Math.round(e+n*i)}}},function(e,t,n){'use strict';function i(e,t,n,i){function o(e){return e.length?e.pop()+' ':''}function l(e,o,l,d,c,s){if(e!==l||o!==d){var p=c.push('translate(',null,t,null,n);s.push({i:p-4,x:Object(r.a)(e,l)},{i:p-2,x:Object(r.a)(o,d)})}else(l||d)&&c.push('translate('+l+t+d+n)}function d(e,t,n,s){e===t?t&&n.push(o(n)+'rotate('+t+i):(180<e-t?t+=360:180<t-e&&(e+=360),s.push({i:n.push(o(n)+'rotate(',null,i)-2,x:Object(r.a)(e,t)}))}function c(e,t,n,s){e===t?t&&n.push(o(n)+'skewX('+t+i):s.push({i:n.push(o(n)+'skewX(',null,i)-2,x:Object(r.a)(e,t)})}function p(e,t,n,l,d,s){if(e!==n||t!==l){var c=d.push(o(d)+'scale(',null,',',null,')');s.push({i:c-4,x:Object(r.a)(e,n)},{i:c-2,x:Object(r.a)(t,l)})}else(1!==n||1!==l)&&d.push(o(d)+'scale('+n+','+l+')')}return function(t,n){var r=[],s=[];return t=e(t),n=e(n),l(t.translateX,t.translateY,n.translateX,n.translateY,r,s),d(t.rotate,n.rotate,r,s),c(t.skewX,n.skewX,r,s),p(t.scaleX,t.scaleY,n.scaleX,n.scaleY,r,s),t=n=null,function(e){for(var t=-1,i=s.length,n;++t<i;)r[(n=s[t]).i]=n.x(e);return r.join('')}}}var r=n(13),o=n(133),s=i(o.a,'px, ','px)','deg)'),l=i(o.b,', ',')',')')},function(e,t,n){'use strict';t.a=function(e){return'none'===e?i.b:(r||(r=document.createElement('DIV'),o=document.documentElement,s=document.defaultView),r.style.transform=e,e=s.getComputedStyle(o.appendChild(r),null).getPropertyValue('transform'),o.removeChild(r),e=e.slice(7,-1).split(','),Object(i.a)(+e[0],+e[1],+e[2],+e[3],+e[4],+e[5]))},t.b=function(e){return null==e?i.b:(l||(l=document.createElementNS('http://www.w3.org/2000/svg','g')),l.setAttribute('transform',e),!(e=l.transform.baseVal.consolidate()))?i.b:(e=e.matrix,Object(i.a)(e.a,e.b,e.c,e.d,e.e,e.f))};var i=n(134),r,o,s,l},function(e,t,n){'use strict';var i=Math.sqrt;n.d(t,'b',function(){return o});var r=180/Math.PI,o={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};t.a=function(t,n,o,s,l,d){var c,p,u;return(c=i(t*t+n*n))&&(t/=c,n/=c),(u=t*o+n*s)&&(o-=t*u,s-=n*u),(p=i(o*o+s*s))&&(o/=p,s/=p,u/=p),t*s<n*o&&(t=-t,n=-n,u=-u,c=-c),{translateX:l,translateY:d,rotate:Math.atan2(n,t)*r,skewX:Math.atan(u)*r,scaleX:c,scaleY:p}}},function(){'use strict';function e(e){return((e=i(e))+1/e)/2}function t(e){return((e=i(e))-1/e)/2}function n(e){return((e=i(2*e))-1)/(e+1)}var i=Math.exp,r=Math.log,o=Math.sqrt,s=Math.SQRT2,l=2,d=4},function(e,t,n){'use strict';function i(e){return function(n,t){var i=e((n=Object(r.d)(n)).h,(t=Object(r.d)(t)).h),d=Object(o.a)(n.s,t.s),s=Object(o.a)(n.l,t.l),l=Object(o.a)(n.opacity,t.opacity);return function(e){return n.h=i(e),n.s=d(e),n.l=s(e),n.opacity=l(e),n+''}}}var r=n(6),o=n(9),s=i(o.c),l=i(o.a)},function(e,t,n){'use strict';var i=n(6),r=n(9)},function(e,t,n){'use strict';function i(e){return function(n,t){var i=e((n=Object(r.c)(n)).h,(t=Object(r.c)(t)).h),s=Object(o.a)(n.c,t.c),d=Object(o.a)(n.l,t.l),l=Object(o.a)(n.opacity,t.opacity);return function(e){return n.h=i(e),n.c=s(e),n.l=d(e),n.opacity=l(e),n+''}}}var r=n(6),o=n(9),s=i(o.c),l=i(o.a)},function(e,t,n){'use strict';function i(e){return function t(n){function i(i,t){var d=e((i=Object(r.b)(i)).h,(t=Object(r.b)(t)).h),c=Object(o.a)(i.s,t.s),s=Object(o.a)(i.l,t.l),l=Object(o.a)(i.opacity,t.opacity);return function(e){return i.h=d(e),i.s=c(e),i.l=s(Math.pow(e,n)),i.opacity=l(e),i+''}}return n=+n,i.gamma=t,i}(1)}var r=n(6),o=n(9),s=i(o.c),l=i(o.a)},function(){'use strict'},function(e,t,n){'use strict';function i(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Object(g.a)(t)}function r(e){return function(t,n){var i=e(t=+t,n=+n);return function(e){return e<=t?0:e>=n?1:i(e)}}}function o(e){return function(n,i){var o=e(n=+n,i=+i);return function(e){return 0>=e?n:1<=e?i:o(e)}}}function s(e,t,n,i){var r=e[0],o=e[1],s=t[0],l=t[1];return o<r?(r=n(o,r),s=i(l,s)):(r=n(r,o),s=i(s,l)),function(e){return s(r(e))}}function l(e,t,n,o){var s=c(e.length,t.length)-1,l=Array(s),d=Array(s),r=-1;for(e[s]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++r<s;)l[r]=n(e[r],e[r+1]),d[r]=o(t[r],t[r+1]);return function(t){var n=Object(p.a)(e,t,1,s)-1;return d[n](l[n](t))}}var c=Math.min;t.c=i,t.a=function(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp())},t.b=function(e,t){function n(){return _=2<c(g.length,f.length)?l:s,v=x=null,p}function p(t){return(v||(v=_(g,f,b?r(e):e,y)))(+t)}var g=m,f=m,y=d.a,b=!1,_,v,x;return p.invert=function(e){return(x||(x=_(f,g,i,b?o(t):t)))(+e)},p.domain=function(e){return arguments.length?(g=u.a.call(e,h.a),n()):g.slice()},p.range=function(e){return arguments.length?(f=u.b.call(e),n()):f.slice()},p.rangeRound=function(e){return f=u.b.call(e),y=d.c,n()},p.clamp=function(e){return arguments.length?(b=!!e,n()):b},p.interpolate=function(e){return arguments.length?(y=e,n()):y},n()};var p=n(17),d=n(49),u=n(142),g=n(143),h=n(144),m=[0,1]},function(e,t,n){'use strict';n.d(t,'a',function(){return r}),n.d(t,'b',function(){return o});var i=Array.prototype,r=i.map,o=i.slice},function(e,t){'use strict';t.a=function(e){return function(){return e}}},function(e,t){'use strict';t.a=function(e){return+e}},function(e,t,n){'use strict';var i=Math.max,r=Math.abs,o=n(17),s=n(146);t.a=function(e,t,n){var l=e[0],d=e[e.length-1],c=Object(o.c)(l,d,null==t?10:t),p;switch(n=Object(s.c)(null==n?',f':n),n.type){case's':{var u=i(r(l),r(d));return null!=n.precision||isNaN(p=Object(s.e)(c,u))||(n.precision=p),Object(s.b)(n,u)}case'':case'e':case'g':case'p':case'r':{null!=n.precision||isNaN(p=Object(s.f)(c,i(r(l),r(d))))||(n.precision=p-('e'===n.type));break}case'f':case'%':{null!=n.precision||isNaN(p=Object(s.d)(c))||(n.precision=p-2*('%'===n.type));break}}return Object(s.a)(n)}},function(e,t,n){'use strict';var i=n(147);n.d(t,'a',function(){return i.a}),n.d(t,'b',function(){return i.b});var r=n(58),o=n(59);n.d(t,'c',function(){return o.a});var s=n(153);n.d(t,'d',function(){return s.a});var l=n(154);n.d(t,'e',function(){return l.a});var d=n(155);n.d(t,'f',function(){return d.a})},function(e,t,n){'use strict';n.d(t,'a',function(){return o}),n.d(t,'b',function(){return s});var i=n(58),r,o,s;(function(e){return r=Object(i.a)(e),o=r.format,s=r.formatPrefix,r})({decimal:'.',thousands:',',grouping:[3],currency:['$','']})},function(e,t){'use strict';t.a=function(e,n){return function(r,o){for(var s=r.length,i=[],t=0,l=e[0],d=0;0<s&&0<l&&(d+l+1>o&&(l=Math.max(1,o-d)),i.push(r.substring(s-=l,s+l)),!((d+=l+1)>o));)l=e[t=(t+1)%e.length];return i.reverse().join(n)}}},function(e,t){'use strict';t.a=function(e){return function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}}},function(e,t){'use strict';t.a=function(e,t){e=e.toPrecision(t);out:for(var r=e.length,n=1,i=-1,o;n<r;++n)switch(e[n]){case'.':i=o=n;break;case'0':0===i&&(i=n),o=n;break;case'e':break out;default:0<i&&(i=0);}return 0<i?e.slice(0,i)+e.slice(o+1):e}},function(e,t,n){'use strict';var i=n(24);t.a=function(e,t){var n=Object(i.a)(e,t);if(!n)return e+'';var r=n[0],o=n[1];return 0>o?'0.'+Array(-o).join('0')+r:r.length>o+1?r.slice(0,o+1)+'.'+r.slice(o+1):r+Array(o-r.length+2).join('0')}},function(e,t){'use strict';t.a=function(e){return e}},function(e,t,n){'use strict';var i=n(14);t.a=function(e){return Math.max(0,-Object(i.a)(Math.abs(e)))}},function(e,t,n){'use strict';var i=Math.max,r=n(14);t.a=function(e,t){return i(0,3*i(-8,Math.min(8,Math.floor(Object(r.a)(t)/3)))-Object(r.a)(Math.abs(e)))}},function(e,t,n){'use strict';var i=Math.abs,r=n(14);t.a=function(e,t){return e=i(e),t=i(t)-e,Math.max(0,Object(r.a)(t)-Object(r.a)(e))+1}},function(e,t){'use strict';function n(e,t,n){return 1/Math.sqrt(2*m)*h(-(y(e-t,2)/(2*y(n,2))))}function r(e,t,n){return 1<_((e-t)/n)?0:3/4*(1-y((e-t)/n,2))}function o(e,t,n){return 1/(h((e-t)/n)+h(-(e-t)/n))}function s(e,t,n){return 1<_((e-t)/n)?0:1/2}function l(e,t,n){return 1<_((e-t)/n)?0:1-_((e-t)/n)}function d(e,t,n){return 1<_((e-t)/n)?0:15/16*y(1-y((e-t)/n,2),2)}function c(e,t,n){return 1<_((e-t)/n)?0:35/32*y(1-y((e-t)/n,2),3)}function p(e,t,n){return 1<_((e-t)/n)?0:m/4*Math.cos(m/2*((e-t)/n))}function u(e,t,n){return 1<_((e-t)/n)?0:70/81*y(1-y(_((e-t)/n),3),3)}function g(e,t,n){var r=_((t-e)/n);return 0.5*h(-r/i)*Math.sin(r/i+m/4)}var i=Math.SQRT2,h=Math.exp,m=Math.PI,_=Math.abs,y=Math.pow;const f={};t.a=f,f.smooth={},f.smooth.kernel2=function(){function e(){var e=[];e=y.map(function(e){return[b(e),v(e)]});var n=[];if('number'==typeof _)for(x=0;x<e.length;x++)n.push(_);else if(!('object'==typeof _&&Array.isArray(_)))throw console.log(_),new Error('Invalid scale parameter');else if(_.length===e.length)n=_.slice();else{var r=0;for(x=0;x<e.length;x++)n.push(_[r]),x<_.length?r++:r=0}for(x=0;x<e.length;x++){var o=0,s=0,l=0,d=h[f](e[x][0],e[x][0],n[x]);for(o+=d*e[x][1],s+=d,i=x-1;-1<i&&(l=h[f](e[x][0],e[i][0],n[x]),!(l/d<m));i--)o+=l*e[i][1],s+=l;for(i=x+1;i<e.length&&(l=h[f](e[x][0],e[i][0],n[x]),!(l/d<m));i++)o+=l*e[i][1],s+=l;t.push([e[x][0],o/s])}}var t=[],h={Uniform:s,Triangle:l,Epanechnikov:r,Quartic:d,Triweight:c,Logistic:o,Cosine:p,Gaussian:n,Tricube:u,Silverman:g},m=1e-3,_=[],y=[],f='Gaussian',b=function(e){return e[0]},v=function(e){return e[1]},x,i;return e.scale=function(t){return arguments.length?(_=t,e):_},e.kernel=function(t){if(!arguments.length)return f;if('function'!=typeof h[t])throw new Error('Invalid kernel');return f=t,e},e.x=function(t){return arguments.length?(b=t,e):b},e.y=function(t){return arguments.length?(v=t,e):v},e.output=function(){return t},e.diff=function(t){return arguments.length?(m=t,e):m},e.data=function(t){return y=t,e},e}},function(e,t,n){var r=Math.pow,i=function(){function e(e,t){if(!o[e]){o[e]={};for(var n=0;n<e.length;n++)o[e][e.charAt(n)]=n}return o[e][t]}var t=String.fromCharCode,n='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=',i='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$',o={},s={compressToBase64:function(e){if(null==e)return'';var t=s._compress(e,6,function(e){return n.charAt(e)});switch(t.length%4){default:case 0:return t;case 1:return t+'===';case 2:return t+'==';case 3:return t+'=';}},decompressFromBase64:function(t){return null==t?'':''==t?null:s._decompress(t.length,32,function(i){return e(n,t.charAt(i))})},compressToUTF16:function(e){return null==e?'':s._compress(e,15,function(e){return t(e+32)})+' '},decompressFromUTF16:function(e){return null==e?'':''==e?null:s._decompress(e.length,16384,function(t){return e.charCodeAt(t)-32})},compressToUint8Array:function(e){for(var t=s.compress(e),n=new Uint8Array(2*t.length),r=0,i=t.length,o;r<i;r++)o=t.charCodeAt(r),n[2*r]=o>>>8,n[2*r+1]=o%256;return n},decompressFromUint8Array:function(e){if(null===e||void 0===e)return s.decompress(e);for(var n=Array(e.length/2),r=0,i=n.length;r<i;r++)n[r]=256*e[2*r]+e[2*r+1];var o=[];return n.forEach(function(e){o.push(t(e))}),s.decompress(o.join(''))},compressToEncodedURIComponent:function(e){return null==e?'':s._compress(e,6,function(e){return i.charAt(e)})},decompressFromEncodedURIComponent:function(t){return null==t?'':''==t?null:(t=t.replace(/ /g,'+'),s._decompress(t.length,32,function(n){return e(i,t.charAt(n))}))},compress:function(e){return s._compress(e,16,function(e){return t(e)})},_compress:function(e,t,n){if(null==e)return'';var o={},s={},l='',d='',c='',p=2,u=3,g=2,h=[],m=0,_=0,y,i,f;for(f=0;f<e.length;f+=1)if(l=e.charAt(f),Object.prototype.hasOwnProperty.call(o,l)||(o[l]=u++,s[l]=!0),d=c+l,Object.prototype.hasOwnProperty.call(o,d))c=d;else{if(Object.prototype.hasOwnProperty.call(s,c)){if(256>c.charCodeAt(0)){for(y=0;y<g;y++)m<<=1,_==t-1?(_=0,h.push(n(m)),m=0):_++;for(i=c.charCodeAt(0),y=0;8>y;y++)m=m<<1|1&i,_==t-1?(_=0,h.push(n(m)),m=0):_++,i>>=1}else{for(i=1,y=0;y<g;y++)m=m<<1|i,_==t-1?(_=0,h.push(n(m)),m=0):_++,i=0;for(i=c.charCodeAt(0),y=0;16>y;y++)m=m<<1|1&i,_==t-1?(_=0,h.push(n(m)),m=0):_++,i>>=1}p--,0==p&&(p=r(2,g),g++),delete s[c]}else for(i=o[c],y=0;y<g;y++)m=m<<1|1&i,_==t-1?(_=0,h.push(n(m)),m=0):_++,i>>=1;p--,0==p&&(p=r(2,g),g++),o[d]=u++,c=l+''}if(''!=c){if(Object.prototype.hasOwnProperty.call(s,c)){if(256>c.charCodeAt(0)){for(y=0;y<g;y++)m<<=1,_==t-1?(_=0,h.push(n(m)),m=0):_++;for(i=c.charCodeAt(0),y=0;8>y;y++)m=m<<1|1&i,_==t-1?(_=0,h.push(n(m)),m=0):_++,i>>=1}else{for(i=1,y=0;y<g;y++)m=m<<1|i,_==t-1?(_=0,h.push(n(m)),m=0):_++,i=0;for(i=c.charCodeAt(0),y=0;16>y;y++)m=m<<1|1&i,_==t-1?(_=0,h.push(n(m)),m=0):_++,i>>=1}p--,0==p&&(p=r(2,g),g++),delete s[c]}else for(i=o[c],y=0;y<g;y++)m=m<<1|1&i,_==t-1?(_=0,h.push(n(m)),m=0):_++,i>>=1;p--,0==p&&(p=r(2,g),g++)}for(i=2,y=0;y<g;y++)m=m<<1|1&i,_==t-1?(_=0,h.push(n(m)),m=0):_++,i>>=1;for(;;)if(m<<=1,_==t-1){h.push(n(m));break}else _++;return h.join('')},decompress:function(e){return null==e?'':''==e?null:s._decompress(e.length,32768,function(t){return e.charCodeAt(t)})},_decompress:function(e,n,o){var s=[],l=4,d=4,p=3,u='',g=[],h={val:o(0),position:n,index:1},m,_,i,y,f,b,v,x;for(_=0;3>_;_+=1)s[_]=_;for(y=0,b=4,v=1;v!=b;)f=h.val&h.position,h.position>>=1,0==h.position&&(h.position=n,h.val=o(h.index++)),y|=(0<f?1:0)*v,v<<=1;switch(m=y){case 0:for(y=0,b=256,v=1;v!=b;)f=h.val&h.position,h.position>>=1,0==h.position&&(h.position=n,h.val=o(h.index++)),y|=(0<f?1:0)*v,v<<=1;x=t(y);break;case 1:for(y=0,b=65536,v=1;v!=b;)f=h.val&h.position,h.position>>=1,0==h.position&&(h.position=n,h.val=o(h.index++)),y|=(0<f?1:0)*v,v<<=1;x=t(y);break;case 2:return'';}for(s[3]=x,i=x,g.push(x);;){if(h.index>e)return'';for(y=0,b=r(2,p),v=1;v!=b;)f=h.val&h.position,h.position>>=1,0==h.position&&(h.position=n,h.val=o(h.index++)),y|=(0<f?1:0)*v,v<<=1;switch(x=y){case 0:for(y=0,b=256,v=1;v!=b;)f=h.val&h.position,h.position>>=1,0==h.position&&(h.position=n,h.val=o(h.index++)),y|=(0<f?1:0)*v,v<<=1;s[d++]=t(y),x=d-1,l--;break;case 1:for(y=0,b=65536,v=1;v!=b;)f=h.val&h.position,h.position>>=1,0==h.position&&(h.position=n,h.val=o(h.index++)),y|=(0<f?1:0)*v,v<<=1;s[d++]=t(y),x=d-1,l--;break;case 2:return g.join('');}if(0==l&&(l=r(2,p),p++),s[x])u=s[x];else if(x===d)u=i+i.charAt(0);else return null;g.push(u),s[d++]=i+u.charAt(0),l--,i=u,0==l&&(l=r(2,p),p++)}}};return s}(),o;o=function(){return i}.call(t,n,t,e),!(o!==void 0&&(e.exports=o))},function(e,t,n){var i;(function(r){'use strict';function o(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function l(e,t){return e<<t|e>>>32-t}function p(e,n,i,r,d,s){return o(l(o(o(n,e),o(r,s)),d),i)}function s(e,n,i,r,o,l,s){return p(n&i|~n&r,e,n,o,l,s)}function u(e,n,i,r,o,l,s){return p(n&r|i&~r,e,n,o,l,s)}function g(e,n,i,r,o,l,s){return p(n^i^r,e,n,o,l,s)}function h(e,n,i,r,o,l,s){return p(i^(n|~r),e,n,o,l,s)}function d(e,t){e[t>>5]|=128<<t%32,e[(t+64>>>9<<4)+14]=t;var n=1732584193,r=-271733879,l=-1732584194,c=271733878,d,i,p,m,_;for(d=0;d<e.length;d+=16)i=n,p=r,m=l,_=c,n=s(n,r,l,c,e[d],7,-680876936),c=s(c,n,r,l,e[d+1],12,-389564586),l=s(l,c,n,r,e[d+2],17,606105819),r=s(r,l,c,n,e[d+3],22,-1044525330),n=s(n,r,l,c,e[d+4],7,-176418897),c=s(c,n,r,l,e[d+5],12,1200080426),l=s(l,c,n,r,e[d+6],17,-1473231341),r=s(r,l,c,n,e[d+7],22,-45705983),n=s(n,r,l,c,e[d+8],7,1770035416),c=s(c,n,r,l,e[d+9],12,-1958414417),l=s(l,c,n,r,e[d+10],17,-42063),r=s(r,l,c,n,e[d+11],22,-1990404162),n=s(n,r,l,c,e[d+12],7,1804603682),c=s(c,n,r,l,e[d+13],12,-40341101),l=s(l,c,n,r,e[d+14],17,-1502002290),r=s(r,l,c,n,e[d+15],22,1236535329),n=u(n,r,l,c,e[d+1],5,-165796510),c=u(c,n,r,l,e[d+6],9,-1069501632),l=u(l,c,n,r,e[d+11],14,643717713),r=u(r,l,c,n,e[d],20,-373897302),n=u(n,r,l,c,e[d+5],5,-701558691),c=u(c,n,r,l,e[d+10],9,38016083),l=u(l,c,n,r,e[d+15],14,-660478335),r=u(r,l,c,n,e[d+4],20,-405537848),n=u(n,r,l,c,e[d+9],5,568446438),c=u(c,n,r,l,e[d+14],9,-1019803690),l=u(l,c,n,r,e[d+3],14,-187363961),r=u(r,l,c,n,e[d+8],20,1163531501),n=u(n,r,l,c,e[d+13],5,-1444681467),c=u(c,n,r,l,e[d+2],9,-51403784),l=u(l,c,n,r,e[d+7],14,1735328473),r=u(r,l,c,n,e[d+12],20,-1926607734),n=g(n,r,l,c,e[d+5],4,-378558),c=g(c,n,r,l,e[d+8],11,-2022574463),l=g(l,c,n,r,e[d+11],16,1839030562),r=g(r,l,c,n,e[d+14],23,-35309556),n=g(n,r,l,c,e[d+1],4,-1530992060),c=g(c,n,r,l,e[d+4],11,1272893353),l=g(l,c,n,r,e[d+7],16,-155497632),r=g(r,l,c,n,e[d+10],23,-1094730640),n=g(n,r,l,c,e[d+13],4,681279174),c=g(c,n,r,l,e[d],11,-358537222),l=g(l,c,n,r,e[d+3],16,-722521979),r=g(r,l,c,n,e[d+6],23,76029189),n=g(n,r,l,c,e[d+9],4,-640364487),c=g(c,n,r,l,e[d+12],11,-421815835),l=g(l,c,n,r,e[d+15],16,530742520),r=g(r,l,c,n,e[d+2],23,-995338651),n=h(n,r,l,c,e[d],6,-198630844),c=h(c,n,r,l,e[d+7],10,1126891415),l=h(l,c,n,r,e[d+14],15,-1416354905),r=h(r,l,c,n,e[d+5],21,-57434055),n=h(n,r,l,c,e[d+12],6,1700485571),c=h(c,n,r,l,e[d+3],10,-1894986606),l=h(l,c,n,r,e[d+10],15,-1051523),r=h(r,l,c,n,e[d+1],21,-2054922799),n=h(n,r,l,c,e[d+8],6,1873313359),c=h(c,n,r,l,e[d+15],10,-30611744),l=h(l,c,n,r,e[d+6],15,-1560198380),r=h(r,l,c,n,e[d+13],21,1309151649),n=h(n,r,l,c,e[d+4],6,-145523070),c=h(c,n,r,l,e[d+11],10,-1120210379),l=h(l,c,n,r,e[d+2],15,718787259),r=h(r,l,c,n,e[d+9],21,-343485551),n=o(n,i),r=o(r,p),l=o(l,m),c=o(c,_);return[n,r,l,c]}function c(e){var t='',n=32*e.length,r;for(r=0;r<n;r+=8)t+=String.fromCharCode(255&e[r>>5]>>>r%32);return t}function m(e){var t=[],n;for(t[(e.length>>2)-1]=void 0,n=0;n<t.length;n+=1)t[n]=0;var i=8*e.length;for(n=0;n<i;n+=8)t[n>>5]|=(255&e.charCodeAt(n/8))<<n%32;return t}function _(e){return c(d(m(e),8*e.length))}function y(e,t){var n=m(e),r=[],o=[],s,i;for(r[15]=o[15]=void 0,16<n.length&&(n=d(n,8*e.length)),s=0;16>s;s+=1)r[s]=909522486^n[s],o[s]=1549556828^n[s];return i=d(r.concat(m(t)),512+8*t.length),c(d(o.concat(i),640))}function f(e){var t='0123456789abcdef',n='',r,o;for(o=0;o<e.length;o+=1)r=e.charCodeAt(o),n+=t.charAt(15&r>>>4)+t.charAt(15&r);return n}function b(e){return unescape(encodeURIComponent(e))}function v(e){return _(b(e))}function x(e){return f(v(e))}function E(e,t){return y(b(e),b(t))}function S(e,t){return f(E(e,t))}function k(e,t,n){return t?n?E(t,e):S(t,e):n?v(e):x(e)}i=function(){return k}.call(t,n,t,e),!(i!==void 0&&(e.exports=i))})(this)},function(e,t,n){(function(e){(function(){function t(){t=function(){},l.Symbol||(l.Symbol=m)}function n(){t();var e=l.Symbol.iterator;e||(e=l.Symbol.iterator=l.Symbol('iterator')),'function'!=typeof Array.prototype[e]&&b(Array.prototype,e,{configurable:!0,writable:!0,value:function(){return i(this)}}),n=function(){}}function i(e){var t=0;return r(function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}})}function r(e){return n(),e={next:e},e[l.Symbol.iterator]=function(){return this},e}function o(e){n(),t(),n();var r=e[Symbol.iterator];return r?r.call(e):i(e)}function s(){this.g=!1,this.c=null,this.m=void 0,this.b=1,this.l=this.s=0,this.f=null}function c(e){if(e.g)throw new TypeError('Generator is already running');e.g=!0}function u(e,t,n){return e.b=n,{value:t}}function _(e){for(var t in this.w=e,this.j=[],e)this.j.push(t);this.j.reverse()}function g(e){this.a=new s,this.A=e}function d(e,t){c(e.a);var n=e.a.c;return n?h(e,'return'in n?n['return']:function(e){return{value:e,done:!0}},t,e.a['return']):(e.a['return'](t),y(e))}function h(t,n,i,r){try{var o=n.call(t.a.c,i);if(!(o instanceof Object))throw new TypeError('Iterator result '+o+' is not an object');if(!o.done)return t.a.g=!1,o;var e=o.value}catch(e){return t.a.c=null,t.a.i(e),y(t)}return t.a.c=null,r.call(t.a,e),y(t)}function y(e){for(;e.a.b;)try{var t=e.A(e.a);if(t)return e.a.g=!1,{value:t.value,done:!1}}catch(t){e.a.m=void 0,e.a.i(t)}if(e.a.g=!1,e.a.f){if(t=e.a.f,e.a.f=null,t.v)throw t.u;return{value:t['return'],done:!0}}return{value:void 0,done:!0}}function f(e){this.next=function(t){return e.h(t)},this['throw']=function(t){return e.i(t)},this['return']=function(t){return d(e,t)},n(),this[Symbol.iterator]=function(){return this}}function v(e,t){var n=new f(new g(t));return w&&w(n,e.prototype),n}var b='function'==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value)},l='undefined'!=typeof window&&window===this?this:'undefined'!=typeof e&&null!=e?e:this,m=function(){var e=0;return function(t){return'jscomp_symbol_'+(t||'')+e++}}(),p,E;if('function'==typeof Object.setPrototypeOf)E=Object.setPrototypeOf;else{var x;a:{var k={};try{k.__proto__={o:!0},x=k.o;break a}catch(e){}x=!1}E=x?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+' is not extensible');return e}:null}var w=E;if(s.prototype.h=function(e){this.m=e},s.prototype.i=function(e){this.f={u:e,v:!0},this.b=this.s||this.l},s.prototype['return']=function(e){this.f={return:e},this.b=this.l},g.prototype.h=function(e){return(c(this.a),this.a.c)?h(this,this.a.c.next,e,this.a.h):(this.a.h(e),y(this))},g.prototype.i=function(e){return(c(this.a),this.a.c)?h(this,this.a.c['throw'],e,this.a.h):(this.a.i(e),y(this))},'undefined'==typeof FormData||!FormData.prototype.keys){var C=function(e,t,n){if(2>arguments.length)throw new TypeError('2 arguments required, but only '+arguments.length+' present.');return t instanceof Blob?[e+'',t,void 0===n?'string'==typeof t.name?t.name:'blob':n+'']:[e+'',t+'']},I=function(e){if(!arguments.length)throw new TypeError('1 argument required, but only 0 present.');return[e+'']},N=function(e){var t=o(e);return e=t.next().value,t=t.next().value,e instanceof Blob&&(e=new File([e],t,{type:e.type,lastModified:e.lastModified})),e},L='object'==typeof window?window:'object'==typeof self?self:this,M=L.FormData,A=L.XMLHttpRequest&&L.XMLHttpRequest.prototype.send,S=L.Request&&L.fetch;t();var T=L.Symbol&&Symbol.toStringTag,D=new WeakMap,O=Array.from||function(e){return[].slice.call(e)};T&&(Blob.prototype[T]||(Blob.prototype[T]='Blob'),'File'in L&&!File.prototype[T]&&(File.prototype[T]='File'));try{new File([],'')}catch(e){L.File=function(e,t,n){return e=new Blob(e,n),n=n&&void 0!==n.lastModified?new Date(n.lastModified):new Date,Object.defineProperties(e,{name:{value:t},lastModifiedDate:{value:n},lastModified:{value:+n},toString:{value:function(){return'[object File]'}}}),T&&Object.defineProperty(e,T,{value:'File'}),e}}var R=function(e){if(D.set(this,Object.create(null)),!e)return this;e=o(O(e.elements));for(var t=e.next();!t.done;t=e.next())if(t=t.value,t.name&&!t.disabled)if('file'===t.type)for(var n=o(t.files),i=n.next();!i.done;i=n.next())this.append(t.name,i.value);else if('select-multiple'===t.type||'select-one'===t.type)for(n=o(O(t.options)),i=n.next();!i.done;i=n.next())i=i.value,!i.disabled&&i.selected&&this.append(t.name,i.value);else'checkbox'===t.type||'radio'===t.type?t.checked&&this.append(t.name,t.value):this.append(t.name,t.value)};if(p=R.prototype,p.append=function(e,t,n){var i=D.get(this);i[e]||(i[e]=[]),i[e].push([t,n])},p['delete']=function(e){delete D.get(this)[e]},p.entries=function t(){var n=this,i,r,e,s,l,d;return v(t,function(c){switch(c.b){case 1:i=D.get(n),e=new _(i);case 2:var p;a:{for(p=e;0<p.j.length;){var t=p.j.pop();if(t in p.w){p=t;break a}}p=null}if(null==(r=p)){c.b=0;break}s=o(i[r]),l=s.next();case 5:if(l.done){c.b=2;break}return d=l.value,u(c,[r,N(d)],6);case 6:l=s.next(),c.b=5;}})},p.forEach=function(t,n){for(var i=o(this),r=i.next(),e;!r.done;r=i.next())e=o(r.value),r=e.next().value,e=e.next().value,t.call(n,e,r,this)},p.get=function(e){var t=D.get(this);return t[e]?N(t[e][0]):null},p.getAll=function(e){return(D.get(this)[e]||[]).map(N)},p.has=function(e){return e in D.get(this)},p.keys=function t(){var n=this,i,e,r,s,l;return v(t,function(t){return(1==t.b&&(i=o(n),e=i.next()),3!=t.b)?e.done?void(t.b=0):(r=e.value,s=o(r),l=s.next().value,u(t,l,3)):void(e=i.next(),t.b=2)})},p.set=function(t,n,i){D.get(this)[t]=[[n,i]]},p.values=function t(){var n=this,e,i,r,s,l;return v(t,function(t){return(1==t.b&&(e=o(n),i=e.next()),3!=t.b)?i.done?void(t.b=0):(r=i.value,s=o(r),s.next(),l=s.next().value,u(t,l,3)):void(i=e.next(),t.b=2)})},R.prototype._asNative=function(){for(var t=new M,n=o(this),e=n.next(),i;!e.done;e=n.next())i=o(e.value),e=i.next().value,i=i.next().value,t.append(e,i);return t},R.prototype._blob=function(){for(var t='----formdata-polyfill-'+Math.random(),n=[],e=o(this),i=e.next(),r;!i.done;i=e.next())r=o(i.value),i=r.next().value,r=r.next().value,n.push('--'+t+'\r\n'),r instanceof Blob?n.push('Content-Disposition: form-data; name="'+i+'"; filename="'+r.name+'"\r\n','Content-Type: '+(r.type||'application/octet-stream')+'\r\n\r\n',r,'\r\n'):n.push('Content-Disposition: form-data; name="'+i+'"\r\n\r\n'+r+'\r\n');return n.push('--'+t+'--'),new Blob(n,{type:'multipart/form-data; boundary='+t})},t(),n(),R.prototype[Symbol.iterator]=function(){return this.entries()},R.prototype.toString=function(){return'[object FormData]'},T&&(R.prototype[T]='FormData'),[['append',C],['delete',I],['get',I],['getAll',I],['has',I],['set',C]].forEach(function(t){var n=R.prototype[t[0]];R.prototype[t[0]]=function(){return n.apply(this,t[1].apply(this,O(arguments)))}}),A&&(XMLHttpRequest.prototype.send=function(e){e instanceof R?(e=e._blob(),this.setRequestHeader('Content-Type',e.type),A.call(this,e)):A.call(this,e)}),S){var P=L.fetch;L.fetch=function(t,n){return n&&n.body&&n.body instanceof R&&(n.body=n.body._blob()),P(t,n)}}L.FormData=R}})()}).call(t,n(0))},function(e,t,n){'use strict';var i=n(161),r=n.n(i);let o=['getInt16',2,!0],s=['getUint16',2,!0],l=['getUint32',4,!0],d=[[0,[[o,'instantaneous_power']]],[1,[[['getUint8',1],'pedal_power_balance']]],[2,[]],[4,[[s,'accumulated_torque']]],[8,[]],[16,[[l,'cumulative_wheel_revolutions'],[s,'last_wheel_event_time']]],[32,[[s,'cumulative_crank_revolutions'],[s,'last_crank_event_time']]],[64,[[o,'maximum_force_magnitude'],[o,'minimum_force_magnitude']]],[128,[[o,'maximum_torque_magnitude'],[o,'minimum_torque_magnitude']]],[256,[[['getUint8',3],'maximum_minimum_angle']]],[512,[[s,'top_dead_spot_angle']]],[1024,[[s,'bottom_dead_spot_angle']]],[2048,[[s,'accumulated_energy']]],[4096,[]]],c=[[1,[[l,'cumulative_wheel_revolutions'],[s,'last_wheel_event_time']]],[2,[[s,'cumulative_crank_revolutions'],[s,'last_crank_event_time']]]],p={1:'garmin',2:'garmin_fr405_antfs',3:'zephyr',4:'dayton',5:'idt',6:'srm',7:'quarq',8:'ibike',9:'saris',10:'spark_hk',11:'tanita',12:'echowell',13:'dynastream_oem',14:'nautilus',15:'dynastream',16:'timex',17:'metrigear',18:'xelic',19:'beurer',20:'cardiosport',21:'a_and_d',22:'hmm',23:'suunto',24:'thita_elektronik',25:'gpulse',26:'clean_mobile',27:'pedal_brain',28:'peaksware',29:'saxonar',30:'lemond_fitness',31:'dexcom',32:'wahoo_fitness',33:'octane_fitness',34:'archinoetics',35:'the_hurt_box',36:'citizen_systems',37:'magellan',38:'osynce',39:'holux',40:'concept2',42:'one_giant_leap',43:'ace_sensor',44:'brim_brothers',45:'xplova',46:'perception_digital',47:'bf1systems',48:'pioneer',49:'spantec',50:'metalogics',51:'4iiiis',52:'seiko_epson',53:'seiko_epson_oem',54:'ifor_powell',55:'maxwell_guider',56:'star_trac',57:'breakaway',58:'alatech_technology_ltd',59:'mio_technology_europe',60:'rotor',61:'geonaute',62:'id_bike',63:'specialized',64:'wtek',65:'physical_enterprises',66:'north_pole_engineering',67:'bkool',68:'cateye',69:'stages_cycling',70:'sigmasport',71:'tomtom',72:'peripedal',73:'wattbike',76:'moxy',77:'ciclosport',78:'powerbahn',79:'acorn_projects_aps',80:'lifebeam',81:'bontrager',82:'wellgo',83:'scosche',84:'magura',85:'woodway',86:'elite',87:'nielsen_kellerman',88:'dk_city',89:'tacx',90:'direction_technology',91:'magtonic',92:'1partcarbon',93:'inside_ride_technologies',94:'sound_of_motion',95:'stryd',96:'icg',97:'MiPulse',98:'bsx_athletics',99:'look',100:'campagnolo_srl',101:'body_bike_smart',102:'praxisworks',103:'limits_technology',104:'topaction_technology',105:'cosinuss',106:'fitcare',107:'magene',108:'giant_manufacturing_co',109:'tigrasport',110:'salutron',111:'technogym',112:'bryton_sensors',113:'latitude_limited',114:'soaring_technology',115:'igpsport',116:'thinkrider',117:'gopher_sport',118:'waterrower',255:'development',257:'healthandlife',258:'lezyne',259:'scribe_labs',260:'zwift',261:'watteam',262:'recon',263:'favero_electronics',264:'dynovelo',265:'strava',266:'precor',267:'bryton',268:'sram',269:'navman',270:'cobi',271:'spivi',272:'mio_magellan',273:'evesports',274:'sensitivus_gauge',275:'podoon',276:'life_time_fitness',277:'falco_e_motors',278:'minoura',279:'cycliq',280:'luxottica',281:'trainer_road',282:'the_sufferfest',283:'fullspeedahead',284:'virtualtraining',285:'feedbacksports',286:'omata',287:'vdo',5759:'actigraphcorp'};class u{getData(e){let t=0,n;16===this.mask_size?(n=e.getUint16(0,!0),t+=2):(n=e.getUint8(0),t+=1);let i=[];if(0===this.fields[0][0])for(let e of this.fields[0][1])i.push(e);for(let[t,r]of this.fields)if(n&t)for(let e of r)i.push(e);let r={};for(let n of i){var[[s,l,d],o]=n;let i;i=d?e[s](t,d):e[s](t),r[o]=i,t+=l}return r}}class g extends u{constructor(){super(),this.fields=c,this.mask_size=8}}class h extends u{constructor(){super(),this.fields=d,this.mask_size=16}}t.f=h;class m{constructor(){this.listeners={},this.timeoutID=void 0,this.milliTimeout=8e3}clearValueOnTimeout(e){this.timeoutID!==void 0&&clearTimeout(this.timeoutID),this.timeoutID=setTimeout(()=>{if(this.timeoutID=void 0,e.constructor===Array)for(let t of e)this.dispatch(t,0);else this.dispatch(e,0)},this.milliTimeout)}addListener(e,t){e in this.listeners||(this.listeners[e]=[]),this.listeners[e].push(t)}dispatch(e,t){e in this.listeners||(this.listeners[e]=[]);for(let n of this.listeners[e])n(t)}}class _ extends m{constructor(e,t,n,i){super(),this.device=e,this.server=t,this.service=n,this.characteristic=i,this.name=this.device.name,this.id=this.device.id,this.listening=!1,this.device.addEventListener('gattserverdisconnected',(t)=>{this.gattserverdisconnected(t).catch((e)=>{console.log('Error: ',e)})})}async gattserverdisconnected(){console.log('Reconnecting'),this.server=await this.device.gatt.connect(),this.service=await this.server.getPrimaryService(this.serviceId),this.characteristic=await this.service.getCharacteristic(this.characteristicId),this.listening&&(this.listening=!1,this.listen())}}t.d=class extends _{constructor(e,t,n,i){super(e,t,n,i),this.serviceId=6168,this.characteristicId=10851,this.parser=new h,this.lastCrankRevolutions=0,this.lastCrankTime=0}listen(){this.listening||(this.characteristic.addEventListener('characteristicvaluechanged',(e)=>{let t=this.parser.getData(e.target.value),n=t.instantaneous_power,i=t.cumulative_crank_revolutions,r=t.last_crank_event_time;this.lastCrankTime>r&&(this.lastCrankTime-=65536),this.lastCrankRevolutions>i&&(this.lastCrankRevolutions-=65536);let o=i-this.lastCrankRevolutions,s=(r-this.lastCrankTime)/1024,l=0;0<s&&(l=60*(o/s)),this.lastCrankRevolutions=i,this.lastCrankTime=r,this.dispatch('power',n),this.dispatch('cadence',l),this.clearValueOnTimeout(['power','cadence'])}),this.characteristic.startNotifications(),this.listening=!0)}};t.e=class extends _{constructor(e,t,n,i){super(e,t,n,i),this.serviceId=6168,this.characteristicId=10851,this.parser=new h}listen(){this.listening||(this.characteristic.addEventListener('characteristicvaluechanged',(e)=>{let t=this.parser.getData(e.target.value),n=t.instantaneous_power;this.dispatch('power',n),this.clearValueOnTimeout('power')}),this.characteristic.startNotifications(),this.listening=!0)}};t.b=class extends _{constructor(e,t,n,i){super(e,t,n,i),this.serviceId=6166,this.characteristicId=10843,this.parser=new g,this.lastCrankRevolutions=0,this.lastCrankTime=0}listen(){this.listening||(this.characteristic.addEventListener('characteristicvaluechanged',(e)=>{let t=this.parser.getData(e.target.value),n=t.cumulative_crank_revolutions,i=t.last_crank_event_time;if(n!==void 0&&i!==void 0){this.lastCrankTime>i&&(this.lastCrankTime-=65536),this.lastCrankRevolutions>n&&(this.lastCrankRevolutions-=65536);let e=n-this.lastCrankRevolutions,t=(i-this.lastCrankTime)/1024,r=0;0<t&&(r=60*(e/t)),this.lastCrankRevolutions=n,this.lastCrankTime=i,this.dispatch('cadence',r),this.clearValueOnTimeout('cadence')}}),this.characteristic.startNotifications(),this.listening=!0)}};t.c=class extends _{constructor(e,t,n,i){super(e,t,n,i),this.serviceId=6157,this.characteristicId=10807}listen(){this.listening||(this.characteristic.addEventListener('characteristicvaluechanged',(e)=>{let t=e.target.value.getUint8(1);this.dispatch('hr',t),this.clearValueOnTimeout('hr')}),this.characteristic.startNotifications(),this.listening=!0)}};t.g=class{constructor(){this.listeners={},this.listening=!1,this.watts=0,this.id='virtual',this.name='Virtual Power Meter'}listen(){if(!this.listening){document.getElementById('ui-vpower-container').style.display='block';let e=document.getElementById('vpower');e.value=this.watts,e.onchange=()=>{this.watts=parseInt(e.value)},setInterval(()=>{this.dispatch('power',this.watts)},750),this.listening=!0}}addListener(e,t){e in this.listeners||(this.listeners[e]=[]),this.listeners[e].push(t)}dispatch(e,t){e in this.listeners||(this.listeners[e]=[]);for(let n of this.listeners[e])n(t)}};class y extends m{constructor(e,t,n,i){super(),this.type=e,this.manId=t,this.modelNum=n,this.deviceId=i,this.setName()}listen(){}setName(){let e='Unknown';this.manId in p&&(e=p[this.manId].split('_').map((e)=>{return e[0].toUpperCase()+e.substr(1)}).join(' ')),this.name=e+' - '+this.deviceId}}class f extends y{constructor(e,t,n,i,r){super(t,n,i,r),this.timeoutID=void 0,this.id=e}antMessage(e){let t=e.Power;t!==void 0&&(this.dispatch('power',t),this.clearValueOnTimeout('power'))}}class b extends y{constructor(e,t,n,i,r){super(t,n,i,r),this.timeoutID=void 0,this.id=e}antMessage(e){let t;e.Cadence!==void 0&&(t=e.Cadence),e.CalculatedCadence!==void 0&&(t=e.CalculatedCadence),t!==void 0&&(this.dispatch('cadence',t),this.clearValueOnTimeout('cadence'))}}class v extends y{constructor(e,t,n,i,r){super(t,n,i,r),this.timeoutID=void 0,this.id=e}antMessage(e){let t=e.ComputedHeartRate;t!==void 0&&(this.dispatch('hr',t),this.clearValueOnTimeout('hr'))}}t.a=class{constructor(e='http://localhost:8000/'){this.url=e,this.listeners={},this.devicesByType={},this.devices={},this.url.startsWith('http')||(this.url='http://'+this.url),this.url.endsWith('/')||(this.url+='/'),this.meterClasses={hr:v,bike_power:f,speed_cadence:b}}addListener(e,t){e in this.listeners||(this.listeners[e]=[]),this.listeners[e].push(t)}dispatch(e,t){e in this.listeners||(this.listeners[e]=[]);for(let n of this.listeners[e])n(t)}scan(){let e=new r.a.Client(this.url,{timeout:120,retry:10});e.on('transport:down',(e)=>{this.dispatch('error',e)}),e.subscribe('/*',(e)=>{const t=JSON.parse(e.text);let n=[t.type];'bike_power'===t.type&&(t.Cadence||t.CalculatedCadence)&&n.push('speed_cadence');for(let i of n){let e=i+t.DeviceID;if(!(e in this.devicesByType)&&i in this.meterClasses){let n=new this.meterClasses[i](e,i,t.ManId,t.ModelNum,t.DeviceID);t.DeviceID in this.devices||(this.devices[t.DeviceID]=[]),this.devices[t.DeviceID].push(n),this.devicesByType[e]=n,this.dispatch(i,n)}}if(t.DeviceID in this.devices)for(let e of this.devices[t.DeviceID])e.antMessage(t);if((void 0!==t.ManId||void 0!==t.ModelNum)&&t.DeviceID in this.devices)for(let e of this.devices[t.DeviceID]){let n=!1;void 0!==t.ManId&&t.ManId!==e.manId&&(e.manId=t.ManId,n=!0),void 0!==t.ModelNum&&t.ModelNum!==e.modelNum&&(e.modelNum=t.ModelNum,n=!0),n&&(e.setName(),this.dispatch('namechange',e))}})}}},function(e,t,n){'use strict';var i=n(64),r=n(10),o={VERSION:i.VERSION,Client:n(162),Scheduler:n(71)};r.wrapper=o,e.exports=o},function(e,t,n){'use strict';(function(t){var i=n(65),r=n(2),o=n(15),s=n(4),l=n(26),d=n(27),c=n(64),p=n(1),u=n(164),g=n(12),h=n(10),m=n(28),_=n(66),y=n(166),f=n(175),b=n(176),v=n(177),x=n(178),E=r({className:'Client',UNCONNECTED:1,CONNECTING:2,CONNECTED:3,DISCONNECTED:4,HANDSHAKE:'handshake',RETRY:'retry',NONE:'none',CONNECTION_TIMEOUT:60,DEFAULT_ENDPOINT:'/bayeux',INTERVAL:0,initialize:function(e,n){this.info('New client created for ?',e),n=n||{},u(n,['interval','timeout','endpoints','proxy','retry','scheduler','websocketExtensions','tls','ca']),this._channels=new _.Set,this._dispatcher=y.create(this,e||this.DEFAULT_ENDPOINT,n),this._messageId=0,this._state=this.UNCONNECTED,this._responseCallbacks={},this._advice={reconnect:this.RETRY,interval:1e3*(n.interval||this.INTERVAL),timeout:1e3*(n.timeout||this.CONNECTION_TIMEOUT)},this._dispatcher.timeout=this._advice.timeout/1e3,this._dispatcher.bind('message',this._receiveMessage,this),d.Event&&t.onbeforeunload!==void 0&&d.Event.on(t,'beforeunload',function(){0>l.indexOf(this._dispatcher._disabled,'autodisconnect')&&this.disconnect()},this)},addWebsocketExtension:function(e){return this._dispatcher.addWebsocketExtension(e)},disable:function(e){return this._dispatcher.disable(e)},setHeader:function(e,t){return this._dispatcher.setHeader(e,t)},handshake:function(e,n){if(this._advice.reconnect!==this.NONE&&this._state===this.UNCONNECTED){this._state=this.CONNECTING;var r=this;this.info('Initiating handshake with ?',s.stringify(this._dispatcher.endpoint)),this._dispatcher.selectTransport(c.MANDATORY_CONNECTION_TYPES),this._sendMessage({channel:_.HANDSHAKE,version:c.BAYEUX_VERSION,supportedConnectionTypes:this._dispatcher.getConnectionTypes()},{},function(o){o.successful?(this._state=this.CONNECTED,this._dispatcher.clientId=o.clientId,this._dispatcher.selectTransport(o.supportedConnectionTypes),this.info('Handshake successful: ?',this._dispatcher.clientId),this.subscribe(this._channels.getKeys(),!0),e&&i(function(){e.call(n)})):(this.info('Handshake unsuccessful'),t.setTimeout(function(){r.handshake(e,n)},1e3*this._dispatcher.retry),this._state=this.UNCONNECTED)},this)}},connect:function(e,t){if(this._advice.reconnect!==this.NONE&&this._state!==this.DISCONNECTED){if(this._state===this.UNCONNECTED)return this.handshake(function(){this.connect(e,t)},this);(this.callback(e,t),this._state===this.CONNECTED)&&(this.info('Calling deferred actions for ?',this._dispatcher.clientId),this.setDeferredStatus('succeeded'),this.setDeferredStatus('unknown'),this._connectRequest||(this._connectRequest=!0,this.info('Initiating connection for ?',this._dispatcher.clientId),this._sendMessage({channel:_.CONNECT,clientId:this._dispatcher.clientId,connectionType:this._dispatcher.connectionType},{},this._cycleConnection,this)))}},disconnect:function(){if(this._state===this.CONNECTED){this._state=this.DISCONNECTED,this.info('Disconnecting ?',this._dispatcher.clientId);var e=new v;return this._sendMessage({channel:_.DISCONNECT,clientId:this._dispatcher.clientId},{},function(t){t.successful?(this._dispatcher.close(),e.setDeferredStatus('succeeded')):e.setDeferredStatus('failed',f.parse(t.error))},this),this.info('Clearing channel listeners for ?',this._dispatcher.clientId),this._channels=new _.Set,e}},subscribe:function(e,t,n){if(e instanceof Array)return l.map(e,function(e){return this.subscribe(e,t,n)},this);var i=new x(this,e,t,n),r=!0===t,o=this._channels.hasSubscription(e);return o&&!r?(this._channels.subscribe([e],i),i.setDeferredStatus('succeeded'),i):(this.connect(function(){this.info('Client ? attempting to subscribe to ?',this._dispatcher.clientId,e),r||this._channels.subscribe([e],i),this._sendMessage({channel:_.SUBSCRIBE,clientId:this._dispatcher.clientId,subscription:e},{},function(t){if(!t.successful)return i.setDeferredStatus('failed',f.parse(t.error)),this._channels.unsubscribe(e,i);var n=[].concat(t.subscription);this.info('Subscription acknowledged for ? to ?',this._dispatcher.clientId,n),i.setDeferredStatus('succeeded')},this)},this),i)},unsubscribe:function(e,t){if(e instanceof Array)return l.map(e,function(e){return this.unsubscribe(e,t)},this);var n=this._channels.unsubscribe(e,t);n&&this.connect(function(){this.info('Client ? attempting to unsubscribe from ?',this._dispatcher.clientId,e),this._sendMessage({channel:_.UNSUBSCRIBE,clientId:this._dispatcher.clientId,subscription:e},{},function(e){if(e.successful){var t=[].concat(e.subscription);this.info('Unsubscription acknowledged for ? from ?',this._dispatcher.clientId,t)}},this)},this)},publish:function(e,t,n){u(n||{},['attempts','deadline']);var i=new v;return this.connect(function(){this.info('Client ? queueing published message to ?: ?',this._dispatcher.clientId,e,t),this._sendMessage({channel:e,data:t,clientId:this._dispatcher.clientId},n,function(e){e.successful?i.setDeferredStatus('succeeded'):i.setDeferredStatus('failed',f.parse(e.error))},this)},this),i},_sendMessage:function(e,t,n,i){e.id=this._generateMessageId();var r=this._advice.timeout?1.2*this._advice.timeout/1e3:1.2*this._dispatcher.retry;this.pipeThroughExtensions('outgoing',e,null,function(e){e&&(n&&(this._responseCallbacks[e.id]=[n,i]),this._dispatcher.sendMessage(e,r,t||{}))},this)},_generateMessageId:function(){return this._messageId+=1,4294967296<=this._messageId&&(this._messageId=0),this._messageId.toString(36)},_receiveMessage:function(e){var t=e.id,n;e.successful!==void 0&&(n=this._responseCallbacks[t],delete this._responseCallbacks[t]),this.pipeThroughExtensions('incoming',e,null,function(e){e&&(e.advice&&this._handleAdvice(e.advice),this._deliverMessage(e),n&&n[0].call(n[1],e))},this)},_handleAdvice:function(e){p(this._advice,e),this._dispatcher.timeout=this._advice.timeout/1e3,this._advice.reconnect===this.HANDSHAKE&&this._state!==this.DISCONNECTED&&(this._state=this.UNCONNECTED,this._dispatcher.clientId=null,this._cycleConnection())},_deliverMessage:function(e){e.channel&&void 0!==e.data&&(this.info('Client ? calling listeners for ? with ?',this._dispatcher.clientId,e.channel,e.data),this._channels.distributeMessage(e))},_cycleConnection:function(){this._connectRequest&&(this._connectRequest=null,this.info('Closed connection for ?',this._dispatcher.clientId));var e=this;t.setTimeout(function(){e.connect()},this._advice.interval)}});p(E.prototype,g),p(E.prototype,m),p(E.prototype,h),p(E.prototype,b),e.exports=E}).call(t,n(0))},function(e,t,n){'use strict';(function(t){function n(e){o.length||(u(),s=!0),o[o.length]=e}function i(){for(;l<o.length;){var e=l;if(++l,o[e].call(),l>d){for(var t=0,n=o.length-l;t<n;t++)o[t]=o[t+l];o.length-=l,l=0}}o.length=0,l=0,s=!1}function r(e){return function(){function t(){clearTimeout(n),clearInterval(i),e()}var n=setTimeout(t,0),i=setInterval(t,50)}}e.exports=n;var o=[],s=!1,l=0,d=1024,c='undefined'==typeof t?self:t,p=c.MutationObserver||c.WebKitMutationObserver,u;u='function'==typeof p?function(e){var t=1,n=new p(e),i=document.createTextNode('');return n.observe(i,{characterData:!0}),function(){t=-t,i.data=t}}(i):r(i),n.requestFlush=u,n.makeRequestCallFromTimer=r}).call(t,n(0))},function(e,t,n){'use strict';var i=n(26);e.exports=function(e,t){for(var n in e)if(0>i.indexOf(t,n))throw new Error('Unrecognized option: '+n)}},function(e){function t(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0;n<e.length;n++)if(t===e[n])return n;return-1}function n(){}var r='function'==typeof Array.isArray?Array.isArray:function(e){return'[object Array]'===Object.prototype.toString.call(e)};e.exports=n,n.prototype.emit=function(e){if('error'===e&&(!this._events||!this._events.error||r(this._events.error)&&!this._events.error.length)){if(arguments[1]instanceof Error)throw arguments[1];else throw new Error('Uncaught, unspecified \'error\' event.');return!1}if(!this._events)return!1;var t=this._events[e];if(!t)return!1;if('function'==typeof t){switch(arguments.length){case 1:t.call(this);break;case 2:t.call(this,arguments[1]);break;case 3:t.call(this,arguments[1],arguments[2]);break;default:var n=Array.prototype.slice.call(arguments,1);t.apply(this,n);}return!0}if(r(t)){for(var n=Array.prototype.slice.call(arguments,1),o=t.slice(),s=0,i=o.length;s<i;s++)o[s].apply(this,n);return!0}return!1},n.prototype.addListener=function(e,t){if('function'!=typeof t)throw new Error('addListener only takes instances of Function');return this._events||(this._events={}),this.emit('newListener',e,t),this._events[e]?r(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){var n=this;return n.on(e,function i(){n.removeListener(e,i),t.apply(this,arguments)}),this},n.prototype.removeListener=function(e,n){if('function'!=typeof n)throw new Error('removeListener only takes instances of Function');if(!this._events||!this._events[e])return this;var o=this._events[e];if(r(o)){var s=t(o,n);if(0>s)return this;o.splice(s,1),0==o.length&&delete this._events[e]}else this._events[e]===n&&delete this._events[e];return this},n.prototype.removeAllListeners=function(e){return 0===arguments.length?(this._events={},this):(e&&this._events&&this._events[e]&&(this._events[e]=null),this)},n.prototype.listeners=function(e){return this._events||(this._events={}),this._events[e]||(this._events[e]=[]),r(this._events[e])||(this._events[e]=[this._events[e]]),this._events[e]}},function(e,t,n){'use strict';(function(t){var i=n(2),r=n(4),o=n(68),s=n(1),l=n(10),d=n(28),c=n(167),p=n(71),u=i({className:'Dispatcher',MAX_REQUEST_SIZE:2048,DEFAULT_RETRY:5,UP:1,DOWN:2,initialize:function(e,t,s){this._client=e,this.endpoint=r.parse(t),this._alternates=s.endpoints||{},this.cookies=o.CookieJar&&new o.CookieJar,this._disabled=[],this._envelopes={},this.headers={},this.retry=s.retry||this.DEFAULT_RETRY,this._scheduler=s.scheduler||p,this._state=0,this.transports={},this.wsExtensions=[],this.proxy=s.proxy||{},'string'==typeof this._proxy&&(this._proxy={origin:this._proxy});var l=s.websocketExtensions;if(l){l=[].concat(l);for(var d=0,i=l.length;d<i;d++)this.addWebsocketExtension(l[d])}for(var n in this.tls=s.tls||{},this.tls.ca=this.tls.ca||s.ca,this._alternates)this._alternates[n]=r.parse(this._alternates[n]);this.maxRequestSize=this.MAX_REQUEST_SIZE},endpointFor:function(e){return this._alternates[e]||this.endpoint},addWebsocketExtension:function(e){this.wsExtensions.push(e)},disable:function(e){this._disabled.push(e)},setHeader:function(e,t){this.headers[e]=t},close:function(){var e=this._transport;delete this._transport,e&&e.close()},getConnectionTypes:function(){return c.getConnectionTypes()},selectTransport:function(e){c.get(this,e,this._disabled,function(e){this.debug('Selected ? transport for ?',e.connectionType,r.stringify(e.endpoint));e===this._transport||(this._transport&&this._transport.close(),this._transport=e,this.connectionType=e.connectionType)},this)},sendMessage:function(e,t,n){n=n||{};var i=e.id,r=n.attempts,o=n.deadline&&new Date().getTime()+1e3*n.deadline,s=this._envelopes[i],l;s||(l=new this._scheduler(e,{timeout:t,interval:this.retry,attempts:r,deadline:o}),s=this._envelopes[i]={message:e,scheduler:l}),this._sendEnvelope(s)},_sendEnvelope:function(e){if(this._transport&&!(e.request||e.timer)){var n=e.message,i=e.scheduler,r=this;return i.isDeliverable()?void(e.timer=t.setTimeout(function(){r.handleError(n)},1e3*i.getTimeout()),i.send(),e.request=this._transport.sendMessage(n)):(i.abort(),void delete this._envelopes[n.id])}},handleResponse:function(e){var n=this._envelopes[e.id];e.successful!==void 0&&n&&(n.scheduler.succeed(),delete this._envelopes[e.id],t.clearTimeout(n.timer)),this.trigger('message',e);this._state===this.UP||(this._state=this.UP,this._client.trigger('transport:up'))},handleError:function(e,n){var i=this._envelopes[e.id],r=i&&i.request,o=this;if(r){r.then(function(e){e&&e.abort&&e.abort()});var s=i.scheduler;s.fail(),t.clearTimeout(i.timer),i.request=i.timer=null,n?this._sendEnvelope(i):i.timer=t.setTimeout(function(){i.timer=null,o._sendEnvelope(i)},1e3*s.getInterval()),this._state===this.DOWN||(this._state=this.DOWN,this._client.trigger('transport:down'))}}});u.create=function(e,t,n){return new u(e,t,n)},s(u.prototype,d),s(u.prototype,l),e.exports=u}).call(t,n(0))},function(e,t,n){'use strict';var i=n(7);i.register('websocket',n(170)),i.register('eventsource',n(172)),i.register('long-polling',n(70)),i.register('cross-origin-long-polling',n(173)),i.register('callback-polling',n(174)),e.exports=i},function(e){function t(){throw new Error('setTimeout has not been defined')}function n(){throw new Error('clearTimeout has not been defined')}function r(e){if(p===setTimeout)return setTimeout(e,0);if((p===t||!p)&&setTimeout)return p=setTimeout,setTimeout(e,0);try{return p(e,0)}catch(t){try{return p.call(null,e,0)}catch(t){return p.call(this,e,0)}}}function i(e){if(u===clearTimeout)return clearTimeout(e);if((u===n||!u)&&clearTimeout)return u=clearTimeout,clearTimeout(e);try{return u(e)}catch(t){try{return u.call(null,e)}catch(t){return u.call(this,e)}}}function o(){h&&_&&(h=!1,_.length?g=_.concat(g):m=-1,g.length&&s())}function s(){if(!h){var e=r(o);h=!0;for(var t=g.length;t;){for(_=g,g=[];++m<t;)_&&_[m].run();m=-1,t=g.length}_=null,h=!1,i(e)}}function l(e,t){this.fun=e,this.array=t}function d(){}var c=e.exports={},p,u;(function(){try{p='function'==typeof setTimeout?setTimeout:t}catch(n){p=t}try{u='function'==typeof clearTimeout?clearTimeout:n}catch(t){u=n}})();var g=[],h=!1,m=-1,_;c.nextTick=function(e){var t=Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];g.push(new l(e,t)),1!==g.length||h||r(s)},l.prototype.run=function(){this.fun.apply(null,this.array)},c.title='browser',c.browser=!0,c.env={},c.argv=[],c.version='',c.versions={},c.on=d,c.addListener=d,c.once=d,c.off=d,c.removeListener=d,c.removeAllListeners=d,c.emit=d,c.prependListener=d,c.prependOnceListener=d,c.listeners=function(){return[]},c.binding=function(){throw new Error('process.binding is not supported')},c.cwd=function(){return'/'},c.chdir=function(){throw new Error('process.chdir is not supported')},c.umask=function(){return 0}},function(e,t,n){'use strict';(function(t){e.exports={addTimeout:function(e,n,i,r){if(this._timeouts=this._timeouts||{},!this._timeouts.hasOwnProperty(e)){var o=this;this._timeouts[e]=t.setTimeout(function(){delete o._timeouts[e],i.call(r)},1e3*n)}},removeTimeout:function(e){this._timeouts=this._timeouts||{};var n=this._timeouts[e];n&&(t.clearTimeout(n),delete this._timeouts[e])},removeAllTimeouts:function(){for(var e in this._timeouts=this._timeouts||{},this._timeouts)this.removeTimeout(e)}}}).call(t,n(0))},function(e,t,n){'use strict';(function(t){var i=n(2),r=n(15),o=n(69),s=n(4),l=n(27),d=n(29),c=n(1),p=n(11),u=n(171),g=n(12),h=n(7),m=c(i(h,{UNCONNECTED:1,CONNECTING:2,CONNECTED:3,batching:!1,isUsable:function(e,t){this.callback(function(){e.call(t,!0)}),this.errback(function(){e.call(t,!1)}),this.connect()},request:function(e){this._pending=this._pending||new o;for(var t=0,i=e.length;t<i;t++)this._pending.add(e[t]);var n=this,s=new r(function(t){n.callback(function(n){n&&1===n.readyState&&(n.send(p(e)),t(n))}),n.connect()});return{abort:function(){s.then(function(e){e.close()})}}},connect:function(){if(!m._unloaded&&(this._state=this._state||this.UNCONNECTED,this._state===this.UNCONNECTED)){this._state=this.CONNECTING;var e=this._createSocket();if(!e)return this.setDeferredStatus('failed');var t=this;e.onopen=function(){e.headers&&t._storeCookies(e.headers['set-cookie']),t._socket=e,t._state=t.CONNECTED,t._everConnected=!0,t._ping(),t.setDeferredStatus('succeeded',e)};var n=!1;e.onclose=e.onerror=function(){if(!n){n=!0;var i=t._state===t.CONNECTED;e.onopen=e.onclose=e.onerror=e.onmessage=null,delete t._socket,t._state=t.UNCONNECTED,t.removeTimeout('ping');var r=t._pending?t._pending.toArray():[];delete t._pending,i||t._everConnected?(t.setDeferredStatus('unknown'),t._handleError(r,i)):t.setDeferredStatus('failed')}},e.onmessage=function(e){var r;try{r=JSON.parse(e.data)}catch(e){}if(r){r=[].concat(r);for(var o=0,i=r.length;o<i;o++)void 0!==r[o].successful&&t._pending.remove(r[o]);t._receive(r)}}}},close:function(){this._socket&&this._socket.close()},_createSocket:function(){var e=m.getSocketUrl(this.endpoint),t=this._dispatcher.headers,n=this._dispatcher.wsExtensions,i=this._getCookies(),r=this._dispatcher.tls,o={extensions:n,headers:t,proxy:this._proxy,tls:r};return''!==i&&(o.headers.Cookie=i),u.create(e,[],o)},_ping:function(){this._socket&&1===this._socket.readyState&&(this._socket.send('[]'),this.addTimeout('ping',this._dispatcher.timeout/2,this._ping,this))}}),{PROTOCOLS:{"http:":'ws:',"https:":'wss:'},create:function(e,t){var n=e.transports.websocket=e.transports.websocket||{};return n[t.href]=n[t.href]||new this(e,t),n[t.href]},getSocketUrl:function(e){return e=d(e),e.protocol=this.PROTOCOLS[e.protocol],s.stringify(e)},isUsable:function(e,t,n,i){this.create(e,t).isUsable(n,i)}});c(m.prototype,g),l.Event&&t.onbeforeunload!==void 0&&l.Event.on(t,'beforeunload',function(){m._unloaded=!0}),e.exports=m}).call(t,n(0))},function(e,t,n){'use strict';(function(t){var n=t.MozWebSocket||t.WebSocket;e.exports={create:function(e){return'function'==typeof n?new n(e):null}}}).call(t,n(0))},function(e,t,n){'use strict';(function(t){var i=n(2),r=n(4),o=n(29),s=n(1),l=n(12),d=n(7),c=n(70),p=s(i(d,{initialize:function(e,n){if(d.prototype.initialize.call(this,e,n),!t.EventSource)return this.setDeferredStatus('failed');this._xhr=new c(e,n),n=o(n),n.pathname+='/'+e.clientId;var i=new t.EventSource(r.stringify(n)),s=this;i.onopen=function(){s._everConnected=!0,s.setDeferredStatus('succeeded')},i.onerror=function(){s._everConnected?s._handleError([]):(s.setDeferredStatus('failed'),i.close())},i.onmessage=function(e){var t;try{t=JSON.parse(e.data)}catch(e){}t?s._receive(t):s._handleError([])},this._socket=i},close:function(){this._socket&&(this._socket.onopen=this._socket.onerror=this._socket.onmessage=null,this._socket.close(),delete this._socket)},isUsable:function(e,t){this.callback(function(){e.call(t,!0)}),this.errback(function(){e.call(t,!1)})},encode:function(e){return this._xhr.encode(e)},request:function(e){return this._xhr.request(e)}}),{isUsable:function(e,t,n,i){var r=e.clientId;return r?void c.isUsable(e,t,function(r){return r?void this.create(e,t).isUsable(n,i):n.call(i,!1)},this):n.call(i,!1)},create:function(e,t){var n=e.transports.eventsource=e.transports.eventsource||{},i=e.clientId,s=o(t);return s.pathname+='/'+(i||''),s=r.stringify(s),n[s]=n[s]||new this(e,t),n[s]}});s(p.prototype,l),e.exports=p}).call(t,n(0))},function(e,t,n){'use strict';(function(t){var i=n(2),r=n(69),o=n(4),s=n(1),l=n(11),d=n(7),c=s(i(d,{encode:function(e){return'message='+encodeURIComponent(l(e))},request:function(e){var n=t.XDomainRequest?XDomainRequest:XMLHttpRequest,i=new n,r=++c._id,s=this._dispatcher.headers,l=this,d;if(i.open('POST',o.stringify(this.endpoint),!0),i.setRequestHeader)for(d in i.setRequestHeader('Pragma','no-cache'),s)s.hasOwnProperty(d)&&i.setRequestHeader(d,s[d]);var p=function(){return!!i&&void(c._pending.remove(r),i.onload=i.onerror=i.ontimeout=i.onprogress=null,i=null)};return i.onload=function(){var t;try{t=JSON.parse(i.responseText)}catch(e){}p(),t?l._receive(t):l._handleError(e)},i.onerror=i.ontimeout=function(){p(),l._handleError(e)},i.onprogress=function(){},n===t.XDomainRequest&&c._pending.add({id:r,xhr:i}),i.send(this.encode(e)),i}}),{_id:0,_pending:new r,isUsable:function(e,n,i,r){if(o.isSameOrigin(n))return i.call(r,!1);if(t.XDomainRequest)return i.call(r,n.protocol===location.protocol);if(t.XMLHttpRequest){var s=new XMLHttpRequest;return i.call(r,void 0!==s.withCredentials)}return i.call(r,!1)}});e.exports=c}).call(t,n(0))},function(e,t,n){'use strict';(function(t){var i=n(2),r=n(4),o=n(29),s=n(1),l=n(11),d=n(7),c=s(i(d,{encode:function(e){var t=o(this.endpoint);return t.query.message=l(e),t.query.jsonp='__jsonp'+c._cbCount+'__',r.stringify(t)},request:function(e){var n=document.getElementsByTagName('head')[0],i=document.createElement('script'),s=c.getCallbackName(),d=o(this.endpoint),p=this;d.query.message=l(e),d.query.jsonp=s;var u=function(){if(!t[s])return!1;t[s]=void 0;try{delete t[s]}catch(e){}i.parentNode.removeChild(i)};return t[s]=function(e){u(),p._receive(e)},i.type='text/javascript',i.src=r.stringify(d),n.appendChild(i),i.onerror=function(){u(),p._handleError(e)},{abort:u}}}),{_cbCount:0,getCallbackName:function(){return this._cbCount+=1,'__jsonp'+this._cbCount+'__'},isUsable:function(e,t,n,i){n.call(i,!0)}});e.exports=c}).call(t,n(0))},function(e,t,n){'use strict';var i=n(2),r=n(67),o=i({initialize:function(e,t,n){this.code=e,this.params=Array.prototype.slice.call(t),this.message=n},toString:function(){return this.code+':'+this.params.join(',')+':'+this.message}});o.parse=function(e){if(e=e||'',!r.ERROR.test(e))return new o(null,[],e);var t=e.split(':'),n=parseInt(t[0]),i=t[1].split(','),e=t[2];return new o(n,i,e)};var s={versionMismatch:[300,'Version mismatch'],conntypeMismatch:[301,'Connection types not supported'],extMismatch:[302,'Extension mismatch'],badRequest:[400,'Bad request'],clientUnknown:[401,'Unknown client'],parameterMissing:[402,'Missing required parameter'],channelForbidden:[403,'Forbidden channel'],channelUnknown:[404,'Unknown channel'],channelInvalid:[405,'Invalid channel'],extUnknown:[406,'Unknown extension'],publishFailed:[407,'Failed to publish'],serverError:[500,'Internal server error']};for(var l in s)(function(e){o[e]=function(){return new o(s[e][0],arguments,s[e][1]).toString()}})(l);e.exports=o},function(e,t,n){'use strict';var i=n(1),r=n(10),o={addExtension:function(e){this._extensions=this._extensions||[],this._extensions.push(e),e.added&&e.added(this)},removeExtension:function(e){if(this._extensions)for(var t=this._extensions.length;t--;)this._extensions[t]===e&&(this._extensions.splice(t,1),e.removed&&e.removed(this))},pipeThroughExtensions:function(e,t,n,i,r){if(this.debug('Passing through ? extensions: ?',e,t),!this._extensions)return i.call(r,t);var o=this._extensions.slice(),s=function(t){if(!t)return i.call(r,t);var l=o.shift();if(!l)return i.call(r,t);var d=l[e];return d?void(3<=d.length?l[e](t,n,s):l[e](t,s)):s(t)};s(t)}};i(o,r),e.exports=o},function(e,t,n){'use strict';var i=n(2),r=n(12);e.exports=i(r)},function(e,t,n){'use strict';var i=n(2),r=n(1),o=n(12),s=i({initialize:function(e,t,n,i){this._client=e,this._channels=t,this._callback=n,this._context=i,this._cancelled=!1},withChannel:function(e,t){return this._withChannel=[e,t],this},apply:function(e,t){var n=t[0];this._callback&&this._callback.call(this._context,n.data),this._withChannel&&this._withChannel[0].call(this._withChannel[1],n.channel,n.data)},cancel:function(){this._cancelled||(this._client.unsubscribe(this._channels,this),this._cancelled=!0)},unsubscribe:function(){this.cancel()}});r(s.prototype,o),e.exports=s},function(e,t,n){'use strict';(function(t){function n(e){var t=Object.create(null),n,s,d,c,p,i;if(this[g]=t,!!e)if('string'==typeof e)for('?'===e.charAt(0)&&(e=e.slice(1)),c=e.split('&'),p=0,i=c.length;p<i;p++)d=c[p],n=d.indexOf('='),-1<n?r(t,o(d.slice(0,n)),o(d.slice(n+1))):d.length&&r(t,o(d),'');else if(l(e))for(p=0,i=e.length;p<i;p++)d=e[p],r(t,d[0],d[1]);else for(s in e)r(t,s,e[s])}function r(e,t,n){t in e?e[t].push(''+n):e[t]=l(n)?n:[''+n]}function o(e){return decodeURIComponent(e.replace(c,' '))}function s(e){return encodeURIComponent(e).replace(d,u)}var l=Array.isArray,i=n.prototype,d=/[!'\(\)~]|%20|%00/g,c=/\+/g,p={"!":'%21',"'":'%27',"(":'%28',")":'%29',"~":'%7E',"%20":'+',"%00":'\0'},u=function(e){return p[e]},g='__URLSearchParams__:'+Math.random();i.append=function(e,t){r(this[g],e,t)},i.delete=function(e){delete this[g][e]},i.get=function(e){var t=this[g];return e in t?t[e][0]:null},i.getAll=function(e){var t=this[g];return e in t?t[e].slice(0):[]},i.has=function(e){return e in this[g]},i.set=function(e,t){this[g][e]=[''+t]},i.forEach=function(e,t){var n=this[g];Object.getOwnPropertyNames(n).forEach(function(i){n[i].forEach(function(n){e.call(t,n,i,this)},this)},this)},i.toJSON=function(){return{}},i.toString=function(){var e=this[g],t=[],n,i,r,o;for(i in e)for(r=s(i),n=0,o=e[i];n<o.length;n++)t.push(r+'='+s(o[n]));return t.join('&')},n=e.exports=t.URLSearchParams||n,function(e){var t=function(){try{return!!Symbol.iterator}catch(e){return!1}}();'forEach'in e||(e.forEach=function(e,t){var n=Object.create(null);this.toString().replace(/=[\s\S]*?(?:&|$)/g,'=').split('=').forEach(function(i){!i.length||i in n||(n[i]=this.getAll(i)).forEach(function(n){e.call(t,n,i,this)},this)},this)}),'keys'in e||(e.keys=function(){var e=[];this.forEach(function(t,n){e.push(n)});var n={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return t&&(n[Symbol.iterator]=function(){return n}),n}),'values'in e||(e.values=function(){var e=[];this.forEach(function(t){e.push(t)});var n={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return t&&(n[Symbol.iterator]=function(){return n}),n}),'entries'in e||(e.entries=function(){var e=[];this.forEach(function(t,n){e.push([n,t])});var n={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return t&&(n[Symbol.iterator]=function(){return n}),n}),t&&!(Symbol.iterator in e)&&(e[Symbol.iterator]=e.entries),'sort'in e||(e.sort=function(){for(var e=this.entries(),t=e.next(),n=t.done,r=[],o=Object.create(null),s,i,l;!n;)l=t.value,i=l[0],r.push(i),i in o||(o[i]=[]),o[i].push(l[1]),t=e.next(),n=t.done;for(r.sort(),s=0;s<r.length;s++)this.delete(r[s]);for(s=0;s<r.length;s++)i=r[s],this.append(i,o[i].shift())})}(n.prototype)}).call(t,n(0))},function(e,t){'use strict';Object.defineProperty(t,'__esModule',{value:!0});var n={fullscreenEnabled:0,fullscreenElement:1,requestFullscreen:2,exitFullscreen:3,fullscreenchange:4,fullscreenerror:5},i=['webkitFullscreenEnabled','webkitFullscreenElement','webkitRequestFullscreen','webkitExitFullscreen','webkitfullscreenchange','webkitfullscreenerror'],r=['mozFullScreenEnabled','mozFullScreenElement','mozRequestFullScreen','mozCancelFullScreen','mozfullscreenchange','mozfullscreenerror'],o=['msFullscreenEnabled','msFullscreenElement','msRequestFullscreen','msExitFullscreen','MSFullscreenChange','MSFullscreenError'],s='undefined'!=typeof window&&'undefined'!=typeof window.document?window.document:{},l='fullscreenEnabled'in s&&Object.keys(n)||i[0]in s&&i||r[0]in s&&r||o[0]in s&&o||[];t.default={requestFullscreen:function(e){return e[l[n.requestFullscreen]]()},requestFullscreenFunction:function(e){return e[l[n.requestFullscreen]]},get exitFullscreen(){return s[l[n.exitFullscreen]].bind(s)},addEventListener:function(e,t,i){return s.addEventListener(l[n[e]],t,i)},removeEventListener:function(e,t,i){return s.removeEventListener(l[n[e]],t,i)},get fullscreenEnabled(){return!!s[l[n.fullscreenEnabled]]},set fullscreenEnabled(e){},get fullscreenElement(){return s[l[n.fullscreenElement]]},set fullscreenElement(e){},get onfullscreenchange(){return s[('on'+l[n.fullscreenchange]).toLowerCase()]},set onfullscreenchange(e){return s[('on'+l[n.fullscreenchange]).toLowerCase()]=e},get onfullscreenerror(){return s[('on'+l[n.fullscreenerror]).toLowerCase()]},set onfullscreenerror(e){return s[('on'+l[n.fullscreenerror]).toLowerCase()]=e}}}]);
//# sourceMappingURL=bundle.js.map