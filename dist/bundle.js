(function(e){function t(a){if(n[a])return n[a].exports;var i=n[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,a){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var n=e&&e.__esModule?function(){return e['default']}:function(){return e};return t.d(n,'a',n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p='',t(t.s=72)})([function(e){var t=function(){return this}();try{t=t||Function('return this')()||(1,eval)('this')}catch(n){'object'==typeof window&&(t=window)}e.exports=t},function(e){'use strict';e.exports=function(e,t,n){if(!t)return e;for(var a in t)t.hasOwnProperty(a)&&(e.hasOwnProperty(a)&&!1===n||e[a]===t[a]||(e[a]=t[a]));return e}},function(e,t,n){'use strict';var a=n(1);e.exports=function(e,t){'function'!=typeof e&&(t=e,e=Object);var n=function(){return this.initialize?this.initialize.apply(this,arguments)||this:this},i=function(){};return i.prototype=e.prototype,n.prototype=new i,a(n.prototype,t),n}},function(e,t,n){'use strict';function a(e,t){this._groups=e,this._parents=t}function i(){return new a([[document.documentElement]],O)}n.d(t,'b',function(){return O}),t.a=a;var r=n(80),o=n(81),s=n(83),l=n(85),d=n(32),c=n(87),p=n(88),u=n(89),g=n(90),h=n(91),m=n(92),_=n(93),y=n(94),f=n(95),v=n(96),b=n(97),x=n(98),E=n(99),S=n(100),k=n(101),w=n(102),C=n(103),T=n(104),I=n(105),N=n(106),L=n(107),M=n(108),A=n(109),D=n(110),O=[null];a.prototype=i.prototype={constructor:a,select:r.a,selectAll:o.a,filter:s.a,data:l.a,enter:d.b,exit:c.a,merge:p.a,order:u.a,sort:g.a,call:h.a,nodes:m.a,node:_.a,size:y.a,empty:f.a,each:v.a,attr:b.a,style:x.a,property:E.a,classed:S.a,text:k.a,html:w.a,raise:C.a,lower:T.a,append:I.a,insert:N.a,remove:L.a,datum:M.a,on:A.a,dispatch:D.a}},function(e){'use strict';e.exports={isURI:function(e){return e&&e.protocol&&e.host&&e.path},isSameOrigin:function(e){return e.protocol===location.protocol&&e.hostname===location.hostname&&e.port===location.port},parse:function(e){if('string'!=typeof e)return e;var t={},a=function(n,a){e=e.replace(a,function(e){return t[n]=e,''}),t[n]=t[n]||''},r,o,s,l,i,n;for(a('protocol',/^[a-z]+\:/i),a('host',/^\/\/[^\/\?#]+/),/^\//.test(e)||t.host||(e=location.pathname.replace(/[^\/]*$/,'')+e),a('pathname',/^[^\?#]*/),a('search',/^\?[^#]*/),a('hash',/^#.*/),t.protocol=t.protocol||location.protocol,t.host?(t.host=t.host.substr(2),r=t.host.split(':'),t.hostname=r[0],t.port=r[1]||''):(t.host=location.host,t.hostname=location.hostname,t.port=location.port),t.pathname=t.pathname||'/',t.path=t.pathname+t.search,o=t.search.replace(/^\?/,''),s=o?o.split('&'):[],n={},(l=0,i=s.length);l<i;l++)r=s[l].split('='),n[decodeURIComponent(r[0]||'')]=decodeURIComponent(r[1]||'');return t.query=n,t.href=this.stringify(t),t},stringify:function(e){var t=e.protocol+'//'+e.hostname;return e.port&&(t+=':'+e.port),t+=e.pathname+this.queryString(e.query)+(e.hash||''),t},queryString:function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(encodeURIComponent(n)+'='+encodeURIComponent(e[n]));return 0===t.length?'':'?'+t.join('&')}}},function(e,t){'use strict';t.a=function(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}},function(e,t,n){'use strict';var a=n(21);n.d(t,'a',function(){return a.e}),n.d(t,'f',function(){return a.g}),n.d(t,'d',function(){return a.f});var i=n(128);n.d(t,'e',function(){return i.a}),n.d(t,'c',function(){return i.b});var r=n(129);n.d(t,'b',function(){return r.a})},function(e,t,n){'use strict';(function(t){var a=n(2),r=n(68).Cookie,i=n(15),o=n(4),s=n(26),l=n(1),d=n(10),c=n(168),p=n(66),u=l(a({className:'Transport',DEFAULT_PORTS:{"http:":80,"https:":443,"ws:":80,"wss:":443},MAX_DELAY:0,batching:!0,initialize:function(e,t){this._dispatcher=e,this.endpoint=t,this._outbox=[],this._proxy=l({},this._dispatcher.proxy),this._proxy.origin||(this._proxy.origin=this._findProxy())},close:function(){},encode:function(){return''},sendMessage:function(e){return(this.debug('Client ? sending message to ?: ?',this._dispatcher.clientId,o.stringify(this.endpoint),e),!this.batching)?i.resolve(this.request([e])):(this._outbox.push(e),this._flushLargeBatch(),e.channel===p.HANDSHAKE)?this._publish(0.01):(e.channel===p.CONNECT&&(this._connectMessage=e),this._publish(this.MAX_DELAY))},_makePromise:function(){var e=this;this._requestPromise=this._requestPromise||new i(function(t){e._resolvePromise=t})},_publish:function(e){return this._makePromise(),this.addTimeout('publish',e,function(){this._flush(),delete this._requestPromise},this),this._requestPromise},_flush:function(){this.removeTimeout('publish'),1<this._outbox.length&&this._connectMessage&&(this._connectMessage.advice={timeout:0}),this._resolvePromise(this.request(this._outbox)),this._connectMessage=null,this._outbox=[]},_flushLargeBatch:function(){var e=this.encode(this._outbox);if(!(e.length<this._dispatcher.maxRequestSize)){var t=this._outbox.pop();this._makePromise(),this._flush(),t&&this._outbox.push(t)}},_receive:function(e){if(e){e=[].concat(e),this.debug('Client ? received from ? via ?: ?',this._dispatcher.clientId,o.stringify(this.endpoint),this.connectionType,e);for(var t=0,a=e.length;t<a;t++)this._dispatcher.handleResponse(e[t])}},_handleError:function(e){e=[].concat(e),this.debug('Client ? failed to send to ? via ?: ?',this._dispatcher.clientId,o.stringify(this.endpoint),this.connectionType,e);for(var t=0,a=e.length;t<a;t++)this._dispatcher.handleError(e[t])},_getCookies:function(){var e=this._dispatcher.cookies,t=o.stringify(this.endpoint);return e?s.map(e.getCookiesSync(t),function(e){return e.cookieString()}).join('; '):''},_storeCookies:function(e){var t=this._dispatcher.cookies,a=o.stringify(this.endpoint),s;if(e&&t){e=[].concat(e);for(var l=0,i=e.length;l<i;l++)s=r.parse(e[l]),t.setCookieSync(s,a)}},_findProxy:function(){if('undefined'!=typeof t){var e=this.endpoint.protocol;if(e){var n=e.replace(/:$/,'').toLowerCase()+'_proxy',a=n.toUpperCase(),i=t.env,r,o;return'http_proxy'==n&&i.REQUEST_METHOD?(r=Object.keys(i).filter(function(e){return /^http_proxy$/i.test(e)}),1===r.length?r[0]===n&&void 0===i[a]&&(o=i[n]):1<r.length&&(o=i[n]),o=o||i['CGI_'+a]):(o=i[n]||i[a],o&&!i[n]&&console.warn('The environment variable '+a+' is discouraged. Use '+n+'.')),o}}}}),{get:function(e,t,n,a,i){var r=e.endpoint;s.asyncEach(this._transports,function(r,o){var l=r[0],d=r[1],c=e.endpointFor(l);return 0<=s.indexOf(n,l)?o():0>s.indexOf(t,l)?(d.isUsable(e,c,function(){}),o()):void d.isUsable(e,c,function(t){if(!t)return o();var n=d.hasOwnProperty('create')?d.create(e,c):new d(e,c);a.call(i,n)})},function(){throw new Error('Could not find a usable connection type for '+o.stringify(r))})},register:function(e,t){this._transports.push([e,t]),t.prototype.connectionType=e},getConnectionTypes:function(){return s.map(this._transports,function(e){return e[0]})},_transports:[]});l(u.prototype,d),l(u.prototype,c),e.exports=u}).call(t,n(167))},function(e,t){'use strict';t.a=function(e){return null===e?NaN:+e}},function(e,t,n){'use strict';function i(e,n){return function(a){return e+a*n}}function r(e,n,a){return e=o(e,a),n=o(n,a)-e,a=1/a,function(i){return o(e+i*n,a)}}function a(e,t){var n=t-e;return n?i(e,n):Object(s.a)(isNaN(e)?t:e)}var o=Math.pow;t.c=function(e,t){var n=t-e;return n?i(e,180<n||-180>n?n-360*Math.round(n/360):n):Object(s.a)(isNaN(e)?t:e)},t.b=function(e){return 1==(e=+e)?a:function(t,n){return n-t?r(t,n,e):Object(s.a)(isNaN(t)?n:t)}},t.a=a;var s=n(53)},function(e,t,n){'use strict';var a=n(11),i={LOG_LEVELS:{fatal:4,error:3,warn:2,info:1,debug:0},writeLog:function(e,t){var n=i.logger||(i.wrapper||i).logger;if(n){var r=Array.prototype.slice.apply(e),o='[Faye',s=this.className,l=r.shift().replace(/\?/g,function(){try{return a(r.shift())}catch(e){return'[Object]'}});s&&(o+='.'+s),o+='] ','function'==typeof n[t]?n[t](o+l):'function'==typeof n&&n(o+l)}}};for(var r in i.LOG_LEVELS)(function(e){i[e]=function(){this.writeLog(arguments,e)}})(r);e.exports=i},function(e){'use strict';e.exports=function(e){return JSON.stringify(e,function(e,t){return this[e]instanceof Array?this[e]:t})}},function(e,t,n){'use strict';(function(t){var a=n(15);e.exports={then:function(e,t){var n=this;return this._promise||(this._promise=new a(function(e,t){n._resolve=e,n._reject=t})),0===arguments.length?this._promise:this._promise.then(e,t)},callback:function(e,t){return this.then(function(n){e.call(t,n)})},errback:function(e,t){return this.then(null,function(n){e.call(t,n)})},timeout:function(e,n){this.then();var a=this;this._timer=t.setTimeout(function(){a._reject(n)},1e3*e)},setDeferredStatus:function(e,n){this._timer&&t.clearTimeout(this._timer),this.then(),'succeeded'===e?this._resolve(n):'failed'===e?this._reject(n):delete this._promise}}}).call(t,n(0))},function(e,t){'use strict';t.a=function(e,n){return e=+e,n-=e,function(a){return e+n*a}}},function(e,t,n){'use strict';var a=n(24);t.a=function(e){return e=Object(a.a)(Math.abs(e)),e?e[1]:NaN}},function(e,t,n){'use strict';var a=n(65),i=0,r=1,o=2,s=function(e){return e},l=function(e){throw e},d=function(e){if(this._state=i,this._onFulfilled=[],this._onRejected=[],'function'==typeof e){var t=this;e(function(e){h(t,e)},function(e){_(t,e)})}};d.prototype.then=function(e,t){var n=new d;return c(this,e,n),p(this,t,n),n},d.prototype['catch']=function(e){return this.then(null,e)};var c=function(e,t,n){'function'!=typeof t&&(t=s);var a=function(e){u(t,e,n)};e._state===i?e._onFulfilled.push(a):e._state===r&&a(e._value)},p=function(e,t,n){'function'!=typeof t&&(t=l);var a=function(e){u(t,e,n)};e._state===i?e._onRejected.push(a):e._state===o&&a(e._reason)},u=function(e,t,n){a(function(){g(e,t,n)})},g=function(e,t,n){var a;try{a=e(t)}catch(e){return _(n,e)}a===n?_(n,new TypeError('Recursive promise chain detected')):h(n,a)},h=function(e,t){var n=!1,a,i;try{if(a=typeof t,i=null!==t&&('function'===a||'object'===a)&&t.then,'function'!=typeof i)return m(e,t);i.call(t,function(t){n^(n=!0)&&h(e,t)},function(t){n^(n=!0)&&_(e,t)})}catch(t){if(!(n^(n=!0)))return;_(e,t)}},m=function(e,t){if(e._state===i){e._state=r,e._value=t,e._onRejected=[];for(var n=e._onFulfilled,a;a=n.shift();)a(t)}},_=function(e,t){if(e._state===i){e._state=o,e._reason=t,e._onFulfilled=[];for(var n=e._onRejected,a;a=n.shift();)a(t)}};d.resolve=function(e){return new d(function(t){t(e)})},d.reject=function(e){return new d(function(t,n){n(e)})},d.all=function(e){return new d(function(t,a){var r=[],o=e.length,n;if(0===o)return t(r);for(n=0;n<o;n++)(function(e,n){d.resolve(e).then(function(e){r[n]=e,0==--o&&t(r)},a)})(e[n],n)})},d.race=function(e){return new d(function(t,a){for(var r=0,i=e.length;r<i;r++)d.resolve(e[r]).then(t,a)})},d.deferred=d.pending=function(){var e={};return e.promise=new d(function(t,n){e.resolve=t,e.reject=n}),e},e.exports=d},function(e,t){'use strict';t.d=function(e){return new Promise((t)=>setTimeout(t,e))},t.b=function(e){return new Promise(function(t,n){let a=new FileReader;a.onload=(n)=>{t(n.target.result)},a.onerror=(t)=>{n(t.target.error)},a.readAsText(e,'UTF-8')})},t.c=function(e){return new Promise(function(t){let n=!1,a=(i)=>{e.removeEventListener('characteristicvaluechanged',a),e.stopNotifications(),n||(n=!0,t(i.target.value))};e.addEventListener('characteristicvaluechanged',a),e.startNotifications()})},t.a=function(e){let t=e.getUTCMonth()+1;t=10>t?'0'+t:t;let n=e.getUTCDate();n=10>n?'0'+n:n;let a=e.getUTCHours();a=10>a?'0'+a:a;let i=e.getUTCMinutes();i=10>i?'0'+i:i;let r=e.getUTCSeconds();return r=10>r?'0'+r:r,e.getUTCFullYear()+'-'+t+'-'+n+'T'+a+':'+i+':'+r+'Z'}},function(e,t,n){'use strict';var a=n(38);n.d(t,'a',function(){return a.a});var i=n(5),r=n(39),o=n(112),s=n(113),l=n(41),d=n(18),c=n(114),p=n(117),u=n(118),g=n(46),h=n(119),m=n(120),_=n(121),y=n(122),f=n(47),v=n(40),b=n(123),x=n(19),E=n(44),S=n(124),k=n(125),w=n(126),C=n(45);n.d(t,'d',function(){return C.a}),n.d(t,'b',function(){return C.b}),n.d(t,'c',function(){return C.c});var T=n(48),I=n(42),N=n(127)},function(e,t){'use strict';t.a=function(e,t){var a=e.length,n=-1,i,r,o;if(null==t){for(;++n<a;)if(null!=(i=e[n])&&i>=i)for(r=o=i;++n<a;)null!=(i=e[n])&&(r>i&&(r=i),o<i&&(o=i));}else for(;++n<a;)if(null!=(i=t(e[n],n,e))&&i>=i)for(r=o=i;++n<a;)null!=(i=t(e[n],n,e))&&(r>i&&(r=i),o<i&&(o=i));return[r,o]}},function(e,t,n){'use strict';var a=n(8);t.a=function(e,t,r){if(null==r&&(r=a.a),!!(d=e.length)){if(0>=(t=+t)||2>d)return+r(e[0],0,e);if(1<=t)return+r(e[d-1],d-1,e);var o=(d-1)*t,i=Math.floor(o),s=+r(e[i],i,e),l=+r(e[i+1],i+1,e),d;return s+(l-s)*(o-i)}}},function(e,t,n){'use strict';var i=n(6),r=n(51),o=n(54),s=n(55),l=n(13),d=n(56),p=n(57),u=n(53);t.a=function(e,n){var a=typeof n,t;return null==n||'boolean'==a?Object(u.a)(n):('number'==a?l.a:'string'==a?(t=Object(i.a)(n))?(n=t,r.a):p.a:n instanceof i.a?r.a:n instanceof Date?s.a:Array.isArray(n)?o.a:'function'!=typeof n.valueOf&&'function'!=typeof n.toString||isNaN(n)?d.a:l.a)(e,n)}},function(e,t,n){'use strict';function a(){}function i(e){var t;return e=(e+'').trim().toLowerCase(),(t=E.exec(e))?(t=parseInt(t[1],16),new d(15&t>>8|240&t>>4,15&t>>4|240&t,(15&t)<<4|15&t,1)):(t=S.exec(e))?r(parseInt(t[1],16)):(t=k.exec(e))?new d(t[1],t[2],t[3],1):(t=w.exec(e))?new d(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=C.exec(e))?o(t[1],t[2],t[3],t[4]):(t=T.exec(e))?o(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=I.exec(e))?c(t[1],t[2]/100,t[3]/100,1):(t=N.exec(e))?c(t[1],t[2]/100,t[3]/100,t[4]):L.hasOwnProperty(e)?r(L[e]):'transparent'===e?new d(NaN,NaN,NaN,0):null}function r(e){return new d(255&e>>16,255&e>>8,255&e,1)}function o(e,t,n,i){return 0>=i&&(e=t=n=NaN),new d(e,t,n,i)}function s(e){return(e instanceof a||(e=i(e)),!e)?new d:(e=e.rgb(),new d(e.r,e.g,e.b,e.opacity))}function l(e,t,n,a){return 1===arguments.length?s(e):new d(e,t,n,null==a?1:a)}function d(e,t,n,a){this.r=+e,this.g=+t,this.b=+n,this.opacity=+a}function c(e,t,n,i){return 0>=i?e=t=n=NaN:0>=n||1<=n?e=t=NaN:0>=t&&(e=NaN),new m(e,t,n,i)}function p(e){if(e instanceof m)return new m(e.h,e.s,e.l,e.opacity);if(e instanceof a||(e=i(e)),!e)return new m;if(e instanceof m)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,d=y(t,n,r),c=_(t,n,r),p=NaN,u=c-d,s=(c+d)/2;return u?(p=t===c?(n-r)/u+6*(n<r):n===c?(r-t)/u+2:(t-n)/u+4,u/=0.5>s?c+d:2-c-d,p*=60):u=0<s&&1>s?0:p,new m(p,u,s,e.opacity)}function u(e,t,n,a){return 1===arguments.length?p(e):new m(e,t,n,null==a?1:a)}function m(e,t,n,a){this.h=+e,this.s=+t,this.l=+n,this.opacity=+a}function g(e,t,n){return 255*(60>e?t+(n-t)*e/60:180>e?n:240>e?t+(n-t)*(240-e)/60:t)}var _=Math.max,y=Math.min,h=Math.round,f=Math.pow;t.a=a,n.d(t,'d',function(){return b}),n.d(t,'c',function(){return x}),t.e=i,t.h=s,t.g=l,t.b=d,t.f=u;var v=n(22),b=0.7,x=1/b,E=/^#([0-9a-f]{3})$/,S=/^#([0-9a-f]{6})$/,k=/^rgb\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*\)$/,w=/^rgb\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*\)$/,C=/^rgba\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,T=/^rgba\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,I=/^hsl\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*\)$/,N=/^hsla\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,L={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Object(v.a)(a,i,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+''}}),Object(v.a)(d,l,Object(v.b)(a,{brighter:function(e){return e=null==e?x:f(x,e),new d(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?b:f(b,e),new d(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&255>=this.r&&0<=this.g&&255>=this.g&&0<=this.b&&255>=this.b&&0<=this.opacity&&1>=this.opacity},toString:function(){var e=this.opacity;return e=isNaN(e)?1:_(0,y(1,e)),(1===e?'rgb(':'rgba(')+_(0,y(255,h(this.r)||0))+', '+_(0,y(255,h(this.g)||0))+', '+_(0,y(255,h(this.b)||0))+(1===e?')':', '+e+')')}})),Object(v.a)(m,u,Object(v.b)(a,{brighter:function(e){return e=null==e?x:f(x,e),new m(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?b:f(b,e),new m(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(0>this.h),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,a=n+(0.5>n?n:1-n)*t,i=2*n-a;return new d(g(240<=e?e-240:e+120,i,a),g(e,i,a),g(120>e?e+240:e-120,i,a),this.opacity)},displayable:function(){return(0<=this.s&&1>=this.s||isNaN(this.s))&&0<=this.l&&1>=this.l&&0<=this.opacity&&1>=this.opacity}}))},function(e,t){'use strict';t.b=function(e,t){var n=Object.create(e.prototype);for(var a in t)n[a]=t[a];return n},t.a=function(e,t,n){e.prototype=t.prototype=n,n.constructor=e}},function(e,t){'use strict';function a(e,t,n,a,i){var r=e*e,o=r*e;return((1-3*e+3*r-o)*t+(4-6*r+3*o)*n+(1+3*e+3*r-3*o)*a+o*i)/6}t.a=a,t.b=function(e){var r=e.length-1;return function(n){var t=0>=n?n=0:1<=n?(n=1,r-1):Math.floor(n*r),i=e[t],o=e[t+1],s=0<t?e[t-1]:2*i-o,l=t<r-1?e[t+2]:2*o-i;return a((n-t/r)*r,s,i,o,l)}}},function(e,t){'use strict';t.a=function(e,t){if(0>(a=(e=t?e.toExponential(t-1):e.toExponential()).indexOf('e')))return null;var n=e.slice(0,a),a;return[1<n.length?n[0]+n.slice(2):n,+e.slice(a+1)]}},function(e,t,n){'use strict';var a=n(156),i=n.n(a);const r={container:(e)=>{return JSON.parse(localStorage.getItem(e))||[]},unshift:(e,t)=>{let n=r.container(e);n=n.filter((e)=>e!==t),n.unshift(t),localStorage.setItem(e,JSON.stringify(n))},remove:(e,t)=>{let n=r.container(e);n=n.filter((e)=>e!==t),localStorage.removeItem(t),localStorage.setItem(e,JSON.stringify(n))},add:(e,t,n)=>{let a=r.container(e);if(a.unshift(t),3<a.length){let e=a.pop();localStorage.removeItem(e)}localStorage.setItem(e,JSON.stringify(a)),r.set(t,n)},set:(e,t)=>{let n=t;'toJSON'in t&&(n=t.toJSON()),localStorage.setItem(e,i.a.compressToUTF16(JSON.stringify(n)))},get:(e)=>{let t=localStorage.getItem(e);return void 0!==t&&null!==t?JSON.parse(i.a.decompressFromUTF16(t)):t}};t.a=r},function(e){'use strict';e.exports={commonElement:function(e,t){for(var a=0,i=e.length;a<i;a++)if(-1!==this.indexOf(t,e[a]))return e[a];return null},indexOf:function(e,t){if(e.indexOf)return e.indexOf(t);for(var a=0,i=e.length;a<i;a++)if(e[a]===t)return a;return-1},map:function(e,t,a){if(e.map)return e.map(t,a);var r=[];if(e instanceof Array)for(var o=0,i=e.length;o<i;o++)r.push(t.call(a||null,e[o],o));else for(var n in e)e.hasOwnProperty(n)&&r.push(t.call(a||null,n,e[n]));return r},filter:function(e,t,a){if(e.filter)return e.filter(t,a);for(var r=[],o=0,i=e.length;o<i;o++)t.call(a||null,e[o],o)&&r.push(e[o]);return r},asyncEach:function(e,t,a,r){var o=e.length,n=-1,i=0,s=!1,l=function(){return i-=1,n+=1,n===o?a&&a.call(r):void t(e[n],c)},d=function(){if(!s){for(s=!0;0<i;)l();s=!1}},c=function(){i+=1,d()};c()}}},function(e,t,n){'use strict';(function(t){var n={_registry:[],on:function(e,t,n,a){var i=function(){n.call(a)};e.addEventListener?e.addEventListener(t,i,!1):e.attachEvent('on'+t,i),this._registry.push({_element:e,_type:t,_callback:n,_context:a,_handler:i})},detach:function(e,t,n,a){for(var r=this._registry.length,i;r--;)i=this._registry[r],e&&e!==i._element||t&&t!==i._type||n&&n!==i._callback||a&&a!==i._context||(i._element.removeEventListener?i._element.removeEventListener(i._type,i._handler,!1):i._element.detachEvent('on'+i._type,i._handler),this._registry.splice(r,1),i=null)}};t.onunload!==void 0&&n.on(t,'unload',n.detach,n),e.exports={Event:n}}).call(t,n(0))},function(e,t,n){'use strict';var a=n(1),i=n(164),r={countListeners:function(e){return this.listeners(e).length},bind:function(e,t,n){var a=Array.prototype.slice,i=function(){t.apply(n,a.call(arguments))};return this._listeners=this._listeners||[],this._listeners.push([e,t,n,i]),this.on(e,i)},unbind:function(e,t,a){this._listeners=this._listeners||[];for(var i=this._listeners.length,n;i--;)n=this._listeners[i],n[0]!==e||t&&(n[1]!==t||n[2]!==a)||(this._listeners.splice(i,1),this.removeListener(e,n[3]))}};a(r,i.prototype),r.trigger=r.emit,e.exports=r},function(e){'use strict';var t=function(e){var n,a,i;if(e instanceof Array){for(n=[],a=e.length;a--;)n[a]=t(e[a]);return n}if('object'==typeof e){for(i in n=null===e?null:{},e)n[i]=t(e[i]);return n}return e};e.exports=t},function(e,t){'use strict';t.a=function(e){return new Promise(function(t,n){i.geocode({location:e},function(e,a){'OK'===a?t(e):n(new Error(a))})})},t.c=function(e,t){return new Promise(function(n,i){a.getPanorama({location:e,radius:t},(e,t)=>{t==google.maps.StreetViewStatus.OK?n(e):i(new Error(t))})})},t.b=function(e){return new Promise(function(t,a){n.getElevationAlongPath(e,(e,n)=>{n==google.maps.ElevationStatus.OK?t(e):a(new Error(n))})})};let n=new google.maps.ElevationService,a=new google.maps.StreetViewService,i=new google.maps.Geocoder},function(e,t){'use strict';function n(){}t.a=function(e){return null==e?n:function(){return this.querySelector(e)}}},function(e,t,n){'use strict';function a(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}t.a=a;var i=n(33),r=n(3);t.b=function(){return new r.a(this._enter||this._groups.map(i.a),this._parents)},a.prototype={constructor:a,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}}},function(e,t){'use strict';t.a=function(e){return Array(e.length)}},function(e,t,n){'use strict';var a=n(35);t.a=function(e){var t=e+='',n=t.indexOf(':');return 0<=n&&'xmlns'!==(t=e.slice(0,n))&&(e=e.slice(n+1)),a.a.hasOwnProperty(t)?{space:a.a[t],local:e}:e}},function(e,t,n){'use strict';n.d(t,'b',function(){return a});var a='http://www.w3.org/1999/xhtml';t.a={svg:'http://www.w3.org/2000/svg',xhtml:a,xlink:'http://www.w3.org/1999/xlink',xml:'http://www.w3.org/XML/1998/namespace',xmlns:'http://www.w3.org/2000/xmlns/'}},function(e,t){'use strict';t.a=function(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}},function(e,t,n){'use strict';function a(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===o.b&&t.documentElement.namespaceURI===o.b?t.createElement(e):t.createElementNS(n,e)}}function i(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}var r=n(34),o=n(35);t.a=function(e){var t=Object(r.a)(e);return(t.local?i:a)(t)}},function(e,t,n){'use strict';var a=n(5),i=n(39),r=Object(i.a)(a.a),o=r.right,s=r.left;t.a=o},function(e,t,n){'use strict';function a(e){return function(t,n){return Object(i.a)(e(t),n)}}var i=n(5);t.a=function(e){return 1===e.length&&(e=a(e)),{left:function(t,n,a,i){for(null==a&&(a=0),null==i&&(i=t.length);a<i;){var r=a+i>>>1;0>e(t[r],n)?a=r+1:i=r}return a},right:function(t,n,a,i){for(null==a&&(a=0),null==i&&(i=t.length);a<i;){var r=a+i>>>1;0<e(t[r],n)?i=r:a=r+1}return a}}}},function(e,t){'use strict';function n(e,t){return[e,t]}t.a=n},function(e,t,n){'use strict';var a=n(42);t.a=function(e,t){var n=Object(a.a)(e,t);return n?Math.sqrt(n):n}},function(e,t,n){'use strict';var a=n(8);t.a=function(e,t){var r=e.length,n=0,o=-1,i=0,s=0,l,d;if(null==t)for(;++o<r;)isNaN(l=Object(a.a)(e[o]))||(d=l-i,i+=d/++n,s+=d*(l-i));else for(;++o<r;)isNaN(l=Object(a.a)(t(e[o],o,e)))||(d=l-i,i+=d/++n,s+=d*(l-i));return 1<n?s/(n-1):void 0}},function(e,t,n){'use strict';n.d(t,'b',function(){return i}),n.d(t,'a',function(){return r});var a=Array.prototype,i=a.slice,r=a.map},function(e,t){'use strict';t.a=function(e,t,a){e=+e,t=+t,a=2>(i=arguments.length)?(t=e,e=0,1):3>i?1:+a;for(var r=-1,i=0|Math.max(0,Math.ceil((t-e)/a)),n=Array(i);++r<i;)n[r]=e+r*a;return n}},function(e,t){'use strict';function a(e,t,a){var r=(t-e)/o(0,a),u=s(i(r)/n),g=r/l(10,u);return 0<=u?(g>=d?10:g>=c?5:g>=p?2:1)*l(10,u):-l(10,-u)/(g>=d?10:g>=c?5:g>=p?2:1)}var n=Math.LN10,i=Math.log,r=Math.ceil,o=Math.max,s=Math.floor,l=Math.pow;t.b=a,t.c=function(e,t,a){var r=Math.abs(t-e)/o(0,a),u=l(10,s(i(r)/n)),g=r/u;return g>=d?u*=10:g>=c?u*=5:g>=p&&(u*=2),t<e?-u:u};var d=7.0710678118654755,c=3.1622776601683795,p=1.4142135623730951;t.a=function(e,t,o){var l=t<e,d=-1,i,n,c;if(l&&(i=e,e=t,t=i),0===(c=a(e,t,o))||!isFinite(c))return[];if(0<c)for(e=r(e/c),t=s(t/c),n=Array(i=r(t-e+1));++d<i;)n[d]=(e+d)*c;else for(e=s(e*c),t=r(t*c),n=Array(i=r(e-t+1));++d<i;)n[d]=(e-d)/c;return l&&n.reverse(),n}},function(e,t){'use strict';t.a=function(e){return Math.ceil(Math.log(e.length)/Math.LN2)+1}},function(e,t){'use strict';t.a=function(e,t){var a=e.length,n=-1,i,r;if(null==t){for(;++n<a;)if(null!=(i=e[n])&&i>=i)for(r=i;++n<a;)null!=(i=e[n])&&r>i&&(r=i);}else for(;++n<a;)if(null!=(i=t(e[n],n,e))&&i>=i)for(r=i;++n<a;)null!=(i=t(e[n],n,e))&&r>i&&(r=i);return r}},function(e,t,n){'use strict';function a(e){return e.length}var r=n(47);t.a=function(e){if(!(d=e.length))return[];for(var t=-1,i=Object(r.a)(e,a),o=Array(i);++t<i;)for(var s=-1,l=o[t]=Array(d),d;++s<d;)l[s]=e[s][t];return o}},function(e,t,n){'use strict';var a=n(20);n.d(t,'a',function(){return a.a});var i=n(54),r=n(23),o=n(52),s=n(55),l=n(13);n.d(t,'b',function(){return l.a});var d=n(56),c=n(130);n.d(t,'c',function(){return c.a});var p=n(57),u=n(131),g=n(134),h=n(51),m=n(135),_=n(136),y=n(137),f=n(138),v=n(139)},function(e,t,n){'use strict';var a=Math.PI;n.d(t,'a',function(){return i}),n.d(t,'b',function(){return r});var i=a/180,r=180/a},function(e,t,n){'use strict';function a(e){return function(t){var a=t.length,n=Array(a),r=Array(a),s=Array(a),l,i;for(l=0;l<a;++l)i=Object(o.f)(t[l]),n[l]=i.r||0,r[l]=i.g||0,s[l]=i.b||0;return n=e(n),r=e(r),s=e(s),i.opacity=1,function(e){return i.r=n(e),i.g=r(e),i.b=s(e),i+''}}}var o=n(6),i=n(23),r=n(52),s=n(9);t.a=function e(t){function n(e,t){var n=a((e=Object(o.f)(e)).r,(t=Object(o.f)(t)).r),i=a(e.g,t.g),r=a(e.b,t.b),l=Object(s.a)(e.opacity,t.opacity);return function(a){return e.r=n(a),e.g=i(a),e.b=r(a),e.opacity=l(a),e+''}}var a=Object(s.b)(t);return n.gamma=e,n}(1);var l=a(i.b),d=a(r.a)},function(e,t,n){'use strict';var a=n(23);t.a=function(e){var r=e.length;return function(n){var t=Math.floor((0>(n%=1)?++n:n)*r),i=e[(t+r-1)%r],o=e[t%r],s=e[(t+1)%r],l=e[(t+2)%r];return Object(a.a)((n-t/r)*r,i,o,s,l)}}},function(e,t){'use strict';t.a=function(e){return function(){return e}}},function(e,t,n){'use strict';var r=n(20);t.a=function(e,t){var n=t?t.length:0,a=e?Math.min(n,e.length):0,o=Array(n),s=Array(n),l;for(l=0;l<a;++l)o[l]=Object(r.a)(e[l],t[l]);for(;l<n;++l)s[l]=t[l];return function(e){for(l=0;l<a;++l)s[l]=o[l](e);return s}}},function(e,t){'use strict';t.a=function(e,n){var i=new Date;return e=+e,n-=e,function(a){return i.setTime(e+n*a),i}}},function(e,t,n){'use strict';var r=n(20);t.a=function(e,t){var n={},i={},o;for(o in(null===e||'object'!=typeof e)&&(e={}),(null===t||'object'!=typeof t)&&(t={}),t)o in e?n[o]=Object(r.a)(e[o],t[o]):i[o]=t[o];return function(e){for(o in n)i[o]=n[o](e);return i}}},function(e,t,n){'use strict';function r(e){return function(){return e}}function o(e){return function(n){return e(n)+''}}var l=n(13),d=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,c=new RegExp(d.source,'g');t.a=function(e,n){var t=d.lastIndex=c.lastIndex=0,a=-1,p=[],s=[],u,g,h;for(e+='',n+='';(u=d.exec(e))&&(g=c.exec(n));)(h=g.index)>t&&(h=n.slice(t,h),p[a]?p[a]+=h:p[++a]=h),(u=u[0])===(g=g[0])?p[a]?p[a]+=g:p[++a]=g:(p[++a]=null,s.push({i:a,x:Object(l.a)(u,g)})),t=c.lastIndex;return t<n.length&&(h=n.slice(t),p[a]?p[a]+=h:p[++a]=h),2>p.length?s[0]?o(s[0].x):r(n):(n=s.length,function(e){for(var t=0,a;t<n;++t)p[(a=s[t]).i]=a.x(e);return p.join('')})}},function(e,t,n){'use strict';var a=Math.max,i=Math.min,r=n(14),o=n(147),s=n(148),l=n(59),d=n(60),p=n(61),c=n(151),u=['y','z','a','f','p','n','\xB5','m','','k','M','G','T','P','E','Z','Y'];t.a=function(e){function t(e){function t(e){var t=E,a=S,l,i,n;if('c'===x)a=k(e)+a,e='';else{e=+e;var d=0>e;if(e=k(Math.abs(e),b),d&&0==+e&&(d=!1),t=(d?'('===s?s:'-':'-'===s||'('===s?'':s)+t,a=a+('s'===x?u[8+p.b/3]:'')+(d&&'('===s?')':''),w)for(l=-1,i=e.length;++l<i;)if(n=e.charCodeAt(l),48>n||57<n){a=(46===n?h+e.slice(l+1):e.slice(l))+a,e=e.slice(0,l);break}}v&&!y&&(e=g(e,Infinity));var c=t.length+e.length+a.length,_=c<f?Array(f-c+1).join(r):'';switch(v&&y&&(e=g(_+e,_.length?f-a.length:Infinity),_=''),o){case'<':e=t+e+a+_;break;case'=':e=t+_+e+a;break;case'^':e=_.slice(0,c=_.length>>1)+t+e+a+_.slice(c);break;default:e=_+t+e+a;}return m(e)}e=Object(l.a)(e);var r=e.fill,o=e.align,s=e.sign,c=e.symbol,y=e.zero,f=e.width,v=e.comma,b=e.precision,x=e.type,E='$'===c?n[0]:'#'===c&&/[boxX]/.test(x)?'0'+x.toLowerCase():'',S='$'===c?n[1]:/[%p]/.test(x)?_:'',k=d.a[x],w=!x||/[defgprs%]/.test(x);return b=null==b?x?6:12:/[gprs]/.test(x)?a(1,i(21,b)):a(0,i(20,b)),t.toString=function(){return e+''},t}var g=e.grouping&&e.thousands?Object(o.a)(e.grouping,e.thousands):c.a,n=e.currency,h=e.decimal,m=e.numerals?Object(s.a)(e.numerals):c.a,_=e.percent||'%';return{format:t,formatPrefix:function(n,o){var s=t((n=Object(l.a)(n),n.type='f',n)),d=3*a(-8,i(8,Math.floor(Object(r.a)(o)/3))),c=Math.pow(10,-d),p=u[8+d/3];return function(e){return s(c*e)+p}}}}},function(e,t,n){'use strict';function a(e){return new i(e)}function i(e){if(!(u=s.exec(e)))throw new Error('invalid format: '+e);var t=u[1]||' ',n=u[2]||'>',a=u[3]||'-',i=u[4]||'',r=!!u[5],l=u[6]&&+u[6],d=!!u[7],c=u[8]&&+u[8].slice(1),p=u[9]||'',u;'n'===p?(d=!0,p='g'):!o.a[p]&&(p=''),(r||'0'===t&&'='===n)&&(r=!0,t='0',n='='),this.fill=t,this.align=n,this.sign=a,this.symbol=i,this.zero=r,this.width=l,this.comma=d,this.precision=c,this.type=p}var r=Math.max;t.a=a;var o=n(60),s=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;a.prototype=i.prototype,i.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?'0':'')+(null==this.width?'':r(1,0|this.width))+(this.comma?',':'')+(null==this.precision?'':'.'+r(0,0|this.precision))+this.type}},function(e,t,n){'use strict';var a=Math.round,i=n(149),r=n(61),o=n(150);t.a={"":i.a,"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return a(e).toString(2)},c:function(e){return e+''},d:function(e){return a(e).toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return a(e).toString(8)},p:function(e,t){return Object(o.a)(100*e,t)},r:o.a,s:r.a,X:function(e){return a(e).toString(16).toUpperCase()},x:function(e){return a(e).toString(16)}}},function(e,t,n){'use strict';var a=Math.max;n.d(t,'b',function(){return o});var r=n(24),o;t.a=function(e,t){var s=Object(r.a)(e,t);if(!s)return e+'';var l=s[0],c=s[1],p=c-(o=3*a(-8,Math.min(8,Math.floor(c/3))))+1,i=l.length;return p===i?l:p>i?l+Array(p-i+1).join('0'):0<p?l.slice(0,p)+'.'+l.slice(p):'0.'+Array(1-p).join('0')+Object(r.a)(e,a(0,t+p-1))[0]}},function(e,t){'use strict';t.a={STRAVA_CLIENT_ID:'19775',STRAVA_CLIENT_SECRET:'d1fd34e8c88fc5611ff41d9361e0668e9fe676f0',STRAVA_ACCESS_TOKEN:'b4eb2c4a2517d2b916583bcbeec2aa2f6a22a8b2'}},function(e,t,n){'use strict';var a=n(155),i=n(16),r=n(30),o=n(25),s=n(157),l=n.n(s);class d{constructor({elevation:e,grade:t,smoothedGrade:n,distance:a,heading:i,climb:r,opposite:o,location:s}){this.elevation=e,this.grade=t,this.smoothedGrade=n,this.distance=a,this.heading=i,this.climb=r,this.opposite=o,this.location=s instanceof google.maps.LatLng?s:new google.maps.LatLng(s.lat,s.lng)}toJSON(){let{elevation:e,grade:t,smoothedGrade:n,distance:a,heading:i,climb:r,opposite:o}=this,s=this.location.toJSON();return{elevation:e,grade:t,smoothedGrade:n,distance:a,heading:i,climb:r,opposite:o,location:s}}static fromJSON(e){return new d(e)}}t.b=d;t.a=class{constructor(e){this.fileBody=e,this.md5=l()(e),this.points=[]}expandPointsWithGradeAndHeading(){for(let e=0,t;e<this.points.length;e++)if(t=this.points[e],e<this.points.length-1){let n=this.points[e+1];t.heading=google.maps.geometry.spherical.computeHeading(t.location,n.location);let a=google.maps.geometry.spherical.computeDistanceBetween(t.location,n.location),i=n.elevation-t.elevation;t.distance=a,t.grade=100*(i/a),t.opposite=i,t.climb=i}else t.distance=0,t.heading=0,t.grade=0,t.opposite=0,t.climb=0;let e=this.points.map((e,t)=>{return[t,e.grade]}),t=a.a.smooth.kernel2().kernel('Gaussian').data(e).scale(2);t();let n=t.output();for(let e=0;e<this.points.length;e++)this.points[e].smoothedGrade=n[e][1],(0.95>this.points[e].smoothedGrade||0>this.points[e].climb)&&(this.points[e].climb=0)}async expandPointsWithElevation(e){let t=0,n=20,a=512;for(;t<e.length;){0<t&&(await Object(i.d)(4e3));let o=[],s=0,l=0;for(let i=t;i<e.length;i++){let t=e[i],r=0;if(i<e.length-1){let n=e[i+1];r=google.maps.geometry.spherical.computeDistanceBetween(t.location,n.location)}if(s+=r,l+=1,s<=a*n&&l<a)o.push(t.location);else{l-=1,s-=r;break}}let c={path:o,samples:Math.ceil(s/n)},p=await Object(r.b)(c),u=p.map((t)=>{return new d({elevation:t.elevation,location:t.location})});Array.prototype.push.apply(this.points,u),t=l+t}}async create(){let e='gpx-cache-'+this.md5,t=o.a.get(e);if(t!==void 0&&null!==t)o.a.unshift('gpx-cache',e),this.points=t.map((e)=>{return d.fromJSON(e)});else{let t=new DOMParser,n=t.parseFromString(this.fileBody,'text/xml'),a=Array.from(n.documentElement.getElementsByTagName('trkpt')).map((e)=>{let t=parseFloat(e.getAttribute('lat')),n=parseFloat(e.getAttribute('lon'));return new d({location:{lat:t,lng:n}})});await this.expandPointsWithElevation(a),this.expandPointsWithGradeAndHeading(),o.a.add('gpx-cache',e,this.points)}return this.points}}},function(e){e.exports={VERSION:'1.2.4',BAYEUX_VERSION:'1.0',ID_LENGTH:160,JSONP_CALLBACK:'jsonpcallback',CONNECTION_TYPES:['long-polling','cross-origin-long-polling','callback-polling','websocket','eventsource','in-process'],MANDATORY_CONNECTION_TYPES:['long-polling','callback-polling','in-process']}},function(e,t,n){'use strict';function a(e){var t;t=o.length?o.pop():new i,t.task=e,r(t)}function i(){this.task=null}var r=n(162),o=[],s=[],l=r.makeRequestCallFromTimer(function(){if(s.length)throw s.shift()});e.exports=a,i.prototype.call=function(){try{this.task.call()}catch(e){a.onerror?a.onerror(e):(s.push(e),l())}finally{this.task=null,o[o.length]=this}}},function(e,t,n){'use strict';var a=n(2),i=n(1),r=n(28),o=n(67),s=a({initialize:function(e){this.id=this.name=e},push:function(e){this.trigger('message',e)},isUnused:function(){return 0===this.countListeners('message')}});i(s.prototype,r),i(s,{HANDSHAKE:'/meta/handshake',CONNECT:'/meta/connect',SUBSCRIBE:'/meta/subscribe',UNSUBSCRIBE:'/meta/unsubscribe',DISCONNECT:'/meta/disconnect',META:'meta',SERVICE:'service',expand:function(e){var t=this.parse(e),a=['/**',e],r=t.slice();r[r.length-1]='*',a.push(this.unparse(r));for(var o=1,i=t.length;o<i;o++)r=t.slice(0,o),r.push('**'),a.push(this.unparse(r));return a},isValid:function(e){return o.CHANNEL_NAME.test(e)||o.CHANNEL_PATTERN.test(e)},parse:function(e){return this.isValid(e)?e.split('/').slice(1):null},unparse:function(e){return'/'+e.join('/')},isMeta:function(e){var t=this.parse(e);return t?t[0]===this.META:null},isService:function(e){var t=this.parse(e);return t?t[0]===this.SERVICE:null},isSubscribable:function(e){return this.isValid(e)?!this.isMeta(e)&&!this.isService(e):null},Set:a({initialize:function(){this._channels={}},getKeys:function(){var e=[];for(var t in this._channels)e.push(t);return e},remove:function(e){delete this._channels[e]},hasSubscription:function(e){return this._channels.hasOwnProperty(e)},subscribe:function(e,t){for(var a=0,i=e.length,n;a<i;a++){n=e[a];var r=this._channels[n]=this._channels[n]||new s(n);r.bind('message',t)}},unsubscribe:function(e,t){var n=this._channels[e];return!!n&&(n.unbind('message',t),!!n.isUnused()&&(this.remove(e),!0))},distributeMessage:function(e){for(var t=s.expand(e.channel),a=0,i=t.length,n;a<i;a++)n=this._channels[t[a]],n&&n.trigger('message',e)}})}),e.exports=s},function(e){'use strict';e.exports={CHANNEL_NAME:/^\/(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)))+(\/(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)))+)*$/,CHANNEL_PATTERN:/^(\/(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)))+)*\/\*{1,2}$/,ERROR:/^([0-9][0-9][0-9]:(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)| |\/|\*|\.))*(,(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)| |\/|\*|\.))*)*:(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)| |\/|\*|\.))*|[0-9][0-9][0-9]::(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)| |\/|\*|\.))*)$/,VERSION:/^([0-9])+(\.(([a-z]|[A-Z])|[0-9])(((([a-z]|[A-Z])|[0-9])|\-|\_))*)*$/}},function(e){'use strict';e.exports={}},function(e,t,n){'use strict';var a=n(2);e.exports=a({initialize:function(){this._index={}},add:function(e){var t=void 0===e.id?e:e.id;return!this._index.hasOwnProperty(t)&&(this._index[t]=e,!0)},forEach:function(e,t){for(var n in this._index)this._index.hasOwnProperty(n)&&e.call(t,this._index[n])},isEmpty:function(){for(var e in this._index)if(this._index.hasOwnProperty(e))return!1;return!0},member:function(e){for(var t in this._index)if(this._index[t]===e)return!0;return!1},remove:function(e){var t=void 0===e.id?e:e.id,n=this._index[t];return delete this._index[t],n},toArray:function(){var e=[];return this.forEach(function(t){e.push(t)}),e}})},function(e,t,n){'use strict';(function(t){var a=n(2),i=n(4),r=n(27),o=n(1),s=n(11),l=n(7),d=o(a(l,{encode:function(e){return s(e)},request:function(e){var n=this.endpoint.href,a=this,i;if(t.XMLHttpRequest)i=new XMLHttpRequest;else if(t.ActiveXObject)i=new ActiveXObject('Microsoft.XMLHTTP');else return this._handleError(e);i.open('POST',n,!0),i.setRequestHeader('Content-Type','application/json'),i.setRequestHeader('Pragma','no-cache'),i.setRequestHeader('X-Requested-With','XMLHttpRequest');var o=this._dispatcher.headers;for(var s in o)o.hasOwnProperty(s)&&i.setRequestHeader(s,o[s]);var l=function(){i.abort()};return void 0!==t.onbeforeunload&&r.Event.on(t,'beforeunload',l),i.onreadystatechange=function(){if(i&&4===i.readyState){var n=null,o=i.status,s=i.responseText;if(void 0!==t.onbeforeunload&&r.Event.detach(t,'beforeunload',l),i.onreadystatechange=function(){},i=null,!(200<=o&&300>o||304===o||1223===o))return a._handleError(e);try{n=JSON.parse(s)}catch(e){}n?a._receive(n):a._handleError(e)}},i.send(this.encode(e)),i}}),{isUsable:function(e,t,n,a){var r='ReactNative'===navigator.product||i.isSameOrigin(t);n.call(a,r)}});e.exports=d}).call(t,n(0))},function(e,t,n){'use strict';var a=n(1),i=function(e,t){this.message=e,this.options=t,this.attempts=0};a(i.prototype,{getTimeout:function(){return this.options.timeout},getInterval:function(){return this.options.interval},isDeliverable:function(){var e=this.options.attempts,t=this.attempts,n=this.options.deadline,a=new Date().getTime();return void 0!==e&&t>=e?!1:void 0!==n&&a>n?!1:!0},send:function(){this.attempts+=1},succeed:function(){},fail:function(){},abort:function(){}}),e.exports=i},function(e,t,n){'use strict';Object.defineProperty(t,'__esModule',{value:!0});var a=n(73);document.addEventListener('DOMContentLoaded',()=>{Object(a.a)()})},function(e,t,n){'use strict';t.a=function(){let e=new URL(window.location),t=new c.a(e.search);if(t.get('state')&&t.get('code')){let e=t.get('code');return localStorage.setItem('strava-oauth-code-'+o.a.STRAVA_CLIENT_ID,e),void window.location.assign('/')}let n=window.location.protocol;if('https:'!==n&&'true'!==t.get('useant')){let e=window.location.host;window.location.assign('https://'+e+'/')}(o.a.STRAVA_CLIENT_ID===void 0||null===o.a.STRAVA_CLIENT_ID||''===o.a.STRAVA_CLIENT_ID)&&(document.getElementById('container-strava').style.display='none'),localStorage.getItem('strava-oauth-code-'+o.a.STRAVA_CLIENT_ID)&&(document.getElementById('strava-btn-connect').style.display='none',document.getElementById('strava-btn-connected').style.display='block');let d=l.a.container('route-progress'),p=document.getElementById('continue-previous');for(let e of d)try{let t=l.a.get(e);var g=document.createElement('option');let n=new Date;n.setTime(t.id),g.innerHTML=n.toLocaleDateString()+' '+n.toLocaleTimeString()+' - '+t.routeName,g.setAttribute('value',e),p.add(g)}catch(e){localStorage.clear(),location.reload();break}let h=[['virtual',new s.g]],m=[],_=[],y=document.getElementById('gpx-file-upload'),f=document.getElementById('display-unit'),v=document.getElementById('rider-weight'),b=document.getElementById('begin-session'),x=document.getElementById('btn-bluetooth-device-txt'),E=document.getElementById('btn-ant-device-txt'),S=document.getElementById('strava-btn-connect'),k=document.getElementById('btn-bluetooth-device'),w=document.getElementById('btn-ant-device'),C=document.getElementById('power-meter'),T=document.getElementById('hr-meter'),I=document.getElementById('cadence-meter'),N=document.getElementById('menuopen-btn'),L=document.getElementById('btn-fullscreen'),M=document.getElementById('bluetooth-device-container'),A=document.getElementById('ant-device-container'),D=document.getElementById('ant-ws-url'),O=(e)=>{C.options.length=0;for(let[n,a]of h){var t=document.createElement('option');t.innerHTML=a.name,t.setAttribute('value',a.id),a.id===e.id&&t.setAttribute('selected','true'),C.add(t)}'virtual'===C.value&&1<h.length&&C.options[1].setAttribute('selected','true'),T.options.length=0;for(let[n,a]of m){var t=document.createElement('option');t.innerHTML=a.name,t.setAttribute('value',a.id),a.id===e.id&&t.setAttribute('selected','true'),T.options.add(t)}if(0===T.options.length){var t=document.createElement('option');t.innerHTML='Disabled',t.setAttribute('value',''),T.options.add(t)}I.options.length=0;for(let[n,a]of _){var t=document.createElement('option');t.innerHTML=a.name,t.setAttribute('value',a.id),a.id===e.id&&t.setAttribute('selected','true'),I.options.add(t)}if(0===I.options.length){var t=document.createElement('option');t.innerHTML='Disabled',t.setAttribute('value',''),I.options.add(t)}},R;for(let e of document.querySelectorAll('#route-nav a'))e.onclick=(t)=>{t.preventDefault();let e=t.target.getAttribute('href');for(let e of document.querySelectorAll('.nav-link'))e.classList.remove('active');t.target.classList.add('active');for(let e of document.querySelectorAll('.tab-pane'))e.classList.remove('active');document.querySelector(e).classList.add('active')};document.getElementById('btn-useant').onclick=(t)=>{t.preventDefault();let e=window.location.host;window.location.assign('http://'+e+'/?useant=true')},document.getElementById('btn-useble').onclick=(t)=>{t.preventDefault();let e=window.location.host;window.location.assign('https://'+e+'/')},f.onchange=()=>{'imperial'===f.value?(document.getElementById('rider-weight-label').innerHTML='Rider Weight (lbs)',document.getElementById('rider-weight').setAttribute('placeholder',185)):(document.getElementById('rider-weight-label').innerHTML='Rider Weight (kg)',document.getElementById('rider-weight').setAttribute('placeholder',85))},N.onclick=(t)=>{t.preventDefault(),'none'===document.getElementById('ui-finalize-container').style.display?R.showFinalizeUI('Complete Ride'):document.getElementById('ui-finalize-container').style.display='none'},L.onclick=(t)=>{t.preventDefault(),null===u.a.fullscreenElement?u.a.requestFullscreen(document.body):u.a.exitFullscreen()},S.onclick=(t)=>{t.preventDefault();let e=window.location.protocol,n=window.location.host;window.location.assign('https://www.strava.com/oauth/authorize?client_id='+o.a.STRAVA_CLIENT_ID+'&response_type=code&redirect_uri='+(e+'//'+n+'/')+'&scope=write&state=strava')},k.onclick=(t)=>{if(t.preventDefault(),'undefined'==typeof navigator||!('bluetooth'in navigator))return document.getElementById('btn-bluetooth-device').style.display='none',void(document.getElementById('btn-bluetooth-device-warning').style.display='block');if(!k.classList.contains('disabled'))k.classList.add('disabled');else return;x.innerHTML='Connecting ...',async function(){let e=await navigator.bluetooth.requestDevice({filters:[{services:[6157]},{services:[6168]},{services:[6166]}]}),t=await e.gatt.connect(),n;if(!h.find((t)=>t[0]===e.id)){let a;try{a=await t.getPrimaryService(6168)}catch(e){}if(a){let i=await a.getCharacteristic(10851),o=new s.f,l=await Object(r.c)(i),d=o.getData(l);'cumulative_crank_revolutions'in d?(n=new s.d(e,t,a,i),h.push([n.id,n]),_.push([n.id,n])):(n=new s.e(e,t,a,i),h.push([n.id,n]))}}if(!_.find((t)=>t[0]===e.id)){let a;try{a=await t.getPrimaryService(6166)}catch(e){}if(a){let i=await a.getCharacteristic(10843);n=new s.b(e,t,a,i),_.push([n.id,n])}}if(!m.find((t)=>t[0]===e.id)){let a;try{a=await t.getPrimaryService(6157)}catch(e){}if(a){let i=await a.getCharacteristic(10807);n=new s.c(e,t,a,i),m.push([n.id,n])}}n&&O(n),k.classList.remove('disabled'),x.innerHTML='Connect'}().catch((e)=>{k.classList.remove('disabled'),x.innerHTML='Connect',console.log('Error: ',e)})},w.onclick=(t)=>{if(t.preventDefault(),!w.classList.contains('disabled'))w.classList.add('disabled');else return;E.innerHTML='Scanning ...';let e=document.getElementById('btn-ant-device-error');D.style.display='none',e.style.display='none',async function(){let t=D.value;localStorage.setItem('ant-ws-url',t),t||(t='http://localhost:8000/');const n=new s.a(t);n.addListener('bike_power',(e)=>{h.push([e.id,e]),O(e)}),n.addListener('speed_cadence',(e)=>{_.push([e.id,e]),O(e)}),n.addListener('hr',(e)=>{m.push([e.id,e]),O(e)}),n.addListener('namechange',(e)=>{O(e)}),n.addListener('error',()=>{D.style.display='inline',e.innerHTML='<br/> Could not connect to ANT-WS server located at: '+n.url,e.style.display='inline',w.classList.remove('disabled'),E.innerHTML='Scan'}),n.scan()}().catch((e)=>{w.classList.remove('disabled'),E.innerHTML='Scan',console.log('Error: ',e)})},b.onclick=(t)=>{if(t.preventDefault(),(y.value||p.value)&&v.value){if(!b.classList.contains('disabled'))b.classList.add('disabled');else return;(async function(){let e=v.value,t=f.value,n=C.value,o=h.find((e)=>e[0]===n)[1];o.listen();let s=T.value,d;s&&(d=m.find((e)=>e[0]===s)[1],d.listen());let c=I.value,u;if(c&&(u=_.find((e)=>e[0]===c)[1],u.listen()),localStorage.setItem('form-weight',e),localStorage.setItem('form-unit',t),p.value){let e=l.a.get(p.value);R=a.a.fromJSON(e),R.powerMeter=o,R.heartMeter=d,R.cadenceMeter=u,l.a.unshift('route-progress',R.cacheName())}else{let n=await Object(r.b)(y.files[0]),s=new i.a(n),c=await s.create();R=new a.a({points:c,riderWeight:e,unit:t,powerMeter:o,heartMeter:d,cadenceMeter:u}),l.a.add('route-progress',R.cacheName(),R)}a.a.transitionUI(),await R.init(),R.updateUI(),await R.updatePosition(),l.a.remove('route-progress',R.cacheName()),R.showFinalizeUI('Ride Finished')})().catch((e)=>{console.log('Error: ',e)})}else{let e='';y.value||p.value?!v.value&&(e='Please enter the riders weight.'):e='Please select a GPX file.';let t=document.getElementById('messages');t.innerHTML=e,t.style.display='block',window.scrollTo(0,0)}},localStorage.getItem('form-weight')&&(v.value=localStorage.getItem('form-weight')),localStorage.getItem('form-unit')&&(f.value=localStorage.getItem('form-unit'),f.onchange()),localStorage.getItem('ant-ws-url')&&(D.value=localStorage.getItem('ant-ws-url')),'https:'===n||(M.style.display='none',A.style.display='block')};var a=n(74),i=n(63),r=n(16),o=n(62),s=n(159),l=n(25),d=n(178),c=n.n(d),p=n(179),u=n.n(p)},function(e,t,n){'use strict';var a=Math.floor,i=n(30),r=n(16),o=n(75),s=n(76),l=n(77),d=n.n(l),c=n(78),p=n(62),u=n(63),g=n(25),h=n(158),m=n.n(h);class _{constructor({id:e,powerMeter:t,heartMeter:n,cadenceMeter:a,riderWeight:i,unit:r,routeName:l='',history:d=[],points:o,ridingState:s}){this.id=e,this.powerMeter=t,this.heartMeter=n,this.cadenceMeter=a,this.riderWeight=i,this.unit=r,this.routeName=l,this.history=d,this.points=o,this.ridingState=s,this.routeCompleted=!1,this.powerSamples=[],(this.id===void 0||null===this.id)&&(this.id=new Date().getTime()),'string'==typeof this.riderWeight&&(this.riderWeight=parseInt(this.riderWeight)),(this.ridingState===void 0||null===this.ridingState)&&(this.ridingState={pointIdx:0,point:this.points[0],pointPct:0,lastSampleTime:new Date,location:this.points[0].location,elevation:this.points[0].elevation,average_grade:0,mapMode:'SV',watts:0,rpm:void 0,bpm:void 0,speed:0,distance:0,climb:0,elapsed:0})}async init(){this.miniMap=new google.maps.Map(document.getElementById('tracker'),{center:this.ridingState.point.location,zoom:14,fullscreenControl:!1,zoomControl:!0,mapTypeId:google.maps.MapTypeId.TERRAIN});let e=this.points.map((e)=>{return{lat:e.location.lat(),lng:e.location.lng()}}),t=new google.maps.Polyline({path:e,geodesic:!0,strokeColor:'#0c7ac9',strokeOpacity:1,strokeWeight:2});t.setMap(this.miniMap),this.fullMap=new google.maps.Map(document.getElementById('map-view'),{center:this.ridingState.point.location,zoom:18,fullscreenControl:!1,zoomControl:!0,mapTypeId:google.maps.MapTypeId.TERRAIN});let n=new google.maps.Polyline({path:e,geodesic:!0,strokeColor:'#0c7ac9',strokeOpacity:1,strokeWeight:2});n.setMap(this.fullMap),this.fullMarker=new google.maps.Marker({position:this.ridingState.point.location,map:this.fullMap,icon:'/images/here.png'}),this.fullMarker.setMap(this.fullMap);let a=this.streetViewPanoramaInit(this.ridingState.point.location,this.ridingState.point.heading);this.miniMap.setStreetView(a),this.zoomSvg=c.a.select('#ui-elevation').append('svg').attr('id','ui-elevation-svg').attr('x',0).attr('y',0).attr('viewBox','0 0 150 60').attr('preserveAspectRatio','none'),this.drawHeightMap(),this.powerMeter.addListener('power',(e)=>this.collectPower(e)),this.heartMeter&&this.heartMeter.addListener('hr',(e)=>this.collectHR(e)),this.cadenceMeter&&this.cadenceMeter.addListener('cadence',(e)=>this.collectCadence(e));let o=await Object(i.a)(this.points[0].location),s=['street_address','route','intersection','postal_code'];for(let e of o){let t='';if(0<e.types.length&&(t=e.types[0]),s.includes(t))continue;else{this.routeName=e.formatted_address;break}}}collectPower(e){this.powerSamples.push(e)}collectHR(e){this.ridingState.bpm=e}collectCadence(e){this.ridingState.rpm=e}streetViewPanoramaInit(e,t){let n=document.getElementById('street-view');n.innerHTML='';let a=new google.maps.StreetViewPanorama(n,{visible:!0,fullscreenControl:!1,clickToGo:!1,addressControl:!1,panControl:!1,zoomControl:!1,linksControl:!1,pov:{heading:t,pitch:0},position:e});return a.addListener('status_changed',()=>{a.setPov({heading:this.ridingState.point.heading,pitch:0})}),a}drawHeightMap(){this.fullSvg=c.a.select('#ui-heightmap').append('svg').attr('id','ui-heightmap-svg').attr('x',0).attr('y',0).attr('viewBox','0 0 150 37.5').attr('preserveAspectRatio','none'),this.fullSvgData=[];for(let e=0;e<this.points.length;e++)this.fullSvgData.push([e,this.points[e].elevation]);let[e,t]=c.a.extent(this.fullSvgData,(e)=>e[1]);125>t-e&&(t=e+125);const n=c.a.scaleLinear().domain([t,e]).range([6,33]),a=c.a.scaleLinear().domain([0,this.points.length-1]).range([0,150]);this.fullSvgData=this.fullSvgData.map((e)=>{return[a(e[0]),n(e[1])]}),this.fullSvgData.push([150,37.5]),this.fullSvgData.push([0,37.5]),this.fullSvgData.push([0,this.fullSvgData[0][1]]);let i=this.fullSvg.selectAll('polygon').data([this.fullSvgData]).attr('points',(e)=>{return e.map((e)=>{return[e[0],e[1]].join(',')}).join(' ')});i.enter().append('polygon').attr('points',(e)=>{return e.map((e)=>{return[e[0],e[1]].join(',')}).join(' ')}).attr('fill','#31A3CC').attr('stroke','#31A3CC').attr('stroke-width','1')}updateGraphs(){let e=Array(101);for(let t=0,n;t<e.length;t++)n=t-50+this.ridingState.pointIdx,0>n&&(n=0),n>=this.points.length&&(n=this.points.length-1),e[t]=[t,this.points[n].elevation];let[t,n]=c.a.extent(e,(e)=>e[1]);50>n-t&&(n=t+50);const a=c.a.scaleLinear().domain([n,t]).range([15,60-0.32*60]),i=c.a.scaleLinear().domain([0,100]).range([0,150]);e=e.map((e)=>{return[i(e[0]),a(e[1])]}),e.push([150,60]),e.push([0,60]),e.push([0,e[0][1]]);let r=this.zoomSvg.selectAll('polygon').data([e]).attr('points',(e)=>{return e.map((e)=>{return[e[0],e[1]].join(',')}).join(' ')});r.enter().append('polygon').attr('points',(e)=>{return e.map((e)=>{return[e[0],e[1]].join(',')}).join(' ')}).attr('fill','#31A3CC').attr('stroke','#31A3CC').attr('stroke-width','1');let o=this.zoomSvg.selectAll('image').data([e[51]]).attr('x',(e)=>{return e[0]-7.5}).attr('y',(e)=>{return e[1]-15}).attr('width','15').attr('height','15').attr('xlink:href','/images/marker.svg');o.enter().append('image').attr('x',(e)=>{e[0]}).attr('y',(e)=>{e[1]});let s=this.fullSvg.selectAll('image').data([this.fullSvgData[this.ridingState.pointIdx]]).attr('x',(e)=>{return e[0]-3}).attr('y',(e)=>{return e[1]-6}).attr('width','6').attr('height','6').attr('xlink:href','/images/marker.svg');s.enter().append('image').attr('x',(e)=>{e[0]}).attr('y',(e)=>{e[1]})}async updatePosition(){for(let e=0;!this.routeCompleted;){this.powerSamples.length&&(this.ridingState.watts=this.powerSamples.reduce((e,t)=>e+t,0)/this.powerSamples.length,this.powerSamples.length=0);let t=new Date,n=(t-this.ridingState.lastSampleTime)/1e3;this.ridingState.lastSampleTime=t;let a=1,o=0,s=0;for(;0<a;){let e=this.speedFromPower(this.ridingState.watts,this.ridingState.point.smoothedGrade,this.ridingState.point.elevation),t=this.ridingState.speed+0.2*(e-this.ridingState.speed);0.447>t&&(t=0);let i=t*n*a,r=this.ridingState.point.distance-this.ridingState.point.distance*this.ridingState.pointPct;if(i>r){let e=r/i;if(s+=this.ridingState.point.smoothedGrade*e,a-=a*e,this.ridingState.pointIdx+=1,this.ridingState.pointPct=0,this.ridingState.climb+=this.ridingState.point.climb,this.ridingState.point=this.points[this.ridingState.pointIdx],o+=r,this.ridingState.pointIdx>=this.points.length)break}else{let e=a;s+=this.ridingState.point.smoothedGrade*e,a=0,0==r?this.ridingState.pointPct=0:(this.ridingState.pointPct=1-(r-i)/this.ridingState.point.distance,o+=i)}}if(this.ridingState.pointIdx>=this.points.length)break;if(this.ridingState.average_grade=s,this.ridingState.distance+=o,this.ridingState.elevation=this.ridingState.point.elevation+this.ridingState.point.opposite*this.ridingState.pointPct,this.ridingState.speed=o/n,0<this.ridingState.speed&&(this.ridingState.elapsed+=n),this.ridingState.location=google.maps.geometry.spherical.interpolate(this.ridingState.point.location,this.points[this.ridingState.pointIdx+1].location,this.ridingState.pointPct),this.history.push({time:t,location:this.ridingState.location,power:this.ridingState.watts,elevation:this.ridingState.elevation,hr:this.ridingState.bpm,cad:this.ridingState.rpm}),0==e%5){let e=this.miniMap.getStreetView();try{let t=await Object(i.c)(this.ridingState.location,50);'profileUrl'in t.location||('MV'===this.ridingState.mapMode&&(document.getElementById('map-view').style.display='none',document.getElementById('tracker').style.display='block',document.getElementById('street-view').style.display='block',e.setVisible(!0),google.maps.event.trigger(e,'resize'),google.maps.event.trigger(this.miniMap,'resize')),this.miniMap.panTo(this.ridingState.location),'MV'===this.ridingState.mapMode?e.setPano(t.location.pano):e.setPosition(this.ridingState.location),this.ridingState.mapMode='SV')}catch(t){'SV'===this.ridingState.mapMode&&(e.setVisible(!1),document.getElementById('street-view').style.display='none',document.getElementById('tracker').style.display='none',document.getElementById('map-view').style.display='block',google.maps.event.trigger(this.fullMap,'resize')),this.ridingState.mapMode='MV',this.fullMap.panTo(this.ridingState.location),this.fullMarker.setPosition(this.ridingState.location)}}0==e%30&&Promise.resolve().then(()=>{g.a.set(this.cacheName(),this)}),this.updateGraphs(),e+=1,await Object(r.d)(1e3)}this.routeCompleted=!0}speedFromPower(e,t,n){let a=1e3*Math.exp(-n/7e3),i={units:'metric',rp_wr:this.riderWeight*('imperial'===this.unit?0.453592:1),rp_wb:8,rp_a:0.65,rp_cd:0.63,rp_dtl:4,ep_crr:5e-3,ep_g:t,ep_rho:Object(o.a)(23.8889,a,7.5)},r=Object(s.a)(e,i);return r*=0.277778,r}async updateUI(){for(;!0&&!this.routeCompleted;){let e=this.ridingState.elapsed.toFixed(),t=a(e/3600),n=a((e-3600*t)/60),i=e-3600*t-60*n;10>n&&(n='0'+n),10>i&&(i='0'+i);let o=0===t?n+':'+i:t+':'+n+':'+i;let s=this.ridingState.distance*('imperial'===this.unit?6.21371e-4:1e-3);s=100<s?s.toFixed():s.toFixed(1);let l=this.ridingState.average_grade.toFixed(1);('-0'===l||'-0.0'===l)&&(l='0.0');let d=document.getElementById('grade-unit-icon');0<=l?d.classList.contains('fa-long-arrow-down')&&(d.classList.remove('fa-long-arrow-down'),d.classList.add('fa-long-arrow-up')):d.classList.contains('fa-long-arrow-up')&&(d.classList.remove('fa-long-arrow-up'),d.classList.add('fa-long-arrow-down'));let c=this.ridingState.watts;c=void 0!==c&&null!==c?c.toFixed():'--';let p=this.ridingState.bpm;p=void 0!==p&&null!==p?p.toFixed():'--';let u=this.ridingState.rpm;u=void 0!==u&&null!==u?u.toFixed():'--',document.getElementById('watts').innerHTML=c,document.getElementById('heart').innerHTML=p,document.getElementById('cadence').innerHTML=u,document.getElementById('speed').innerHTML=(this.ridingState.speed*('imperial'===this.unit?2.23694:3.6)).toFixed(),document.getElementById('distance').innerHTML=s,document.getElementById('climb').innerHTML=(this.ridingState.climb*('imperial'===this.unit?3.28084:1)).toFixed(),document.getElementById('time').innerHTML=o,document.getElementById('grade').innerHTML=l,document.getElementById('distance-unit-value').innerHTML='imperial'===this.unit?'mi':'&nbsp;km',document.getElementById('speed-unit-value').innerHTML='imperial'===this.unit?'mph':'kph',document.getElementById('climb-container-value').innerHTML='imperial'===this.unit?'ft':'m',await Object(r.d)(1e3)}}async stravaExport(){let e=document.getElementById('btn-export-strava');if(!e.classList.contains('disabled'))e.classList.add('disabled');else return;e.innerHTML='Exporting',this.routeCompleted=!0;let t=document.getElementById('input-ride-name'),n=t.value,a=document.getElementById('strava-gpx-template').innerHTML,i=this.history.map((e)=>{return{lat:e.location.lat(),lng:e.location.lng(),elevation:e.elevation.toFixed(5),time:Object(r.a)(e.time),power:e.power,hr:e.hr,cad:e.cad}}),o=d.a.render(a,{export_time:Object(r.a)(new Date),export_name:n,points:i}),s=new FormData;s.set('client_id',p.a.STRAVA_CLIENT_ID),s.set('client_secret',p.a.STRAVA_CLIENT_SECRET),s.set('code',localStorage.getItem('strava-oauth-code-'+p.a.STRAVA_CLIENT_ID));let l=await fetch('https://www.strava.com/oauth/token',{method:'POST',body:s}),c=await l.json(),u=c.access_token,h=new File([o],'import_to_strava.gpx',{type:'text/xml'}),m=new FormData;m.set('activity_type','virtualride'),m.set('name',n),m.set('data_type','gpx'),m.set('file',h);let _=new Headers;_.set('Authorization','Bearer '+u);let y=await fetch('https://www.strava.com/api/v3/uploads',{method:'POST',headers:_,body:m}),f=await y.json(),v=f.id;for(;;){let e=await fetch('https://www.strava.com/api/v3/uploads/'+v,{headers:_}),t=await e.json();if(t.activity_id)break;await Object(r.d)(4e3)}g.a.remove('route-progress',this.cacheName()),e.innerHTML='Done!'}showFinalizeUI(e){if(document.getElementById('ui-finalize-container').style.display='block',document.getElementById('ui-finalize-label').innerHTML=e,localStorage.getItem('strava-oauth-code-'+p.a.STRAVA_CLIENT_ID)){let e=new Date,t='GPedal.com - ';t+=this.routeName?this.routeName:e.getMonth()+1+'/'+e.getDate();let n=document.getElementById('input-ride-name');n.value=t,n.style.display='block';let a=document.getElementById('btn-export-strava');a.style.display='block',a.onclick=(t)=>{t.preventDefault(),this.stravaExport().catch((e)=>{console.log('Error: ',e)})}}}cacheName(){return'route-progress-'+this.id}toJSON(){let{history:e,id:t,points:n,riderWeight:a,ridingState:i,routeName:r,unit:o}=this;return e=e.map((e)=>{return e=Object.assign({},e),e.location=e.location.toJSON(),e.time=e.time.toJSON(),e}),n=n.map((e)=>{return e.toJSON()}),i=Object.assign({},i),i.lastSampleTime=i.lastSampleTime.toJSON(),i.location=i.location.toJSON(),i.point=i.point.toJSON(),i.bpm=void 0,i.rpm=void 0,i.speed=0,i.watts=0,{history:e,id:t,points:n,riderWeight:a,ridingState:i,routeName:r,unit:o}}static fromJSON(e){for(let t of e.history)t.location=new google.maps.LatLng(t.location.lat,t.location.lng),t.time=new Date(t.time);return e.points=e.points.map((e)=>{return u.b.fromJSON(e)}),e.ridingState.lastSampleTime=new Date(e.ridingState.lastSampleTime),e.ridingState.location=new google.maps.LatLng(e.ridingState.location.lat,e.ridingState.location.lng),e.ridingState.point=u.b.fromJSON(e.ridingState.point),new _(e)}static transitionUI(){document.getElementById('configure-container').style.display='none',document.getElementById('app-container').style.display='block'}}t.a=_},function(e,t){'use strict';t.a=function(e,t,n){var a=6.1078/Math.pow(0.99999683+n*(-0.0090826951+n*(7.8736169e-5+n*(-6.1117958e-7+n*(4.3884187e-9+n*(-2.9883885e-11+n*(2.1874425e-13+n*(-1.7892321e-15+n*(1.1112018e-17+n*-3.0994571e-20)))))))),8),i=100*a;return(100*t-i)/(287.0531*(e+273.15))+i/(461.4964*(e+273.15))}},function(e,t){'use strict';function n(e,t){var n=9.8067*(t.rp_wr+t.rp_wb)*Math.sin(i(t.ep_g/100)),a=9.8067*(t.rp_wr+t.rp_wb)*Math.cos(i(t.ep_g/100))*t.ep_crr,r=0.5*t.rp_a*t.rp_cd*t.ep_rho*(1e3*e/3600)*(1e3*e/3600),o={};return o.Fgravity=n,o.Frolling=a,o.Fdrag=r,o}function a(e,t){var a=n(e,t),i=a.Fgravity+a.Frolling+a.Fdrag,r=i*(1e3*e/3600)/(1-t.rp_dtl/100);return r}var i=Math.atan;t.a=function(e,t){var n=-1e3,i=1e3,r=0,o=a(r,t),s=0;do{if(Math.abs(o-e)<1e-6)break;o>e?i=r:n=r,r=(i+n)/2,o=a(r,t)}while(100>s++);return r}},function(e,t){var n,a,i;(function(r,o){'object'==typeof t&&t&&'string'!=typeof t.nodeName?o(t):(a=[t],n=o,i='function'==typeof n?n.apply(t,a):n,!(i!==void 0&&(e.exports=i)))})(this,function(e){function t(e){return'function'==typeof e}function n(e){return h(e)?'array':typeof e}function a(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,'\\$&')}function i(e,t){return null!=e&&'object'==typeof e&&t in e}function r(e,t){return m.call(e,t)}function o(e){return!r(_,e)}function s(t,n){function r(){if(m&&!_)for(;g.length;)delete u[g.pop()];else g=[];m=!1,_=!1}function s(e){if('string'==typeof e&&(e=e.split(v,2)),!h(e)||2!==e.length)throw new Error('Invalid tags: '+e);y=new RegExp(a(e[0])+'\\s*'),S=new RegExp('\\s*'+a(e[1])),k=new RegExp('\\s*'+a('}'+e[1]))}if(!t)return[];var p=[],u=[],g=[],m=!1,_=!1,y,S,k;s(n||e.tags);for(var w=new c(t),C,T,I,N,L,M;!w.eos();){if(C=w.pos,I=w.scanUntil(y),I)for(var A=0,i=I.length;A<i;++A)N=I.charAt(A),o(N)?g.push(u.length):_=!0,u.push(['text',N,C,C+1]),C+=1,'\n'===N&&r();if(!w.scan(y))break;if(m=!0,T=w.scan(E)||'name',w.scan(f),'='===T?(I=w.scanUntil(b),w.scan(b),w.scanUntil(S)):'{'===T?(I=w.scanUntil(k),w.scan(x),w.scanUntil(S),T='&'):I=w.scanUntil(S),!w.scan(S))throw new Error('Unclosed tag at '+w.pos);if(L=[T,I,C,w.pos],u.push(L),'#'===T||'^'===T)p.push(L);else if('/'===T){if(M=p.pop(),!M)throw new Error('Unopened section "'+I+'" at '+C);if(M[1]!==I)throw new Error('Unclosed section "'+M[1]+'" at '+C)}else'name'===T||'{'===T||'&'===T?_=!0:'='===T&&s(I)}if(M=p.pop(),M)throw new Error('Unclosed section "'+M[1]+'" at '+w.pos);return d(l(u))}function l(e){for(var t=[],n=0,a=e.length,i,r;n<a;++n)i=e[n],i&&('text'===i[0]&&r&&'text'===r[0]?(r[1]+=i[1],r[3]=i[3]):(t.push(i),r=i));return t}function d(e){for(var t=[],n=t,a=[],r=0,i=e.length,o,s;r<i;++r)switch(o=e[r],o[0]){case'#':case'^':n.push(o),a.push(o),n=o[4]=[];break;case'/':s=a.pop(),s[5]=o[2],n=0<a.length?a[a.length-1][4]:t;break;default:n.push(o);}return t}function c(e){this.string=e,this.tail=e,this.pos=0}function p(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function u(){this.cache={}}var g=Object.prototype.toString,h=Array.isArray||function(e){return'[object Array]'===g.call(e)},m=RegExp.prototype.test,_=/\S/,y={"&":'&amp;',"<":'&lt;',">":'&gt;','"':'&quot;',"'":'&#39;',"/":'&#x2F;',"`":'&#x60;',"=":'&#x3D;'},f=/\s*/,v=/\s+/,b=/\s*=/,x=/\s*\}/,E=/#|\^|\/|>|\{|&|=|!/;c.prototype.eos=function(){return''===this.tail},c.prototype.scan=function(e){var t=this.tail.match(e);if(!t||0!==t.index)return'';var n=t[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n},c.prototype.scanUntil=function(e){var t=this.tail.search(e),n;return-1===t?(n=this.tail,this.tail=''):0===t?n='':(n=this.tail.substring(0,t),this.tail=this.tail.substring(t)),this.pos+=n.length,n},p.prototype.push=function(e){return new p(e,this)},p.prototype.lookup=function(e){var n=this.cache,a;if(n.hasOwnProperty(e))a=n[e];else{for(var r=this,o=!1,s,l;r;){if(0<e.indexOf('.'))for(a=r.view,s=e.split('.'),l=0;null!=a&&l<s.length;)l===s.length-1&&(o=i(a,s[l])),a=a[s[l++]];else a=r.view[e],o=i(r.view,e);if(o)break;r=r.parent}n[e]=a}return t(a)&&(a=a.call(this.view)),a},u.prototype.clearCache=function(){this.cache={}},u.prototype.parse=function(e,t){var n=this.cache,a=n[e];return null==a&&(a=n[e]=s(e,t)),a},u.prototype.render=function(e,t,n){var a=this.parse(e),i=t instanceof p?t:new p(t);return this.renderTokens(a,i,n,e)},u.prototype.renderTokens=function(e,t,n,a){for(var r='',o=0,i=e.length,s,l,d;o<i;++o)d=void 0,s=e[o],l=s[0],'#'===l?d=this.renderSection(s,t,n,a):'^'===l?d=this.renderInverted(s,t,n,a):'>'===l?d=this.renderPartial(s,t,n,a):'&'===l?d=this.unescapedValue(s,t):'name'===l?d=this.escapedValue(s,t):'text'===l&&(d=this.rawValue(s)),void 0!==d&&(r+=d);return r},u.prototype.renderSection=function(e,n,a,i){function r(e){return o.render(e,n,a)}var o=this,s='',l=n.lookup(e[1]);if(l){if(h(l))for(var d=0,c=l.length;d<c;++d)s+=this.renderTokens(e[4],n.push(l[d]),a,i);else if('object'==typeof l||'string'==typeof l||'number'==typeof l)s+=this.renderTokens(e[4],n.push(l),a,i);else if(t(l)){if('string'!=typeof i)throw new Error('Cannot use higher-order sections without the original template');l=l.call(n.view,i.slice(e[3],e[5]),r),null!=l&&(s+=l)}else s+=this.renderTokens(e[4],n,a,i);return s}},u.prototype.renderInverted=function(e,t,n,a){var i=t.lookup(e[1]);if(!i||h(i)&&0===i.length)return this.renderTokens(e[4],t,n,a)},u.prototype.renderPartial=function(e,n,a){if(a){var i=t(a)?a(e[1]):a[e[1]];if(null!=i)return this.renderTokens(this.parse(i),n,a,i)}},u.prototype.unescapedValue=function(e,t){var n=t.lookup(e[1]);if(null!=n)return n},u.prototype.escapedValue=function(t,n){var a=n.lookup(t[1]);if(null!=a)return e.escape(a)},u.prototype.rawValue=function(e){return e[1]},e.name='mustache.js',e.version='2.3.0',e.tags=['{{','}}'];var S=new u;return e.clearCache=function(){return S.clearCache()},e.parse=function(e,t){return S.parse(e,t)},e.render=function(e,t,a){if('string'!=typeof e)throw new TypeError('Invalid template! Template should be a "string" but "'+n(e)+'" was given as the first argument for mustache#render(template, view, partials)');return S.render(e,t,a)},e.to_html=function(n,a,i,r){var o=e.render(n,a,i);return t(r)?void r(o):o},e.escape=function(e){return(e+'').replace(/[&<>"'`=\/]/g,function(e){return y[e]})},e.Scanner=c,e.Context=p,e.Writer=u,e})},function(e,t,n){'use strict';var a=n(79),i=n(111),r=n(18);const o={select:a.a,scaleLinear:i.a,extent:r.a};t.a=o},function(e,t,n){'use strict';var a=n(3);t.a=function(e){return'string'==typeof e?new a.a([[document.querySelector(e)]],[document.documentElement]):new a.a([[e]],a.b)}},function(e,t,n){'use strict';var a=n(3),r=n(31);t.a=function(e){'function'!=typeof e&&(e=Object(r.a)(e));for(var t=this._groups,o=t.length,s=Array(o),l=0;l<o;++l)for(var d=t[l],c=d.length,n=s[l]=Array(c),p=0,i,u;p<c;++p)(i=d[p])&&(u=e.call(i,i.__data__,p,d))&&('__data__'in i&&(u.__data__=i.__data__),n[p]=u);return new a.a(s,this._parents)}},function(e,t,n){'use strict';var a=n(3),r=n(82);t.a=function(e){'function'!=typeof e&&(e=Object(r.a)(e));for(var t=this._groups,o=t.length,s=[],l=[],d=0;d<o;++d)for(var c=t[d],p=c.length,n=0,i;n<p;++n)(i=c[n])&&(s.push(e.call(i,i.__data__,n,c)),l.push(i));return new a.a(s,l)}},function(e,t){'use strict';function n(){return[]}t.a=function(e){return null==e?n:function(){return this.querySelectorAll(e)}}},function(e,t,n){'use strict';var a=n(3),r=n(84);t.a=function(e){'function'!=typeof e&&(e=Object(r.a)(e));for(var t=this._groups,o=t.length,s=Array(o),l=0;l<o;++l)for(var d=t[l],c=d.length,n=s[l]=[],p=0,i;p<c;++p)(i=d[p])&&e.call(i,i.__data__,p,d)&&n.push(i);return new a.a(s,this._parents)}},function(e,t){'use strict';var n=function(e){return function(){return this.matches(e)}};if('undefined'!=typeof document){var a=document.documentElement;if(!a.matches){var i=a.webkitMatchesSelector||a.msMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector;n=function(e){return function(){return i.call(this,e)}}}}t.a=n},function(e,t,n){'use strict';function a(e,t,n,a,r,s){for(var l=0,i=t.length,d=s.length,c;l<d;++l)(c=t[l])?(c.__data__=s[l],a[l]=c):n[l]=new o.a(e,s[l]);for(;l<i;++l)(c=t[l])&&(r[l]=c)}function i(e,t,n,a,r,s,d){var c={},p=t.length,u=s.length,g=Array(p),h,i,m;for(h=0;h<p;++h)(i=t[h])&&(g[h]=m=l+d.call(i,i.__data__,h,t),m in c?r[h]=i:c[m]=i);for(h=0;h<u;++h)m=l+d.call(e,s[h],h,s),(i=c[m])?(a[h]=i,i.__data__=s[h],c[m]=null):n[h]=new o.a(e,s[h]);for(h=0;h<p;++h)(i=t[h])&&c[g[h]]===i&&(r[h]=i)}var r=n(3),o=n(32),s=n(86),l='$';t.a=function(e,t){if(!e)return y=Array(this.size()),g=-1,this.each(function(e){y[++g]=e}),y;var n=t?i:a,o=this._parents,l=this._groups;'function'!=typeof e&&(e=Object(s.a)(e));for(var d=l.length,c=Array(d),p=Array(d),u=Array(d),g=0;g<d;++g){var h=o[g],m=l[g],_=m.length,y=e.call(h,h&&h.__data__,g,o),f=y.length,v=p[g]=Array(f),b=c[g]=Array(f),x=u[g]=Array(_);n(h,m,v,b,x,y,t);for(var E=0,S=0,k,w;E<f;++E)if(k=v[E]){for(E>=S&&(S=E+1);!(w=b[S])&&++S<f;);k._next=w||null}}return c=new r.a(c,o),c._enter=p,c._exit=u,c}},function(e,t){'use strict';t.a=function(e){return function(){return e}}},function(e,t,n){'use strict';var a=n(33),i=n(3);t.a=function(){return new i.a(this._exit||this._groups.map(a.a),this._parents)}},function(e,t,n){'use strict';var a=n(3);t.a=function(e){for(var t=this._groups,r=e._groups,o=t.length,s=r.length,l=Math.min(o,s),d=Array(o),c=0;c<l;++c)for(var p=t[c],u=r[c],g=p.length,n=d[c]=Array(g),h=0,i;h<g;++h)(i=p[h]||u[h])&&(n[h]=i);for(;c<o;++c)d[c]=t[c];return new a.a(d,this._parents)}},function(e,t){'use strict';t.a=function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var a=e[t],r=a.length-1,i=a[r],o;0<=--r;)(o=a[r])&&(i&&i!==o.nextSibling&&i.parentNode.insertBefore(o,i),i=o);return this}},function(e,t,n){'use strict';function a(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}var r=n(3);t.a=function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=a);for(var o=this._groups,s=o.length,l=Array(s),d=0;d<s;++d){for(var c=o[d],p=c.length,n=l[d]=Array(p),u=0,i;u<p;++u)(i=c[u])&&(n[u]=i);n.sort(t)}return new r.a(l,this._parents).order()}},function(e,t){'use strict';t.a=function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}},function(e,t){'use strict';t.a=function(){var e=Array(this.size()),t=-1;return this.each(function(){e[++t]=this}),e}},function(e,t){'use strict';t.a=function(){for(var e=this._groups,t=0,a=e.length;t<a;++t)for(var r=e[t],o=0,i=r.length,n;o<i;++o)if(n=r[o],n)return n;return null}},function(e,t){'use strict';t.a=function(){var e=0;return this.each(function(){++e}),e}},function(e,t){'use strict';t.a=function(){return!this.node()}},function(e,t){'use strict';t.a=function(e){for(var t=this._groups,a=0,r=t.length;a<r;++a)for(var o=t[a],s=0,i=o.length,n;s<i;++s)(n=o[s])&&e.call(n,n.__data__,s,o);return this}},function(e,t,n){'use strict';function a(e){return function(){this.removeAttribute(e)}}function i(e){return function(){this.removeAttributeNS(e.space,e.local)}}function r(e,t){return function(){this.setAttribute(e,t)}}function o(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function s(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function l(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}var d=n(34);t.a=function(e,t){var n=Object(d.a)(e);if(2>arguments.length){var c=this.node();return n.local?c.getAttributeNS(n.space,n.local):c.getAttribute(n)}return this.each((null==t?n.local?i:a:'function'==typeof t?n.local?l:s:n.local?o:r)(n,t))}},function(e,t,n){'use strict';function a(e){return function(){this.style.removeProperty(e)}}function i(e,t,n){return function(){this.style.setProperty(e,t,n)}}function r(e,t,n){return function(){var a=t.apply(this,arguments);null==a?this.style.removeProperty(e):this.style.setProperty(e,a,n)}}function o(e,t){return e.style.getPropertyValue(t)||Object(s.a)(e).getComputedStyle(e,null).getPropertyValue(t)}var s=n(36);t.a=function(e,t,n){return 1<arguments.length?this.each((null==t?a:'function'==typeof t?r:i)(e,t,null==n?'':n)):o(this.node(),e)}},function(e,t){'use strict';function n(e){return function(){delete this[e]}}function a(e,t){return function(){this[e]=t}}function i(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}t.a=function(e,t){return 1<arguments.length?this.each((null==t?n:'function'==typeof t?i:a)(e,t)):this.node()[e]}},function(e,t){'use strict';function a(e){return e.trim().split(/^|\s+/)}function r(e){return e.classList||new n(e)}function n(e){this._node=e,this._names=a(e.getAttribute('class')||'')}function i(e,t){for(var a=r(e),o=-1,i=t.length;++o<i;)a.add(t[o])}function o(e,t){for(var a=r(e),o=-1,i=t.length;++o<i;)a.remove(t[o])}function s(e){return function(){i(this,e)}}function l(e){return function(){o(this,e)}}function d(e,t){return function(){(t.apply(this,arguments)?i:o)(this,e)}}n.prototype={add:function(e){var t=this._names.indexOf(e);0>t&&(this._names.push(e),this._node.setAttribute('class',this._names.join(' ')))},remove:function(e){var t=this._names.indexOf(e);0<=t&&(this._names.splice(t,1),this._node.setAttribute('class',this._names.join(' ')))},contains:function(e){return 0<=this._names.indexOf(e)}},t.a=function(e,t){var o=a(e+'');if(2>arguments.length){for(var c=r(this.node()),p=-1,i=o.length;++p<i;)if(!c.contains(o[p]))return!1;return!0}return this.each(('function'==typeof t?d:t?s:l)(o,t))}},function(e,t){'use strict';function n(){this.textContent=''}function a(e){return function(){this.textContent=e}}function i(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?'':t}}t.a=function(e){return arguments.length?this.each(null==e?n:('function'==typeof e?i:a)(e)):this.node().textContent}},function(e,t){'use strict';function n(){this.innerHTML=''}function a(e){return function(){this.innerHTML=e}}function i(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?'':t}}t.a=function(e){return arguments.length?this.each(null==e?n:('function'==typeof e?i:a)(e)):this.node().innerHTML}},function(e,t){'use strict';function n(){this.nextSibling&&this.parentNode.appendChild(this)}t.a=function(){return this.each(n)}},function(e,t){'use strict';function n(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}t.a=function(){return this.each(n)}},function(e,t,n){'use strict';var a=n(37);t.a=function(e){var t='function'==typeof e?e:Object(a.a)(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}},function(e,t,n){'use strict';function a(){return null}var i=n(37),r=n(31);t.a=function(e,t){var n='function'==typeof e?e:Object(i.a)(e),o=null==t?a:'function'==typeof t?t:Object(r.a)(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}},function(e,t){'use strict';function n(){var e=this.parentNode;e&&e.removeChild(this)}t.a=function(){return this.each(n)}},function(e,t){'use strict';t.a=function(e){return arguments.length?this.property('__data__',e):this.node().__data__}},function(e,t){'use strict';function n(e,t,n){return e=a(e,t,n),function(t){var n=t.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||e.call(this,t)}}function a(e,t,n){return function(a){var i=l;l=a;try{e.call(this,this.__data__,t,n)}finally{l=i}}}function r(e){return e.trim().split(/^|\s+/).map(function(e){var n='',a=e.indexOf('.');return 0<=a&&(n=e.slice(a+1),e=e.slice(0,a)),{type:e,name:n}})}function o(e){return function(){var t=this.__on;if(t){for(var n=0,a=-1,i=t.length,r;n<i;++n)(r=t[n],(!e.type||r.type===e.type)&&r.name===e.name)?this.removeEventListener(r.type,r.listener,r.capture):t[++a]=r;++a?t.length=a:delete this.__on}}}function s(e,t,r){var s=i.hasOwnProperty(e.type)?n:a;return function(n,a,i){var l=this.__on,d=s(t,a,i),c;if(l)for(var o=0,p=l.length;o<p;++o)if((c=l[o]).type===e.type&&c.name===e.name)return this.removeEventListener(c.type,c.listener,c.capture),this.addEventListener(c.type,c.listener=d,c.capture=r),void(c.value=t);this.addEventListener(e.type,d,r),c={type:e.type,name:e.name,value:t,listener:d,capture:r},l?l.push(c):this.__on=[c]}}var i={},l=null;if('undefined'!=typeof document){var d=document.documentElement;'onmouseenter'in d||(i={mouseenter:'mouseover',mouseleave:'mouseout'})}t.a=function(e,a,l){var d=r(e+''),c=d.length,n,i;if(2>arguments.length){var t=this.node().__on;if(t)for(var p=0,u=t.length,g;p<u;++p)for(n=0,g=t[p];n<c;++n)if((i=d[n]).type===g.type&&i.name===g.name)return g.value;return}for(t=a?s:o,null==l&&(l=!1),n=0;n<c;++n)this.each(t(d[n],a,l));return this}},function(e,t,n){'use strict';function a(e,t,n){var a=Object(o.a)(e),i=a.CustomEvent;'function'==typeof i?i=new i(t,n):(i=a.document.createEvent('Event'),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function i(e,t){return function(){return a(this,e,t)}}function r(e,t){return function(){return a(this,e,t.apply(this,arguments))}}var o=n(36);t.a=function(e,t){return this.each(('function'==typeof t?r:i)(e,t))}},function(e,t,n){'use strict';function a(e){var t=e.domain;return e.ticks=function(e){var n=t();return Object(s.d)(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){return Object(c.a)(t(),e,n)},e.nice=function(n){null==n&&(n=10);var a=t(),i=0,l=a.length-1,d=a[i],c=a[l],p;return c<d&&(p=d,d=c,c=p,p=i,i=l,l=p),p=Object(s.b)(d,c,n),0<p?(d=o(d/p)*p,c=r(c/p)*p,p=Object(s.b)(d,c,n)):0>p&&(d=r(d*p)/p,c=o(c*p)/p,p=Object(s.b)(d,c,n)),0<p?(a[i]=o(d/p)*p,a[l]=r(c/p)*p,t(a)):0>p&&(a[i]=r(d*p)/p,a[l]=o(c*p)/p,t(a)),e},e}function i(){var e=Object(d.b)(d.c,l.b);return e.copy=function(){return Object(d.a)(e,i())},a(e)}var r=Math.ceil,o=Math.floor;t.a=i;var s=n(17),l=n(49),d=n(140),c=n(144)},function(e,t,n){'use strict';var a=n(40)},function(){'use strict'},function(e,t,n){'use strict';var a=n(43),i=n(38),r=n(115),o=n(18),s=n(116),l=n(44),d=n(45),c=n(46)},function(e,t){'use strict';t.a=function(e){return function(){return e}}},function(e,t){'use strict';t.a=function(e){return e}},function(e,t,n){'use strict';var a=n(43),i=n(5),r=n(8),o=n(19)},function(e,t,n){'use strict';var a=n(41)},function(){'use strict'},function(e,t,n){'use strict';var a=n(8)},function(e,t,n){'use strict';var a=n(5),i=n(8),r=n(19)},function(){'use strict'},function(){'use strict'},function(e,t,n){'use strict';var a=n(5)},function(){'use strict'},function(){'use strict'},function(e,t,n){'use strict';var a=n(48)},function(e,t,n){'use strict';function i(e){if(e instanceof r)return new r(e.l,e.a,e.b,e.opacity);if(e instanceof u){var t=e.h*_.a;return new r(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}e instanceof m.b||(e=Object(m.h)(e));var n=d(e.r),i=d(e.g),a=d(e.b),o=s((0.4124564*n+0.3575761*i+0.1804375*a)/f),l=s((0.2126729*n+0.7151522*i+0.072175*a)/v),c=s((0.0193339*n+0.119192*i+0.9503041*a)/E);return new r(116*l-16,500*(o-l),200*(l-c),e.opacity)}function a(e,t,n,a){return 1===arguments.length?i(e):new r(e,t,n,null==a?1:a)}function r(e,t,n,i){this.l=+e,this.a=+t,this.b=+n,this.opacity=+i}function s(e){return e>k?g(e,1/3):e/S+b}function o(e){return e>x?e*e*e:S*(e-b)}function l(e){return 255*(0.0031308>=e?12.92*e:1.055*g(e,1/2.4)-0.055)}function d(e){return 0.04045>=(e/=255)?e/12.92:g((e+0.055)/1.055,2.4)}function p(e){if(e instanceof u)return new u(e.h,e.c,e.l,e.opacity);e instanceof r||(e=i(e));var t=Math.atan2(e.b,e.a)*_.b;return new u(0>t?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function c(e,t,n,a){return 1===arguments.length?p(e):new u(e,t,n,null==a?1:a)}function u(e,t,n,a){this.h=+e,this.c=+t,this.l=+n,this.opacity=+a}var g=Math.pow;t.a=a,t.b=c;var h=n(22),m=n(21),_=n(50),y=18,f=0.95047,v=1,E=1.08883,b=4/29,x=6/29,S=3*x*x,k=x*x*x;Object(h.a)(r,a,Object(h.b)(m.a,{brighter:function(e){return new r(this.l+y*(null==e?1:e),this.a,this.b,this.opacity)},darker:function(e){return new r(this.l-y*(null==e?1:e),this.a,this.b,this.opacity)},rgb:function(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return e=v*o(e),t=f*o(t),n=E*o(n),new m.b(l(3.2404542*t-1.5371385*e-0.4985314*n),l(-0.969266*t+1.8760108*e+0.041556*n),l(0.0556434*t-0.2040259*e+1.0572252*n),this.opacity)}})),Object(h.a)(u,c,Object(h.b)(m.a,{brighter:function(e){return new u(this.h,this.c,this.l+y*(null==e?1:e),this.opacity)},darker:function(e){return new u(this.h,this.c,this.l-y*(null==e?1:e),this.opacity)},rgb:function(){return i(this).rgb()}}))},function(e,t,n){'use strict';function a(e){if(e instanceof d)return new d(e.h,e.s,e.l,e.opacity);e instanceof c.b||(e=Object(c.h)(e));var t=e.r/255,n=e.g/255,a=e.b/255,i=(x*a+f*t-v*n)/(x+f-v),r=a-i,o=(y*(n-i)-m*r)/_,l=Math.sqrt(o*o+r*r)/(y*i*(1-i)),s=l?Math.atan2(o,r)*p.b-120:NaN;return new d(0>s?s+360:s,l,i,e.opacity)}function i(e,t,n,i){return 1===arguments.length?a(e):new d(e,t,n,null==i?1:i)}function d(e,t,n,a){this.h=+e,this.s=+t,this.l=+n,this.opacity=+a}var r=Math.pow;t.a=i;var o=n(22),c=n(21),p=n(50),s=-0.14861,u=+1.78277,m=-0.29227,_=-0.90649,y=+1.97294,f=y*_,v=y*u,x=u*m-_*s;Object(o.a)(d,i,Object(o.b)(c.a,{brighter:function(e){return e=null==e?c.c:r(c.c,e),new d(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?c.d:r(c.d,e),new d(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*p.a,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),a=Math.cos(e),i=Math.sin(e);return new c.b(255*(t+n*(s*a+u*i)),255*(t+n*(m*a+_*i)),255*(t+n*(y*a)),this.opacity)}}))},function(e,t){'use strict';t.a=function(e,n){return e=+e,n-=e,function(a){return Math.round(e+n*a)}}},function(e,t,n){'use strict';function a(e,t,n,i){function o(e){return e.length?e.pop()+' ':''}function l(e,a,o,l,d,s){if(e!==o||a!==l){var c=d.push('translate(',null,t,null,n);s.push({i:c-4,x:Object(r.a)(e,o)},{i:c-2,x:Object(r.a)(a,l)})}else(o||l)&&d.push('translate('+o+t+l+n)}function d(e,t,n,a){e===t?t&&n.push(o(n)+'rotate('+t+i):(180<e-t?t+=360:180<t-e&&(e+=360),a.push({i:n.push(o(n)+'rotate(',null,i)-2,x:Object(r.a)(e,t)}))}function c(e,t,n,a){e===t?t&&n.push(o(n)+'skewX('+t+i):a.push({i:n.push(o(n)+'skewX(',null,i)-2,x:Object(r.a)(e,t)})}function p(e,t,n,a,l,s){if(e!==n||t!==a){var d=l.push(o(l)+'scale(',null,',',null,')');s.push({i:d-4,x:Object(r.a)(e,n)},{i:d-2,x:Object(r.a)(t,a)})}else(1!==n||1!==a)&&l.push(o(l)+'scale('+n+','+a+')')}return function(t,n){var a=[],r=[];return t=e(t),n=e(n),l(t.translateX,t.translateY,n.translateX,n.translateY,a,r),d(t.rotate,n.rotate,a,r),c(t.skewX,n.skewX,a,r),p(t.scaleX,t.scaleY,n.scaleX,n.scaleY,a,r),t=n=null,function(e){for(var t=-1,i=r.length,n;++t<i;)a[(n=r[t]).i]=n.x(e);return a.join('')}}}var r=n(13),i=n(132),o=a(i.a,'px, ','px)','deg)'),s=a(i.b,', ',')',')')},function(e,t,n){'use strict';t.a=function(e){return'none'===e?a.b:(i||(i=document.createElement('DIV'),r=document.documentElement,o=document.defaultView),i.style.transform=e,e=o.getComputedStyle(r.appendChild(i),null).getPropertyValue('transform'),r.removeChild(i),e=e.slice(7,-1).split(','),Object(a.a)(+e[0],+e[1],+e[2],+e[3],+e[4],+e[5]))},t.b=function(e){return null==e?a.b:(s||(s=document.createElementNS('http://www.w3.org/2000/svg','g')),s.setAttribute('transform',e),!(e=s.transform.baseVal.consolidate()))?a.b:(e=e.matrix,Object(a.a)(e.a,e.b,e.c,e.d,e.e,e.f))};var a=n(133),i,r,o,s},function(e,t,n){'use strict';var i=Math.sqrt;n.d(t,'b',function(){return a});var r=180/Math.PI,a={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};t.a=function(t,n,o,s,l,d){var c,p,u;return(c=i(t*t+n*n))&&(t/=c,n/=c),(u=t*o+n*s)&&(o-=t*u,s-=n*u),(p=i(o*o+s*s))&&(o/=p,s/=p,u/=p),t*s<n*o&&(t=-t,n=-n,u=-u,c=-c),{translateX:l,translateY:d,rotate:Math.atan2(n,t)*r,skewX:Math.atan(u)*r,scaleX:c,scaleY:p}}},function(){'use strict';function e(e){return((e=a(e))+1/e)/2}function t(e){return((e=a(e))-1/e)/2}function n(e){return((e=a(2*e))-1)/(e+1)}var a=Math.exp,i=Math.log,r=Math.sqrt,o=Math.SQRT2,s=2,l=4},function(e,t,n){'use strict';function a(e){return function(n,t){var a=e((n=Object(i.d)(n)).h,(t=Object(i.d)(t)).h),o=Object(r.a)(n.s,t.s),s=Object(r.a)(n.l,t.l),l=Object(r.a)(n.opacity,t.opacity);return function(e){return n.h=a(e),n.s=o(e),n.l=s(e),n.opacity=l(e),n+''}}}var i=n(6),r=n(9),o=a(r.c),s=a(r.a)},function(e,t,n){'use strict';var a=n(6),i=n(9)},function(e,t,n){'use strict';function a(e){return function(n,t){var a=e((n=Object(i.c)(n)).h,(t=Object(i.c)(t)).h),o=Object(r.a)(n.c,t.c),s=Object(r.a)(n.l,t.l),l=Object(r.a)(n.opacity,t.opacity);return function(e){return n.h=a(e),n.c=o(e),n.l=s(e),n.opacity=l(e),n+''}}}var i=n(6),r=n(9),o=a(r.c),s=a(r.a)},function(e,t,n){'use strict';function a(e){return function t(n){function a(a,t){var o=e((a=Object(i.b)(a)).h,(t=Object(i.b)(t)).h),d=Object(r.a)(a.s,t.s),s=Object(r.a)(a.l,t.l),l=Object(r.a)(a.opacity,t.opacity);return function(e){return a.h=o(e),a.s=d(e),a.l=s(Math.pow(e,n)),a.opacity=l(e),a+''}}return n=+n,a.gamma=t,a}(1)}var i=n(6),r=n(9),o=a(r.c),s=a(r.a)},function(){'use strict'},function(e,t,n){'use strict';function a(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Object(u.a)(t)}function i(e){return function(t,n){var i=e(t=+t,n=+n);return function(e){return e<=t?0:e>=n?1:i(e)}}}function r(e){return function(n,i){var o=e(n=+n,i=+i);return function(e){return 0>=e?n:1<=e?i:o(e)}}}function o(e,t,n,a){var i=e[0],r=e[1],o=t[0],s=t[1];return r<i?(i=n(r,i),o=a(s,o)):(i=n(i,r),o=a(o,s)),function(e){return o(i(e))}}function s(e,t,n,a){var o=l(e.length,t.length)-1,s=Array(o),d=Array(o),r=-1;for(e[o]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++r<o;)s[r]=n(e[r],e[r+1]),d[r]=a(t[r],t[r+1]);return function(t){var n=Object(c.a)(e,t,1,o)-1;return d[n](s[n](t))}}var l=Math.min;t.c=a,t.a=function(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp())},t.b=function(e,t){function n(){return _=2<l(u.length,m.length)?s:o,v=b=null,c}function c(t){return(v||(v=_(u,m,f?i(e):e,y)))(+t)}var u=h,m=h,y=d.a,f=!1,_,v,b;return c.invert=function(e){return(b||(b=_(m,u,a,f?r(t):t)))(+e)},c.domain=function(e){return arguments.length?(u=p.a.call(e,g.a),n()):u.slice()},c.range=function(e){return arguments.length?(m=p.b.call(e),n()):m.slice()},c.rangeRound=function(e){return m=p.b.call(e),y=d.c,n()},c.clamp=function(e){return arguments.length?(f=!!e,n()):f},c.interpolate=function(e){return arguments.length?(y=e,n()):y},n()};var c=n(17),d=n(49),p=n(141),u=n(142),g=n(143),h=[0,1]},function(e,t,n){'use strict';n.d(t,'a',function(){return i}),n.d(t,'b',function(){return r});var a=Array.prototype,i=a.map,r=a.slice},function(e,t){'use strict';t.a=function(e){return function(){return e}}},function(e,t){'use strict';t.a=function(e){return+e}},function(e,t,n){'use strict';var a=Math.max,i=Math.abs,r=n(17),o=n(145);t.a=function(e,t,n){var s=e[0],l=e[e.length-1],d=Object(r.c)(s,l,null==t?10:t),c;switch(n=Object(o.c)(null==n?',f':n),n.type){case's':{var p=a(i(s),i(l));return null!=n.precision||isNaN(c=Object(o.e)(d,p))||(n.precision=c),Object(o.b)(n,p)}case'':case'e':case'g':case'p':case'r':{null!=n.precision||isNaN(c=Object(o.f)(d,a(i(s),i(l))))||(n.precision=c-('e'===n.type));break}case'f':case'%':{null!=n.precision||isNaN(c=Object(o.d)(d))||(n.precision=c-2*('%'===n.type));break}}return Object(o.a)(n)}},function(e,t,n){'use strict';var a=n(146);n.d(t,'a',function(){return a.a}),n.d(t,'b',function(){return a.b});var i=n(58),r=n(59);n.d(t,'c',function(){return r.a});var o=n(152);n.d(t,'d',function(){return o.a});var s=n(153);n.d(t,'e',function(){return s.a});var l=n(154);n.d(t,'f',function(){return l.a})},function(e,t,n){'use strict';n.d(t,'a',function(){return r}),n.d(t,'b',function(){return o});var a=n(58),i,r,o;(function(e){return i=Object(a.a)(e),r=i.format,o=i.formatPrefix,i})({decimal:'.',thousands:',',grouping:[3],currency:['$','']})},function(e,t){'use strict';t.a=function(e,n){return function(a,r){for(var o=a.length,i=[],t=0,s=e[0],l=0;0<o&&0<s&&(l+s+1>r&&(s=Math.max(1,r-l)),i.push(a.substring(o-=s,o+s)),!((l+=s+1)>r));)s=e[t=(t+1)%e.length];return i.reverse().join(n)}}},function(e,t){'use strict';t.a=function(e){return function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}}},function(e,t){'use strict';t.a=function(e,t){e=e.toPrecision(t);out:for(var a=e.length,n=1,i=-1,r;n<a;++n)switch(e[n]){case'.':i=r=n;break;case'0':0===i&&(i=n),r=n;break;case'e':break out;default:0<i&&(i=0);}return 0<i?e.slice(0,i)+e.slice(r+1):e}},function(e,t,n){'use strict';var a=n(24);t.a=function(e,t){var n=Object(a.a)(e,t);if(!n)return e+'';var i=n[0],r=n[1];return 0>r?'0.'+Array(-r).join('0')+i:i.length>r+1?i.slice(0,r+1)+'.'+i.slice(r+1):i+Array(r-i.length+2).join('0')}},function(e,t){'use strict';t.a=function(e){return e}},function(e,t,n){'use strict';var a=n(14);t.a=function(e){return Math.max(0,-Object(a.a)(Math.abs(e)))}},function(e,t,n){'use strict';var a=Math.max,i=n(14);t.a=function(e,t){return a(0,3*a(-8,Math.min(8,Math.floor(Object(i.a)(t)/3)))-Object(i.a)(Math.abs(e)))}},function(e,t,n){'use strict';var a=Math.abs,i=n(14);t.a=function(e,t){return e=a(e),t=a(t)-e,Math.max(0,Object(i.a)(t)-Object(i.a)(e))+1}},function(e,t){'use strict';function n(e,t,n){return 1/Math.sqrt(2*h)*g(-(_(e-t,2)/(2*_(n,2))))}function a(e,t,n){return 1<m((e-t)/n)?0:3/4*(1-_((e-t)/n,2))}function r(e,t,n){return 1/(g((e-t)/n)+g(-(e-t)/n))}function o(e,t,n){return 1<m((e-t)/n)?0:1/2}function s(e,t,n){return 1<m((e-t)/n)?0:1-m((e-t)/n)}function l(e,t,n){return 1<m((e-t)/n)?0:15/16*_(1-_((e-t)/n,2),2)}function d(e,t,n){return 1<m((e-t)/n)?0:35/32*_(1-_((e-t)/n,2),3)}function c(e,t,n){return 1<m((e-t)/n)?0:h/4*Math.cos(h/2*((e-t)/n))}function p(e,t,n){return 1<m((e-t)/n)?0:70/81*_(1-_(m((e-t)/n),3),3)}function u(e,t,n){var a=m((t-e)/n);return 0.5*g(-a/i)*Math.sin(a/i+h/4)}var i=Math.SQRT2,g=Math.exp,h=Math.PI,m=Math.abs,_=Math.pow;const y={};t.a=y,y.smooth={},y.smooth.kernel2=function(){function e(){var e=[];e=_.map(function(e){return[f(e),v(e)]});var n=[];if('number'==typeof m)for(b=0;b<e.length;b++)n.push(m);else if(!('object'==typeof m&&Array.isArray(m)))throw console.log(m),new Error('Invalid scale parameter');else if(m.length===e.length)n=m.slice();else{var a=0;for(b=0;b<e.length;b++)n.push(m[a]),b<m.length?a++:a=0}for(b=0;b<e.length;b++){var r=0,o=0,s=0,l=g[y](e[b][0],e[b][0],n[b]);for(r+=l*e[b][1],o+=l,i=b-1;-1<i&&(s=g[y](e[b][0],e[i][0],n[b]),!(s/l<h));i--)r+=s*e[i][1],o+=s;for(i=b+1;i<e.length&&(s=g[y](e[b][0],e[i][0],n[b]),!(s/l<h));i++)r+=s*e[i][1],o+=s;t.push([e[b][0],r/o])}}var t=[],g={Uniform:o,Triangle:s,Epanechnikov:a,Quartic:l,Triweight:d,Logistic:r,Cosine:c,Gaussian:n,Tricube:p,Silverman:u},h=1e-3,m=[],_=[],y='Gaussian',f=function(e){return e[0]},v=function(e){return e[1]},b,i;return e.scale=function(t){return arguments.length?(m=t,e):m},e.kernel=function(t){if(!arguments.length)return y;if('function'!=typeof g[t])throw new Error('Invalid kernel');return y=t,e},e.x=function(t){return arguments.length?(f=t,e):f},e.y=function(t){return arguments.length?(v=t,e):v},e.output=function(){return t},e.diff=function(t){return arguments.length?(h=t,e):h},e.data=function(t){return _=t,e},e}},function(e,t,n){var a=Math.pow,i=function(){function e(e,t){if(!r[e]){r[e]={};for(var n=0;n<e.length;n++)r[e][e.charAt(n)]=n}return r[e][t]}var t=String.fromCharCode,n='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=',i='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$',r={},o={compressToBase64:function(e){if(null==e)return'';var t=o._compress(e,6,function(e){return n.charAt(e)});switch(t.length%4){default:case 0:return t;case 1:return t+'===';case 2:return t+'==';case 3:return t+'=';}},decompressFromBase64:function(t){return null==t?'':''==t?null:o._decompress(t.length,32,function(a){return e(n,t.charAt(a))})},compressToUTF16:function(e){return null==e?'':o._compress(e,15,function(e){return t(e+32)})+' '},decompressFromUTF16:function(e){return null==e?'':''==e?null:o._decompress(e.length,16384,function(t){return e.charCodeAt(t)-32})},compressToUint8Array:function(e){for(var t=o.compress(e),n=new Uint8Array(2*t.length),a=0,i=t.length,r;a<i;a++)r=t.charCodeAt(a),n[2*a]=r>>>8,n[2*a+1]=r%256;return n},decompressFromUint8Array:function(e){if(null===e||void 0===e)return o.decompress(e);for(var n=Array(e.length/2),a=0,i=n.length;a<i;a++)n[a]=256*e[2*a]+e[2*a+1];var r=[];return n.forEach(function(e){r.push(t(e))}),o.decompress(r.join(''))},compressToEncodedURIComponent:function(e){return null==e?'':o._compress(e,6,function(e){return i.charAt(e)})},decompressFromEncodedURIComponent:function(t){return null==t?'':''==t?null:(t=t.replace(/ /g,'+'),o._decompress(t.length,32,function(n){return e(i,t.charAt(n))}))},compress:function(e){return o._compress(e,16,function(e){return t(e)})},_compress:function(e,t,n){if(null==e)return'';var r={},o={},s='',l='',d='',c=2,p=3,u=2,g=[],h=0,m=0,_,i,y;for(y=0;y<e.length;y+=1)if(s=e.charAt(y),Object.prototype.hasOwnProperty.call(r,s)||(r[s]=p++,o[s]=!0),l=d+s,Object.prototype.hasOwnProperty.call(r,l))d=l;else{if(Object.prototype.hasOwnProperty.call(o,d)){if(256>d.charCodeAt(0)){for(_=0;_<u;_++)h<<=1,m==t-1?(m=0,g.push(n(h)),h=0):m++;for(i=d.charCodeAt(0),_=0;8>_;_++)h=h<<1|1&i,m==t-1?(m=0,g.push(n(h)),h=0):m++,i>>=1}else{for(i=1,_=0;_<u;_++)h=h<<1|i,m==t-1?(m=0,g.push(n(h)),h=0):m++,i=0;for(i=d.charCodeAt(0),_=0;16>_;_++)h=h<<1|1&i,m==t-1?(m=0,g.push(n(h)),h=0):m++,i>>=1}c--,0==c&&(c=a(2,u),u++),delete o[d]}else for(i=r[d],_=0;_<u;_++)h=h<<1|1&i,m==t-1?(m=0,g.push(n(h)),h=0):m++,i>>=1;c--,0==c&&(c=a(2,u),u++),r[l]=p++,d=s+''}if(''!=d){if(Object.prototype.hasOwnProperty.call(o,d)){if(256>d.charCodeAt(0)){for(_=0;_<u;_++)h<<=1,m==t-1?(m=0,g.push(n(h)),h=0):m++;for(i=d.charCodeAt(0),_=0;8>_;_++)h=h<<1|1&i,m==t-1?(m=0,g.push(n(h)),h=0):m++,i>>=1}else{for(i=1,_=0;_<u;_++)h=h<<1|i,m==t-1?(m=0,g.push(n(h)),h=0):m++,i=0;for(i=d.charCodeAt(0),_=0;16>_;_++)h=h<<1|1&i,m==t-1?(m=0,g.push(n(h)),h=0):m++,i>>=1}c--,0==c&&(c=a(2,u),u++),delete o[d]}else for(i=r[d],_=0;_<u;_++)h=h<<1|1&i,m==t-1?(m=0,g.push(n(h)),h=0):m++,i>>=1;c--,0==c&&(c=a(2,u),u++)}for(i=2,_=0;_<u;_++)h=h<<1|1&i,m==t-1?(m=0,g.push(n(h)),h=0):m++,i>>=1;for(;;)if(h<<=1,m==t-1){g.push(n(h));break}else m++;return g.join('')},decompress:function(e){return null==e?'':''==e?null:o._decompress(e.length,32768,function(t){return e.charCodeAt(t)})},_decompress:function(e,n,r){var o=[],s=4,l=4,d=3,p='',u=[],g={val:r(0),position:n,index:1},h,m,i,_,y,f,v,b;for(m=0;3>m;m+=1)o[m]=m;for(_=0,f=4,v=1;v!=f;)y=g.val&g.position,g.position>>=1,0==g.position&&(g.position=n,g.val=r(g.index++)),_|=(0<y?1:0)*v,v<<=1;switch(h=_){case 0:for(_=0,f=256,v=1;v!=f;)y=g.val&g.position,g.position>>=1,0==g.position&&(g.position=n,g.val=r(g.index++)),_|=(0<y?1:0)*v,v<<=1;b=t(_);break;case 1:for(_=0,f=65536,v=1;v!=f;)y=g.val&g.position,g.position>>=1,0==g.position&&(g.position=n,g.val=r(g.index++)),_|=(0<y?1:0)*v,v<<=1;b=t(_);break;case 2:return'';}for(o[3]=b,i=b,u.push(b);;){if(g.index>e)return'';for(_=0,f=a(2,d),v=1;v!=f;)y=g.val&g.position,g.position>>=1,0==g.position&&(g.position=n,g.val=r(g.index++)),_|=(0<y?1:0)*v,v<<=1;switch(b=_){case 0:for(_=0,f=256,v=1;v!=f;)y=g.val&g.position,g.position>>=1,0==g.position&&(g.position=n,g.val=r(g.index++)),_|=(0<y?1:0)*v,v<<=1;o[l++]=t(_),b=l-1,s--;break;case 1:for(_=0,f=65536,v=1;v!=f;)y=g.val&g.position,g.position>>=1,0==g.position&&(g.position=n,g.val=r(g.index++)),_|=(0<y?1:0)*v,v<<=1;o[l++]=t(_),b=l-1,s--;break;case 2:return u.join('');}if(0==s&&(s=a(2,d),d++),o[b])p=o[b];else if(b===l)p=i+i.charAt(0);else return null;u.push(p),o[l++]=i+p.charAt(0),s--,i=p,0==s&&(s=a(2,d),d++)}}};return o}(),r;r=function(){return i}.call(t,n,t,e),!(r!==void 0&&(e.exports=r))},function(e,t,n){var a;(function(i){'use strict';function r(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function o(e,t){return e<<t|e>>>32-t}function l(e,n,a,i,l,s){return r(o(r(r(n,e),r(i,s)),l),a)}function s(e,n,a,i,r,o,s){return l(n&a|~n&i,e,n,r,o,s)}function p(e,n,a,i,r,o,s){return l(n&i|a&~i,e,n,r,o,s)}function u(e,n,a,i,r,o,s){return l(n^a^i,e,n,r,o,s)}function g(e,n,a,i,r,o,s){return l(a^(n|~i),e,n,r,o,s)}function d(e,t){e[t>>5]|=128<<t%32,e[(t+64>>>9<<4)+14]=t;var n=1732584193,a=-271733879,o=-1732584194,l=271733878,d,i,c,h,m;for(d=0;d<e.length;d+=16)i=n,c=a,h=o,m=l,n=s(n,a,o,l,e[d],7,-680876936),l=s(l,n,a,o,e[d+1],12,-389564586),o=s(o,l,n,a,e[d+2],17,606105819),a=s(a,o,l,n,e[d+3],22,-1044525330),n=s(n,a,o,l,e[d+4],7,-176418897),l=s(l,n,a,o,e[d+5],12,1200080426),o=s(o,l,n,a,e[d+6],17,-1473231341),a=s(a,o,l,n,e[d+7],22,-45705983),n=s(n,a,o,l,e[d+8],7,1770035416),l=s(l,n,a,o,e[d+9],12,-1958414417),o=s(o,l,n,a,e[d+10],17,-42063),a=s(a,o,l,n,e[d+11],22,-1990404162),n=s(n,a,o,l,e[d+12],7,1804603682),l=s(l,n,a,o,e[d+13],12,-40341101),o=s(o,l,n,a,e[d+14],17,-1502002290),a=s(a,o,l,n,e[d+15],22,1236535329),n=p(n,a,o,l,e[d+1],5,-165796510),l=p(l,n,a,o,e[d+6],9,-1069501632),o=p(o,l,n,a,e[d+11],14,643717713),a=p(a,o,l,n,e[d],20,-373897302),n=p(n,a,o,l,e[d+5],5,-701558691),l=p(l,n,a,o,e[d+10],9,38016083),o=p(o,l,n,a,e[d+15],14,-660478335),a=p(a,o,l,n,e[d+4],20,-405537848),n=p(n,a,o,l,e[d+9],5,568446438),l=p(l,n,a,o,e[d+14],9,-1019803690),o=p(o,l,n,a,e[d+3],14,-187363961),a=p(a,o,l,n,e[d+8],20,1163531501),n=p(n,a,o,l,e[d+13],5,-1444681467),l=p(l,n,a,o,e[d+2],9,-51403784),o=p(o,l,n,a,e[d+7],14,1735328473),a=p(a,o,l,n,e[d+12],20,-1926607734),n=u(n,a,o,l,e[d+5],4,-378558),l=u(l,n,a,o,e[d+8],11,-2022574463),o=u(o,l,n,a,e[d+11],16,1839030562),a=u(a,o,l,n,e[d+14],23,-35309556),n=u(n,a,o,l,e[d+1],4,-1530992060),l=u(l,n,a,o,e[d+4],11,1272893353),o=u(o,l,n,a,e[d+7],16,-155497632),a=u(a,o,l,n,e[d+10],23,-1094730640),n=u(n,a,o,l,e[d+13],4,681279174),l=u(l,n,a,o,e[d],11,-358537222),o=u(o,l,n,a,e[d+3],16,-722521979),a=u(a,o,l,n,e[d+6],23,76029189),n=u(n,a,o,l,e[d+9],4,-640364487),l=u(l,n,a,o,e[d+12],11,-421815835),o=u(o,l,n,a,e[d+15],16,530742520),a=u(a,o,l,n,e[d+2],23,-995338651),n=g(n,a,o,l,e[d],6,-198630844),l=g(l,n,a,o,e[d+7],10,1126891415),o=g(o,l,n,a,e[d+14],15,-1416354905),a=g(a,o,l,n,e[d+5],21,-57434055),n=g(n,a,o,l,e[d+12],6,1700485571),l=g(l,n,a,o,e[d+3],10,-1894986606),o=g(o,l,n,a,e[d+10],15,-1051523),a=g(a,o,l,n,e[d+1],21,-2054922799),n=g(n,a,o,l,e[d+8],6,1873313359),l=g(l,n,a,o,e[d+15],10,-30611744),o=g(o,l,n,a,e[d+6],15,-1560198380),a=g(a,o,l,n,e[d+13],21,1309151649),n=g(n,a,o,l,e[d+4],6,-145523070),l=g(l,n,a,o,e[d+11],10,-1120210379),o=g(o,l,n,a,e[d+2],15,718787259),a=g(a,o,l,n,e[d+9],21,-343485551),n=r(n,i),a=r(a,c),o=r(o,h),l=r(l,m);return[n,a,o,l]}function c(e){var t='',n=32*e.length,a;for(a=0;a<n;a+=8)t+=String.fromCharCode(255&e[a>>5]>>>a%32);return t}function h(e){var t=[],n;for(t[(e.length>>2)-1]=void 0,n=0;n<t.length;n+=1)t[n]=0;var a=8*e.length;for(n=0;n<a;n+=8)t[n>>5]|=(255&e.charCodeAt(n/8))<<n%32;return t}function m(e){return c(d(h(e),8*e.length))}function _(e,t){var n=h(e),a=[],r=[],o,i;for(a[15]=r[15]=void 0,16<n.length&&(n=d(n,8*e.length)),o=0;16>o;o+=1)a[o]=909522486^n[o],r[o]=1549556828^n[o];return i=d(a.concat(h(t)),512+8*t.length),c(d(r.concat(i),640))}function y(e){var t='0123456789abcdef',n='',a,r;for(r=0;r<e.length;r+=1)a=e.charCodeAt(r),n+=t.charAt(15&a>>>4)+t.charAt(15&a);return n}function f(e){return unescape(encodeURIComponent(e))}function v(e){return m(f(e))}function b(e){return y(v(e))}function x(e,t){return _(f(e),f(t))}function E(e,t){return y(x(e,t))}function S(e,t,n){return t?n?x(t,e):E(t,e):n?v(e):b(e)}a=function(){return S}.call(t,n,t,e),!(a!==void 0&&(e.exports=a))})(this)},function(e,t,n){(function(e){function t(){t=function(){},s.Symbol||(s.Symbol=l)}function n(){t();var e=s.Symbol.iterator;e||(e=s.Symbol.iterator=s.Symbol('iterator')),'function'!=typeof Array.prototype[e]&&a(Array.prototype,e,{configurable:!0,writable:!0,value:function(){return i(this)}}),n=function(){}}function i(e){var t=0;return r(function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}})}function r(e){return n(),e={next:e},e[s.Symbol.iterator]=function(){return this},e}function o(e){n(),t(),n();var r=e[Symbol.iterator];return r?r.call(e):i(e)}var a='function'==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value)},s='undefined'!=typeof window&&window===this?this:'undefined'!=typeof e&&null!=e?e:this,l=function(){var e=0;return function(t){return'jscomp_symbol_'+(t||'')+e++}}(),d;if(!window.FormData||!window.FormData.prototype.keys){var c=function(e,t,n){if(2>arguments.length)throw new TypeError('2 arguments required, but only '+arguments.length+' present.');return t instanceof Blob?[e+'',t,void 0===n?'string'==typeof t.name?t.name:'Blob':n+'']:[e+'',t+'']},p=function(e){if(!arguments.length)throw new TypeError('1 argument required, but only 0 present.');return[e+'']},u=function(e){var t=o(e);return e=t.next().value,t=t.next().value,e instanceof Blob&&(e=new File([e],t,{type:e.type,lastModified:e.lastModified})),e},g=window.FormData,h=window.XMLHttpRequest.prototype.send,m=window.Request&&window.fetch;t();var _=window.Symbol&&Symbol.toStringTag,y=new WeakMap,f=Array.from||function(e){return[].slice.call(e)};_&&(Blob.prototype[_]||(Blob.prototype[_]='Blob'),'File'in window&&!File.prototype[_]&&(File.prototype[_]='File'));try{new File([],'')}catch(e){window.File=function(e,t,n){return e=new Blob(e,n),n=n&&void 0!==n.lastModified?new Date(n.lastModified):new Date,Object.defineProperties(e,{name:{value:t},lastModifiedDate:{value:n},lastModified:{value:+n},toString:{value:function(){return'[object File]'}}}),_&&Object.defineProperty(e,_,{value:'File'}),e}}var v=function(e){if(y.set(this,Object.create(null)),!e)return this;e=o(f(e.elements));for(var t=e.next();!t.done;t=e.next())if(t=t.value,t.name&&!t.disabled)if('file'===t.type)for(var n=o(t.files),a=n.next();!a.done;a=n.next())this.append(t.name,a.value);else if('select-multiple'===t.type||'select-one'===t.type)for(n=o(f(t.options)),a=n.next();!a.done;a=n.next())a=a.value,a.selected&&this.append(t.name,a.value);else'checkbox'===t.type||'radio'===t.type?t.checked&&this.append(t.name,t.value):this.append(t.name,t.value)};if(d=v.prototype,d.append=function(e,t,n){var a=y.get(this);a[e]||(a[e]=[]),a[e].push([t,n])},d['delete']=function(e){delete y.get(this)[e]},d.entries=function(){function i(n,i,l){for(;;)switch(s){case 0:for(e in h=y.get(a),r=[],p=h,p)r.push(e);g=0;case 1:if(!(g<r.length)){s=3;break}if(e=r[g],e in p){s=4;break}s=2;break;case 4:c=o(h[e]),d=c.next();case 5:if(d.done){s=7;break}return t=d.value,s=8,{value:[e,u(t)],done:!1};case 8:if(1!=n){s=9;break}throw s=-1,l;case 9:case 6:d=c.next(),s=5;break;case 7:case 2:g++,s=1;break;case 3:s=-1;default:return{value:void 0,done:!0};}}var s=0,a=this,l={next:function(e){return i(0,e,void 0)},throw:function(e){return i(1,void 0,e)},return:function(){throw Error('Not yet implemented')}},t,d,c,e,p,g,r,h;return n(),l[Symbol.iterator]=function(){return this},l},d.forEach=function(t,n){for(var a=o(this),i=a.next(),r;!i.done;i=a.next())r=o(i.value),i=r.next().value,r=r.next().value,t.call(n,r,i,this)},d.get=function(e){var t=y.get(this);return t[e]?u(t[e][0]):null},d.getAll=function(e){return(y.get(this)[e]||[]).map(u)},d.has=function(e){return e in y.get(this)},d.keys=function(){function t(n,r,u){for(;;)switch(i){case 0:p=o(a),e=p.next();case 1:if(e.done){i=3;break}return c=e.value,l=o(c),s=l.next().value,i=4,{value:s,done:!1};case 4:if(1!=n){i=5;break}throw i=-1,u;case 5:case 2:e=p.next(),i=1;break;case 3:i=-1;default:return{value:void 0,done:!0};}}var i=0,a=this,r={next:function(e){return t(0,e,void 0)},throw:function(e){return t(1,void 0,e)},return:function(){throw Error('Not yet implemented')}},s,l,c,e,p;return n(),r[Symbol.iterator]=function(){return this},r},d.set=function(e,t,n){y.get(this)[e]=[[t,n]]},d.values=function(){function t(n,r,u){for(;;)switch(i){case 0:p=o(a),e=p.next();case 1:if(e.done){i=3;break}return c=e.value,l=o(c),l.next(),s=l.next().value,i=4,{value:s,done:!1};case 4:if(1!=n){i=5;break}throw i=-1,u;case 5:case 2:e=p.next(),i=1;break;case 3:i=-1;default:return{value:void 0,done:!0};}}var i=0,a=this,r={next:function(e){return t(0,e,void 0)},throw:function(e){return t(1,void 0,e)},return:function(){throw Error('Not yet implemented')}},s,l,c,e,p;return n(),r[Symbol.iterator]=function(){return this},r},v.prototype._asNative=function(){for(var e=new g,t=o(this),n=t.next(),a;!n.done;n=t.next())a=o(n.value),n=a.next().value,a=a.next().value,e.append(n,a);return e},v.prototype._blob=function(){for(var t='----formdata-polyfill-'+Math.random(),n=[],a=o(this),i=a.next(),r;!i.done;i=a.next())r=o(i.value),i=r.next().value,r=r.next().value,n.push('--'+t+'\r\n'),r instanceof Blob?n.push('Content-Disposition: form-data; name="'+i+'"; filename="'+r.name+'"\r\n','Content-Type: '+(r.type||'application/octet-stream')+'\r\n\r\n',r,'\r\n'):n.push('Content-Disposition: form-data; name="'+i+'"\r\n\r\n'+r+'\r\n');return n.push('--'+t+'--'),new Blob(n,{type:'multipart/form-data; boundary='+t})},t(),n(),v.prototype[Symbol.iterator]=function(){return this.entries()},v.prototype.toString=function(){return'[object FormData]'},_&&(v.prototype[_]='FormData'),[['append',c],['delete',p],['get',p],['getAll',p],['has',p],['set',c]].forEach(function(e){var t=v.prototype[e[0]];v.prototype[e[0]]=function(){return t.apply(this,e[1].apply(this,f(arguments)))}}),XMLHttpRequest.prototype.send=function(e){e instanceof v&&(e=e._blob(),this.setRequestHeader('Content-Type',e.type)),h.call(this,e)},m){var x=window.fetch;window.fetch=function(e,t){return t&&t.body&&t.body instanceof v&&(t.body=t.body._blob()),x(e,t)}}window.FormData=v}}).call(t,n(0))},function(e,t,n){'use strict';var a=n(160),i=n.n(a);let r=['getInt16',2,!0],o=['getUint16',2,!0],s=['getUint32',4,!0],l=[[0,[[r,'instantaneous_power']]],[1,[[['getUint8',1],'pedal_power_balance']]],[2,[]],[4,[[o,'accumulated_torque']]],[8,[]],[16,[[s,'cumulative_wheel_revolutions'],[o,'last_wheel_event_time']]],[32,[[o,'cumulative_crank_revolutions'],[o,'last_crank_event_time']]],[64,[[r,'maximum_force_magnitude'],[r,'minimum_force_magnitude']]],[128,[[r,'maximum_torque_magnitude'],[r,'minimum_torque_magnitude']]],[256,[[['getUint8',3],'maximum_minimum_angle']]],[512,[[o,'top_dead_spot_angle']]],[1024,[[o,'bottom_dead_spot_angle']]],[2048,[[o,'accumulated_energy']]],[4096,[]]],d=[[1,[[s,'cumulative_wheel_revolutions'],[o,'last_wheel_event_time']]],[2,[[o,'cumulative_crank_revolutions'],[o,'last_crank_event_time']]]],c={1:'garmin',2:'garmin_fr405_antfs',3:'zephyr',4:'dayton',5:'idt',6:'srm',7:'quarq',8:'ibike',9:'saris',10:'spark_hk',11:'tanita',12:'echowell',13:'dynastream_oem',14:'nautilus',15:'dynastream',16:'timex',17:'metrigear',18:'xelic',19:'beurer',20:'cardiosport',21:'a_and_d',22:'hmm',23:'suunto',24:'thita_elektronik',25:'gpulse',26:'clean_mobile',27:'pedal_brain',28:'peaksware',29:'saxonar',30:'lemond_fitness',31:'dexcom',32:'wahoo_fitness',33:'octane_fitness',34:'archinoetics',35:'the_hurt_box',36:'citizen_systems',37:'magellan',38:'osynce',39:'holux',40:'concept2',42:'one_giant_leap',43:'ace_sensor',44:'brim_brothers',45:'xplova',46:'perception_digital',47:'bf1systems',48:'pioneer',49:'spantec',50:'metalogics',51:'4iiiis',52:'seiko_epson',53:'seiko_epson_oem',54:'ifor_powell',55:'maxwell_guider',56:'star_trac',57:'breakaway',58:'alatech_technology_ltd',59:'mio_technology_europe',60:'rotor',61:'geonaute',62:'id_bike',63:'specialized',64:'wtek',65:'physical_enterprises',66:'north_pole_engineering',67:'bkool',68:'cateye',69:'stages_cycling',70:'sigmasport',71:'tomtom',72:'peripedal',73:'wattbike',76:'moxy',77:'ciclosport',78:'powerbahn',79:'acorn_projects_aps',80:'lifebeam',81:'bontrager',82:'wellgo',83:'scosche',84:'magura',85:'woodway',86:'elite',87:'nielsen_kellerman',88:'dk_city',89:'tacx',90:'direction_technology',91:'magtonic',92:'1partcarbon',93:'inside_ride_technologies',94:'sound_of_motion',95:'stryd',96:'icg',97:'MiPulse',98:'bsx_athletics',99:'look',100:'campagnolo_srl',101:'body_bike_smart',102:'praxisworks',103:'limits_technology',104:'topaction_technology',105:'cosinuss',106:'fitcare',107:'magene',108:'giant_manufacturing_co',109:'tigrasport',110:'salutron',111:'technogym',112:'bryton_sensors',113:'latitude_limited',114:'soaring_technology',115:'igpsport',116:'thinkrider',117:'gopher_sport',118:'waterrower',255:'development',257:'healthandlife',258:'lezyne',259:'scribe_labs',260:'zwift',261:'watteam',262:'recon',263:'favero_electronics',264:'dynovelo',265:'strava',266:'precor',267:'bryton',268:'sram',269:'navman',270:'cobi',271:'spivi',272:'mio_magellan',273:'evesports',274:'sensitivus_gauge',275:'podoon',276:'life_time_fitness',277:'falco_e_motors',278:'minoura',279:'cycliq',280:'luxottica',281:'trainer_road',282:'the_sufferfest',283:'fullspeedahead',284:'virtualtraining',285:'feedbacksports',286:'omata',287:'vdo',5759:'actigraphcorp'};class p{getData(e){let t=0,n;16===this.mask_size?(n=e.getUint16(0,!0),t+=2):(n=e.getUint8(0),t+=1);let a=[];if(0===this.fields[0][0])for(let e of this.fields[0][1])a.push(e);for(let[t,i]of this.fields)if(n&t)for(let e of i)a.push(e);let i={};for(let n of a){var[[o,s,l],r]=n;let a;a=l?e[o](t,l):e[o](t),i[r]=a,t+=s}return i}}class u extends p{constructor(){super(),this.fields=d,this.mask_size=8}}class g extends p{constructor(){super(),this.fields=l,this.mask_size=16}}t.f=g;class h{constructor(){this.listeners={},this.timeoutID=void 0,this.milliTimeout=5e3}clearValueOnTimeout(e){this.timeoutID!==void 0&&clearTimeout(this.timeoutID),this.timeoutID=setTimeout(()=>{if(this.timeoutID=void 0,e.constructor===Array)for(let t of e)this.dispatch(t,0);else this.dispatch(e,0)},this.milliTimeout)}addListener(e,t){e in this.listeners||(this.listeners[e]=[]),this.listeners[e].push(t)}dispatch(e,t){e in this.listeners||(this.listeners[e]=[]);for(let n of this.listeners[e])n(t)}}class m extends h{constructor(e,t,n,a){super(),this.device=e,this.server=t,this.service=n,this.characteristic=a,this.name=this.device.name,this.id=this.device.id,this.listening=!1,this.device.addEventListener('gattserverdisconnected',(t)=>{this.gattserverdisconnected(t).catch((e)=>{console.log('Error: ',e)})})}async gattserverdisconnected(){console.log('Reconnecting'),this.server=await this.device.gatt.connect(),this.service=await this.server.getPrimaryService(this.serviceId),this.characteristic=await this.service.getCharacteristic(this.characteristicId),this.listening&&(this.listening=!1,this.listen())}}t.d=class extends m{constructor(e,t,n,a){super(e,t,n,a),this.serviceId=6168,this.characteristicId=10851,this.parser=new g,this.lastCrankRevolutions=0,this.lastCrankTime=0}listen(){this.listening||(this.characteristic.addEventListener('characteristicvaluechanged',(e)=>{let t=this.parser.getData(e.target.value),n=t.instantaneous_power,a=t.cumulative_crank_revolutions,i=t.last_crank_event_time;this.lastCrankTime>i&&(this.lastCrankTime-=65536),this.lastCrankRevolutions>a&&(this.lastCrankRevolutions-=65536);let r=a-this.lastCrankRevolutions,o=(i-this.lastCrankTime)/1024,s=0;0<o&&(s=60*(r/o)),this.lastCrankRevolutions=a,this.lastCrankTime=i,this.dispatch('power',n),this.dispatch('cadence',s),this.clearValueOnTimeout(['power','cadence'])}),this.characteristic.startNotifications(),this.listening=!0)}};t.e=class extends m{constructor(e,t,n,a){super(e,t,n,a),this.serviceId=6168,this.characteristicId=10851,this.parser=new g}listen(){this.listening||(this.characteristic.addEventListener('characteristicvaluechanged',(e)=>{let t=this.parser.getData(e.target.value),n=t.instantaneous_power;this.dispatch('power',n),this.clearValueOnTimeout('power')}),this.characteristic.startNotifications(),this.listening=!0)}};t.b=class extends m{constructor(e,t,n,a){super(e,t,n,a),this.serviceId=6166,this.characteristicId=10843,this.parser=new u,this.lastCrankRevolutions=0,this.lastCrankTime=0}listen(){this.listening||(this.characteristic.addEventListener('characteristicvaluechanged',(e)=>{let t=this.parser.getData(e.target.value),n=t.cumulative_crank_revolutions,a=t.last_crank_event_time;if(n!==void 0&&a!==void 0){this.lastCrankTime>a&&(this.lastCrankTime-=65536),this.lastCrankRevolutions>n&&(this.lastCrankRevolutions-=65536);let e=n-this.lastCrankRevolutions,t=(a-this.lastCrankTime)/1024,i=0;0<t&&(i=60*(e/t)),this.lastCrankRevolutions=n,this.lastCrankTime=a,this.dispatch('cadence',i),this.clearValueOnTimeout('cadence')}}),this.characteristic.startNotifications(),this.listening=!0)}};t.c=class extends m{constructor(e,t,n,a){super(e,t,n,a),this.serviceId=6157,this.characteristicId=10807}listen(){this.listening||(this.characteristic.addEventListener('characteristicvaluechanged',(e)=>{let t=e.target.value.getUint8(1);this.dispatch('hr',t),this.clearValueOnTimeout('hr')}),this.characteristic.startNotifications(),this.listening=!0)}};t.g=class{constructor(){this.listeners={},this.listening=!1,this.watts=0,this.id='virtual',this.name='Virtual Power Meter'}listen(){if(!this.listening){document.getElementById('ui-vpower-container').style.display='block';let e=document.getElementById('vpower');e.value=this.watts,e.onchange=()=>{this.watts=parseInt(e.value)},setInterval(()=>{this.dispatch('power',this.watts)},750),this.listening=!0}}addListener(e,t){e in this.listeners||(this.listeners[e]=[]),this.listeners[e].push(t)}dispatch(e,t){e in this.listeners||(this.listeners[e]=[]);for(let n of this.listeners[e])n(t)}};class _ extends h{constructor(e,t,n,a){super(),this.type=e,this.manId=t,this.modelNum=n,this.deviceId=a,this.setName()}listen(){}setName(){let e='Unknown';this.manId in c&&(e=c[this.manId].split('_').map((e)=>{return e[0].toUpperCase()+e.substr(1)}).join(' ')),this.name=e+' - '+this.deviceId}}class y extends _{constructor(e,t,n,a,i){super(t,n,a,i),this.timeoutID=void 0,this.id=e}antMessage(e){let t=e.Power;t!==void 0&&(this.dispatch('power',t),this.clearValueOnTimeout('power'))}}class f extends _{constructor(e,t,n,a,i){super(t,n,a,i),this.timeoutID=void 0,this.id=e}antMessage(e){let t;e.Cadence!==void 0&&(t=e.Cadence),e.CalculatedCadence!==void 0&&(t=e.CalculatedCadence),t!==void 0&&(this.dispatch('cadence',t),this.clearValueOnTimeout('cadence'))}}class v extends _{constructor(e,t,n,a,i){super(t,n,a,i),this.timeoutID=void 0,this.id=e}antMessage(e){let t=e.ComputedHeartRate;t!==void 0&&(this.dispatch('hr',t),this.clearValueOnTimeout('hr'))}}t.a=class{constructor(e='http://localhost:8000/'){this.url=e,this.listeners={},this.devicesByType={},this.devices={},this.url.startsWith('http')||(this.url='http://'+this.url),this.url.endsWith('/')||(this.url+='/'),this.meterClasses={hr:v,bike_power:y,speed_cadence:f}}addListener(e,t){e in this.listeners||(this.listeners[e]=[]),this.listeners[e].push(t)}dispatch(e,t){e in this.listeners||(this.listeners[e]=[]);for(let n of this.listeners[e])n(t)}scan(){let e=new i.a.Client(this.url,{timeout:120,retry:10});e.on('transport:down',(e)=>{this.dispatch('error',e)}),e.subscribe('/*',(e)=>{const t=JSON.parse(e.text);let n=[t.type];'bike_power'===t.type&&(t.Cadence||t.CalculatedCadence)&&n.push('speed_cadence');for(let a of n){let e=a+t.DeviceID;if(!(e in this.devicesByType)&&a in this.meterClasses){let n=new this.meterClasses[a](e,a,t.ManId,t.ModelNum,t.DeviceID);t.DeviceID in this.devices||(this.devices[t.DeviceID]=[]),this.devices[t.DeviceID].push(n),this.devicesByType[e]=n,this.dispatch(a,n)}}if(t.DeviceID in this.devices)for(let e of this.devices[t.DeviceID])e.antMessage(t);if((void 0!==t.ManId||void 0!==t.ModelNum)&&t.DeviceID in this.devices)for(let e of this.devices[t.DeviceID]){let n=!1;void 0!==t.ManId&&t.ManId!==e.manId&&(e.manId=t.ManId,n=!0),void 0!==t.ModelNum&&t.ModelNum!==e.modelNum&&(e.modelNum=t.ModelNum,n=!0),n&&(e.setName(),this.dispatch('namechange',e))}})}}},function(e,t,n){'use strict';var a=n(64),i=n(10),r={VERSION:a.VERSION,Client:n(161),Scheduler:n(71)};i.wrapper=r,e.exports=r},function(e,t,n){'use strict';(function(t){var a=n(65),i=n(2),r=n(15),o=n(4),s=n(26),l=n(27),d=n(64),c=n(1),p=n(163),u=n(12),g=n(10),h=n(28),m=n(66),_=n(165),y=n(174),f=n(175),v=n(176),b=n(177),x=i({className:'Client',UNCONNECTED:1,CONNECTING:2,CONNECTED:3,DISCONNECTED:4,HANDSHAKE:'handshake',RETRY:'retry',NONE:'none',CONNECTION_TIMEOUT:60,DEFAULT_ENDPOINT:'/bayeux',INTERVAL:0,initialize:function(e,n){this.info('New client created for ?',e),n=n||{},p(n,['interval','timeout','endpoints','proxy','retry','scheduler','websocketExtensions','tls','ca']),this._channels=new m.Set,this._dispatcher=_.create(this,e||this.DEFAULT_ENDPOINT,n),this._messageId=0,this._state=this.UNCONNECTED,this._responseCallbacks={},this._advice={reconnect:this.RETRY,interval:1e3*(n.interval||this.INTERVAL),timeout:1e3*(n.timeout||this.CONNECTION_TIMEOUT)},this._dispatcher.timeout=this._advice.timeout/1e3,this._dispatcher.bind('message',this._receiveMessage,this),l.Event&&t.onbeforeunload!==void 0&&l.Event.on(t,'beforeunload',function(){0>s.indexOf(this._dispatcher._disabled,'autodisconnect')&&this.disconnect()},this)},addWebsocketExtension:function(e){return this._dispatcher.addWebsocketExtension(e)},disable:function(e){return this._dispatcher.disable(e)},setHeader:function(e,t){return this._dispatcher.setHeader(e,t)},handshake:function(e,n){if(this._advice.reconnect!==this.NONE&&this._state===this.UNCONNECTED){this._state=this.CONNECTING;var i=this;this.info('Initiating handshake with ?',o.stringify(this._dispatcher.endpoint)),this._dispatcher.selectTransport(d.MANDATORY_CONNECTION_TYPES),this._sendMessage({channel:m.HANDSHAKE,version:d.BAYEUX_VERSION,supportedConnectionTypes:this._dispatcher.getConnectionTypes()},{},function(r){r.successful?(this._state=this.CONNECTED,this._dispatcher.clientId=r.clientId,this._dispatcher.selectTransport(r.supportedConnectionTypes),this.info('Handshake successful: ?',this._dispatcher.clientId),this.subscribe(this._channels.getKeys(),!0),e&&a(function(){e.call(n)})):(this.info('Handshake unsuccessful'),t.setTimeout(function(){i.handshake(e,n)},1e3*this._dispatcher.retry),this._state=this.UNCONNECTED)},this)}},connect:function(e,t){if(this._advice.reconnect!==this.NONE&&this._state!==this.DISCONNECTED){if(this._state===this.UNCONNECTED)return this.handshake(function(){this.connect(e,t)},this);(this.callback(e,t),this._state===this.CONNECTED)&&(this.info('Calling deferred actions for ?',this._dispatcher.clientId),this.setDeferredStatus('succeeded'),this.setDeferredStatus('unknown'),this._connectRequest||(this._connectRequest=!0,this.info('Initiating connection for ?',this._dispatcher.clientId),this._sendMessage({channel:m.CONNECT,clientId:this._dispatcher.clientId,connectionType:this._dispatcher.connectionType},{},this._cycleConnection,this)))}},disconnect:function(){if(this._state===this.CONNECTED){this._state=this.DISCONNECTED,this.info('Disconnecting ?',this._dispatcher.clientId);var e=new v;return this._sendMessage({channel:m.DISCONNECT,clientId:this._dispatcher.clientId},{},function(t){t.successful?(this._dispatcher.close(),e.setDeferredStatus('succeeded')):e.setDeferredStatus('failed',y.parse(t.error))},this),this.info('Clearing channel listeners for ?',this._dispatcher.clientId),this._channels=new m.Set,e}},subscribe:function(e,t,n){if(e instanceof Array)return s.map(e,function(e){return this.subscribe(e,t,n)},this);var a=new b(this,e,t,n),i=!0===t,r=this._channels.hasSubscription(e);return r&&!i?(this._channels.subscribe([e],a),a.setDeferredStatus('succeeded'),a):(this.connect(function(){this.info('Client ? attempting to subscribe to ?',this._dispatcher.clientId,e),i||this._channels.subscribe([e],a),this._sendMessage({channel:m.SUBSCRIBE,clientId:this._dispatcher.clientId,subscription:e},{},function(t){if(!t.successful)return a.setDeferredStatus('failed',y.parse(t.error)),this._channels.unsubscribe(e,a);var n=[].concat(t.subscription);this.info('Subscription acknowledged for ? to ?',this._dispatcher.clientId,n),a.setDeferredStatus('succeeded')},this)},this),a)},unsubscribe:function(e,t){if(e instanceof Array)return s.map(e,function(e){return this.unsubscribe(e,t)},this);var n=this._channels.unsubscribe(e,t);n&&this.connect(function(){this.info('Client ? attempting to unsubscribe from ?',this._dispatcher.clientId,e),this._sendMessage({channel:m.UNSUBSCRIBE,clientId:this._dispatcher.clientId,subscription:e},{},function(e){if(e.successful){var t=[].concat(e.subscription);this.info('Unsubscription acknowledged for ? from ?',this._dispatcher.clientId,t)}},this)},this)},publish:function(e,t,n){p(n||{},['attempts','deadline']);var a=new v;return this.connect(function(){this.info('Client ? queueing published message to ?: ?',this._dispatcher.clientId,e,t),this._sendMessage({channel:e,data:t,clientId:this._dispatcher.clientId},n,function(e){e.successful?a.setDeferredStatus('succeeded'):a.setDeferredStatus('failed',y.parse(e.error))},this)},this),a},_sendMessage:function(e,t,n,a){e.id=this._generateMessageId();var i=this._advice.timeout?1.2*this._advice.timeout/1e3:1.2*this._dispatcher.retry;this.pipeThroughExtensions('outgoing',e,null,function(e){e&&(n&&(this._responseCallbacks[e.id]=[n,a]),this._dispatcher.sendMessage(e,i,t||{}))},this)},_generateMessageId:function(){return this._messageId+=1,4294967296<=this._messageId&&(this._messageId=0),this._messageId.toString(36)},_receiveMessage:function(e){var t=e.id,n;e.successful!==void 0&&(n=this._responseCallbacks[t],delete this._responseCallbacks[t]),this.pipeThroughExtensions('incoming',e,null,function(e){e&&(e.advice&&this._handleAdvice(e.advice),this._deliverMessage(e),n&&n[0].call(n[1],e))},this)},_handleAdvice:function(e){c(this._advice,e),this._dispatcher.timeout=this._advice.timeout/1e3,this._advice.reconnect===this.HANDSHAKE&&this._state!==this.DISCONNECTED&&(this._state=this.UNCONNECTED,this._dispatcher.clientId=null,this._cycleConnection())},_deliverMessage:function(e){e.channel&&void 0!==e.data&&(this.info('Client ? calling listeners for ? with ?',this._dispatcher.clientId,e.channel,e.data),this._channels.distributeMessage(e))},_cycleConnection:function(){this._connectRequest&&(this._connectRequest=null,this.info('Closed connection for ?',this._dispatcher.clientId));var e=this;t.setTimeout(function(){e.connect()},this._advice.interval)}});c(x.prototype,u),c(x.prototype,h),c(x.prototype,g),c(x.prototype,f),e.exports=x}).call(t,n(0))},function(e,t,n){'use strict';(function(t){function n(e){r.length||(p(),o=!0),r[r.length]=e}function a(){for(;s<r.length;){var e=s;if(++s,r[e].call(),s>l){for(var t=0,n=r.length-s;t<n;t++)r[t]=r[t+s];r.length-=s,s=0}}r.length=0,s=0,o=!1}function i(e){return function(){function t(){clearTimeout(n),clearInterval(a),e()}var n=setTimeout(t,0),a=setInterval(t,50)}}e.exports=n;var r=[],o=!1,s=0,l=1024,d='undefined'==typeof t?self:t,c=d.MutationObserver||d.WebKitMutationObserver,p;p='function'==typeof c?function(e){var t=1,n=new c(e),a=document.createTextNode('');return n.observe(a,{characterData:!0}),function(){t=-t,a.data=t}}(a):i(a),n.requestFlush=p,n.makeRequestCallFromTimer=i}).call(t,n(0))},function(e,t,n){'use strict';var a=n(26);e.exports=function(e,t){for(var n in e)if(0>a.indexOf(t,n))throw new Error('Unrecognized option: '+n)}},function(e){function t(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0;n<e.length;n++)if(t===e[n])return n;return-1}function n(){}var a='function'==typeof Array.isArray?Array.isArray:function(e){return'[object Array]'===Object.prototype.toString.call(e)};e.exports=n,n.prototype.emit=function(e){if('error'===e&&(!this._events||!this._events.error||a(this._events.error)&&!this._events.error.length)){if(arguments[1]instanceof Error)throw arguments[1];else throw new Error('Uncaught, unspecified \'error\' event.');return!1}if(!this._events)return!1;var t=this._events[e];if(!t)return!1;if('function'==typeof t){switch(arguments.length){case 1:t.call(this);break;case 2:t.call(this,arguments[1]);break;case 3:t.call(this,arguments[1],arguments[2]);break;default:var n=Array.prototype.slice.call(arguments,1);t.apply(this,n);}return!0}if(a(t)){for(var n=Array.prototype.slice.call(arguments,1),r=t.slice(),o=0,i=r.length;o<i;o++)r[o].apply(this,n);return!0}return!1},n.prototype.addListener=function(e,t){if('function'!=typeof t)throw new Error('addListener only takes instances of Function');return this._events||(this._events={}),this.emit('newListener',e,t),this._events[e]?a(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){var n=this;return n.on(e,function a(){n.removeListener(e,a),t.apply(this,arguments)}),this},n.prototype.removeListener=function(e,n){if('function'!=typeof n)throw new Error('removeListener only takes instances of Function');if(!this._events||!this._events[e])return this;var r=this._events[e];if(a(r)){var o=t(r,n);if(0>o)return this;r.splice(o,1),0==r.length&&delete this._events[e]}else this._events[e]===n&&delete this._events[e];return this},n.prototype.removeAllListeners=function(e){return 0===arguments.length?(this._events={},this):(e&&this._events&&this._events[e]&&(this._events[e]=null),this)},n.prototype.listeners=function(e){return this._events||(this._events={}),this._events[e]||(this._events[e]=[]),a(this._events[e])||(this._events[e]=[this._events[e]]),this._events[e]}},function(e,t,n){'use strict';(function(t){var a=n(2),r=n(4),o=n(68),i=n(1),s=n(10),l=n(28),d=n(166),c=n(71),p=a({className:'Dispatcher',MAX_REQUEST_SIZE:2048,DEFAULT_RETRY:5,UP:1,DOWN:2,initialize:function(e,t,a){this._client=e,this.endpoint=r.parse(t),this._alternates=a.endpoints||{},this.cookies=o.CookieJar&&new o.CookieJar,this._disabled=[],this._envelopes={},this.headers={},this.retry=a.retry||this.DEFAULT_RETRY,this._scheduler=a.scheduler||c,this._state=0,this.transports={},this.wsExtensions=[],this.proxy=a.proxy||{},'string'==typeof this._proxy&&(this._proxy={origin:this._proxy});var s=a.websocketExtensions;if(s){s=[].concat(s);for(var l=0,i=s.length;l<i;l++)this.addWebsocketExtension(s[l])}for(var n in this.tls=a.tls||{},this.tls.ca=this.tls.ca||a.ca,this._alternates)this._alternates[n]=r.parse(this._alternates[n]);this.maxRequestSize=this.MAX_REQUEST_SIZE},endpointFor:function(e){return this._alternates[e]||this.endpoint},addWebsocketExtension:function(e){this.wsExtensions.push(e)},disable:function(e){this._disabled.push(e)},setHeader:function(e,t){this.headers[e]=t},close:function(){var e=this._transport;delete this._transport,e&&e.close()},getConnectionTypes:function(){return d.getConnectionTypes()},selectTransport:function(e){d.get(this,e,this._disabled,function(e){this.debug('Selected ? transport for ?',e.connectionType,r.stringify(e.endpoint));e===this._transport||(this._transport&&this._transport.close(),this._transport=e,this.connectionType=e.connectionType)},this)},sendMessage:function(e,t,n){n=n||{};var a=e.id,i=n.attempts,r=n.deadline&&new Date().getTime()+1e3*n.deadline,o=this._envelopes[a],s;o||(s=new this._scheduler(e,{timeout:t,interval:this.retry,attempts:i,deadline:r}),o=this._envelopes[a]={message:e,scheduler:s}),this._sendEnvelope(o)},_sendEnvelope:function(e){if(this._transport&&!(e.request||e.timer)){var n=e.message,a=e.scheduler,i=this;return a.isDeliverable()?void(e.timer=t.setTimeout(function(){i.handleError(n)},1e3*a.getTimeout()),a.send(),e.request=this._transport.sendMessage(n)):(a.abort(),void delete this._envelopes[n.id])}},handleResponse:function(e){var n=this._envelopes[e.id];e.successful!==void 0&&n&&(n.scheduler.succeed(),delete this._envelopes[e.id],t.clearTimeout(n.timer)),this.trigger('message',e);this._state===this.UP||(this._state=this.UP,this._client.trigger('transport:up'))},handleError:function(e,n){var a=this._envelopes[e.id],i=a&&a.request,r=this;if(i){i.then(function(e){e&&e.abort&&e.abort()});var o=a.scheduler;o.fail(),t.clearTimeout(a.timer),a.request=a.timer=null,n?this._sendEnvelope(a):a.timer=t.setTimeout(function(){a.timer=null,r._sendEnvelope(a)},1e3*o.getInterval()),this._state===this.DOWN||(this._state=this.DOWN,this._client.trigger('transport:down'))}}});p.create=function(e,t,n){return new p(e,t,n)},i(p.prototype,l),i(p.prototype,s),e.exports=p}).call(t,n(0))},function(e,t,n){'use strict';var a=n(7);a.register('websocket',n(169)),a.register('eventsource',n(171)),a.register('long-polling',n(70)),a.register('cross-origin-long-polling',n(172)),a.register('callback-polling',n(173)),e.exports=a},function(e){function t(){throw new Error('setTimeout has not been defined')}function n(){throw new Error('clearTimeout has not been defined')}function a(e){if(c===setTimeout)return setTimeout(e,0);if((c===t||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function i(e){if(p===clearTimeout)return clearTimeout(e);if((p===n||!p)&&clearTimeout)return p=clearTimeout,clearTimeout(e);try{return p(e)}catch(t){try{return p.call(null,e)}catch(t){return p.call(this,e)}}}function r(){g&&m&&(g=!1,m.length?u=m.concat(u):h=-1,u.length&&o())}function o(){if(!g){var e=a(r);g=!0;for(var t=u.length;t;){for(m=u,u=[];++h<t;)m&&m[h].run();h=-1,t=u.length}m=null,g=!1,i(e)}}function s(e,t){this.fun=e,this.array=t}function l(){}var d=e.exports={},c,p;(function(){try{c='function'==typeof setTimeout?setTimeout:t}catch(n){c=t}try{p='function'==typeof clearTimeout?clearTimeout:n}catch(t){p=n}})();var u=[],g=!1,h=-1,m;d.nextTick=function(e){var t=Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new s(e,t)),1!==u.length||g||a(o)},s.prototype.run=function(){this.fun.apply(null,this.array)},d.title='browser',d.browser=!0,d.env={},d.argv=[],d.version='',d.versions={},d.on=l,d.addListener=l,d.once=l,d.off=l,d.removeListener=l,d.removeAllListeners=l,d.emit=l,d.prependListener=l,d.prependOnceListener=l,d.listeners=function(){return[]},d.binding=function(){throw new Error('process.binding is not supported')},d.cwd=function(){return'/'},d.chdir=function(){throw new Error('process.chdir is not supported')},d.umask=function(){return 0}},function(e,t,n){'use strict';(function(t){e.exports={addTimeout:function(e,n,a,i){if(this._timeouts=this._timeouts||{},!this._timeouts.hasOwnProperty(e)){var r=this;this._timeouts[e]=t.setTimeout(function(){delete r._timeouts[e],a.call(i)},1e3*n)}},removeTimeout:function(e){this._timeouts=this._timeouts||{};var n=this._timeouts[e];n&&(t.clearTimeout(n),delete this._timeouts[e])},removeAllTimeouts:function(){for(var e in this._timeouts=this._timeouts||{},this._timeouts)this.removeTimeout(e)}}}).call(t,n(0))},function(e,t,n){'use strict';(function(t){var a=n(2),r=n(15),o=n(69),i=n(4),s=n(27),l=n(29),d=n(1),c=n(11),p=n(170),u=n(12),g=n(7),h=d(a(g,{UNCONNECTED:1,CONNECTING:2,CONNECTED:3,batching:!1,isUsable:function(e,t){this.callback(function(){e.call(t,!0)}),this.errback(function(){e.call(t,!1)}),this.connect()},request:function(e){this._pending=this._pending||new o;for(var t=0,a=e.length;t<a;t++)this._pending.add(e[t]);var n=this,i=new r(function(t){n.callback(function(n){n&&1===n.readyState&&(n.send(c(e)),t(n))}),n.connect()});return{abort:function(){i.then(function(e){e.close()})}}},connect:function(){if(!h._unloaded&&(this._state=this._state||this.UNCONNECTED,this._state===this.UNCONNECTED)){this._state=this.CONNECTING;var e=this._createSocket();if(!e)return this.setDeferredStatus('failed');var t=this;e.onopen=function(){e.headers&&t._storeCookies(e.headers['set-cookie']),t._socket=e,t._state=t.CONNECTED,t._everConnected=!0,t._ping(),t.setDeferredStatus('succeeded',e)};var n=!1;e.onclose=e.onerror=function(){if(!n){n=!0;var a=t._state===t.CONNECTED;e.onopen=e.onclose=e.onerror=e.onmessage=null,delete t._socket,t._state=t.UNCONNECTED,t.removeTimeout('ping');var i=t._pending?t._pending.toArray():[];delete t._pending,a||t._everConnected?(t.setDeferredStatus('unknown'),t._handleError(i,a)):t.setDeferredStatus('failed')}},e.onmessage=function(e){var a;try{a=JSON.parse(e.data)}catch(e){}if(a){a=[].concat(a);for(var r=0,i=a.length;r<i;r++)void 0!==a[r].successful&&t._pending.remove(a[r]);t._receive(a)}}}},close:function(){this._socket&&this._socket.close()},_createSocket:function(){var e=h.getSocketUrl(this.endpoint),t=this._dispatcher.headers,n=this._dispatcher.wsExtensions,a=this._getCookies(),i=this._dispatcher.tls,r={extensions:n,headers:t,proxy:this._proxy,tls:i};return''!==a&&(r.headers.Cookie=a),p.create(e,[],r)},_ping:function(){this._socket&&1===this._socket.readyState&&(this._socket.send('[]'),this.addTimeout('ping',this._dispatcher.timeout/2,this._ping,this))}}),{PROTOCOLS:{"http:":'ws:',"https:":'wss:'},create:function(e,t){var n=e.transports.websocket=e.transports.websocket||{};return n[t.href]=n[t.href]||new this(e,t),n[t.href]},getSocketUrl:function(e){return e=l(e),e.protocol=this.PROTOCOLS[e.protocol],i.stringify(e)},isUsable:function(e,t,n,a){this.create(e,t).isUsable(n,a)}});d(h.prototype,u),s.Event&&t.onbeforeunload!==void 0&&s.Event.on(t,'beforeunload',function(){h._unloaded=!0}),e.exports=h}).call(t,n(0))},function(e,t,n){'use strict';(function(t){var n=t.MozWebSocket||t.WebSocket;e.exports={create:function(e){return'function'==typeof n?new n(e):null}}}).call(t,n(0))},function(e,t,n){'use strict';(function(t){var a=n(2),i=n(4),r=n(29),o=n(1),s=n(12),l=n(7),d=n(70),c=o(a(l,{initialize:function(e,n){if(l.prototype.initialize.call(this,e,n),!t.EventSource)return this.setDeferredStatus('failed');this._xhr=new d(e,n),n=r(n),n.pathname+='/'+e.clientId;var a=new t.EventSource(i.stringify(n)),o=this;a.onopen=function(){o._everConnected=!0,o.setDeferredStatus('succeeded')},a.onerror=function(){o._everConnected?o._handleError([]):(o.setDeferredStatus('failed'),a.close())},a.onmessage=function(e){var t;try{t=JSON.parse(e.data)}catch(e){}t?o._receive(t):o._handleError([])},this._socket=a},close:function(){this._socket&&(this._socket.onopen=this._socket.onerror=this._socket.onmessage=null,this._socket.close(),delete this._socket)},isUsable:function(e,t){this.callback(function(){e.call(t,!0)}),this.errback(function(){e.call(t,!1)})},encode:function(e){return this._xhr.encode(e)},request:function(e){return this._xhr.request(e)}}),{isUsable:function(e,t,n,a){var i=e.clientId;return i?void d.isUsable(e,t,function(i){return i?void this.create(e,t).isUsable(n,a):n.call(a,!1)},this):n.call(a,!1)},create:function(e,t){var n=e.transports.eventsource=e.transports.eventsource||{},a=e.clientId,o=r(t);return o.pathname+='/'+(a||''),o=i.stringify(o),n[o]=n[o]||new this(e,t),n[o]}});o(c.prototype,s),e.exports=c}).call(t,n(0))},function(e,t,n){'use strict';(function(t){var a=n(2),i=n(69),r=n(4),o=n(1),s=n(11),l=n(7),d=o(a(l,{encode:function(e){return'message='+encodeURIComponent(s(e))},request:function(e){var n=t.XDomainRequest?XDomainRequest:XMLHttpRequest,a=new n,i=++d._id,o=this._dispatcher.headers,s=this,l;if(a.open('POST',r.stringify(this.endpoint),!0),a.setRequestHeader)for(l in a.setRequestHeader('Pragma','no-cache'),o)o.hasOwnProperty(l)&&a.setRequestHeader(l,o[l]);var c=function(){return!!a&&void(d._pending.remove(i),a.onload=a.onerror=a.ontimeout=a.onprogress=null,a=null)};return a.onload=function(){var t;try{t=JSON.parse(a.responseText)}catch(e){}c(),t?s._receive(t):s._handleError(e)},a.onerror=a.ontimeout=function(){c(),s._handleError(e)},a.onprogress=function(){},n===t.XDomainRequest&&d._pending.add({id:i,xhr:a}),a.send(this.encode(e)),a}}),{_id:0,_pending:new i,isUsable:function(e,n,a,i){if(r.isSameOrigin(n))return a.call(i,!1);if(t.XDomainRequest)return a.call(i,n.protocol===location.protocol);if(t.XMLHttpRequest){var o=new XMLHttpRequest;return a.call(i,void 0!==o.withCredentials)}return a.call(i,!1)}});e.exports=d}).call(t,n(0))},function(e,t,n){'use strict';(function(t){var a=n(2),i=n(4),r=n(29),o=n(1),s=n(11),l=n(7),d=o(a(l,{encode:function(e){var t=r(this.endpoint);return t.query.message=s(e),t.query.jsonp='__jsonp'+d._cbCount+'__',i.stringify(t)},request:function(e){var n=document.getElementsByTagName('head')[0],a=document.createElement('script'),o=d.getCallbackName(),l=r(this.endpoint),c=this;l.query.message=s(e),l.query.jsonp=o;var p=function(){if(!t[o])return!1;t[o]=void 0;try{delete t[o]}catch(e){}a.parentNode.removeChild(a)};return t[o]=function(e){p(),c._receive(e)},a.type='text/javascript',a.src=i.stringify(l),n.appendChild(a),a.onerror=function(){p(),c._handleError(e)},{abort:p}}}),{_cbCount:0,getCallbackName:function(){return this._cbCount+=1,'__jsonp'+this._cbCount+'__'},isUsable:function(e,t,n,a){n.call(a,!0)}});e.exports=d}).call(t,n(0))},function(e,t,n){'use strict';var a=n(2),i=n(67),r=a({initialize:function(e,t,n){this.code=e,this.params=Array.prototype.slice.call(t),this.message=n},toString:function(){return this.code+':'+this.params.join(',')+':'+this.message}});r.parse=function(e){if(e=e||'',!i.ERROR.test(e))return new r(null,[],e);var t=e.split(':'),n=parseInt(t[0]),a=t[1].split(','),e=t[2];return new r(n,a,e)};var o={versionMismatch:[300,'Version mismatch'],conntypeMismatch:[301,'Connection types not supported'],extMismatch:[302,'Extension mismatch'],badRequest:[400,'Bad request'],clientUnknown:[401,'Unknown client'],parameterMissing:[402,'Missing required parameter'],channelForbidden:[403,'Forbidden channel'],channelUnknown:[404,'Unknown channel'],channelInvalid:[405,'Invalid channel'],extUnknown:[406,'Unknown extension'],publishFailed:[407,'Failed to publish'],serverError:[500,'Internal server error']};for(var s in o)(function(e){r[e]=function(){return new r(o[e][0],arguments,o[e][1]).toString()}})(s);e.exports=r},function(e,t,n){'use strict';var a=n(1),i=n(10),r={addExtension:function(e){this._extensions=this._extensions||[],this._extensions.push(e),e.added&&e.added(this)},removeExtension:function(e){if(this._extensions)for(var t=this._extensions.length;t--;)this._extensions[t]===e&&(this._extensions.splice(t,1),e.removed&&e.removed(this))},pipeThroughExtensions:function(e,t,n,a,i){if(this.debug('Passing through ? extensions: ?',e,t),!this._extensions)return a.call(i,t);var r=this._extensions.slice(),o=function(t){if(!t)return a.call(i,t);var s=r.shift();if(!s)return a.call(i,t);var l=s[e];return l?void(3<=l.length?s[e](t,n,o):s[e](t,o)):o(t)};o(t)}};a(r,i),e.exports=r},function(e,t,n){'use strict';var a=n(2),i=n(12);e.exports=a(i)},function(e,t,n){'use strict';var a=n(2),i=n(1),r=n(12),o=a({initialize:function(e,t,n,a){this._client=e,this._channels=t,this._callback=n,this._context=a,this._cancelled=!1},withChannel:function(e,t){return this._withChannel=[e,t],this},apply:function(e,t){var n=t[0];this._callback&&this._callback.call(this._context,n.data),this._withChannel&&this._withChannel[0].call(this._withChannel[1],n.channel,n.data)},cancel:function(){this._cancelled||(this._client.unsubscribe(this._channels,this),this._cancelled=!0)},unsubscribe:function(){this.cancel()}});i(o.prototype,r),e.exports=o},function(e,t,n){'use strict';(function(t){function n(e){var t=Object.create(null),n,o,l,d,c,i;if(this[u]=t,!!e)if('string'==typeof e)for('?'===e.charAt(0)&&(e=e.slice(1)),d=e.split('&'),c=0,i=d.length;c<i;c++)l=d[c],n=l.indexOf('='),-1<n?a(t,r(l.slice(0,n)),r(l.slice(n+1))):l.length&&a(t,r(l),'');else if(s(e))for(c=0,i=e.length;c<i;c++)l=e[c],a(t,l[0],l[1]);else for(o in e)a(t,o,e[o])}function a(e,t,n){t in e?e[t].push(''+n):e[t]=s(n)?n:[''+n]}function r(e){return decodeURIComponent(e.replace(d,' '))}function o(e){return encodeURIComponent(e).replace(l,p)}var s=Array.isArray,i=n.prototype,l=/[!'\(\)~]|%20|%00/g,d=/\+/g,c={"!":'%21',"'":'%27',"(":'%28',")":'%29',"~":'%7E',"%20":'+',"%00":'\0'},p=function(e){return c[e]},u='__URLSearchParams__:'+Math.random();i.append=function(e,t){a(this[u],e,t)},i.delete=function(e){delete this[u][e]},i.get=function(e){var t=this[u];return e in t?t[e][0]:null},i.getAll=function(e){var t=this[u];return e in t?t[e].slice(0):[]},i.has=function(e){return e in this[u]},i.set=function(e,t){this[u][e]=[''+t]},i.forEach=function(e,t){var n=this[u];Object.getOwnPropertyNames(n).forEach(function(a){n[a].forEach(function(n){e.call(t,n,a,this)},this)},this)},i.toJSON=function(){return{}},i.toString=function(){var e=this[u],t=[],n,a,i,r;for(a in e)for(i=o(a),n=0,r=e[a];n<r.length;n++)t.push(i+'='+o(r[n]));return t.join('&')},n=e.exports=t.URLSearchParams||n,function(e){var t=function(){try{return!!Symbol.iterator}catch(e){return!1}}();'forEach'in e||(e.forEach=function(e,t){var n=Object.create(null);this.toString().replace(/=[\s\S]*?(?:&|$)/g,'=').split('=').forEach(function(a){!a.length||a in n||(n[a]=this.getAll(a)).forEach(function(n){e.call(t,n,a,this)},this)},this)}),'keys'in e||(e.keys=function(){var e=[];this.forEach(function(t,n){e.push(n)});var n={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return t&&(n[Symbol.iterator]=function(){return n}),n}),'values'in e||(e.values=function(){var e=[];this.forEach(function(t){e.push(t)});var n={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return t&&(n[Symbol.iterator]=function(){return n}),n}),'entries'in e||(e.entries=function(){var e=[];this.forEach(function(t,n){e.push([n,t])});var n={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return t&&(n[Symbol.iterator]=function(){return n}),n}),t&&!(Symbol.iterator in e)&&(e[Symbol.iterator]=e.entries),'sort'in e||(e.sort=function(){for(var e=this.entries(),t=e.next(),n=t.done,a=[],r=Object.create(null),o,i,s;!n;)s=t.value,i=s[0],a.push(i),i in r||(r[i]=[]),r[i].push(s[1]),t=e.next(),n=t.done;for(a.sort(),o=0;o<a.length;o++)this.delete(a[o]);for(o=0;o<a.length;o++)i=a[o],this.append(i,r[i].shift())})}(n.prototype)}).call(t,n(0))},function(e,t){'use strict';Object.defineProperty(t,'__esModule',{value:!0});var n={fullscreenEnabled:0,fullscreenElement:1,requestFullscreen:2,exitFullscreen:3,fullscreenchange:4,fullscreenerror:5},a=['webkitFullscreenEnabled','webkitFullscreenElement','webkitRequestFullscreen','webkitExitFullscreen','webkitfullscreenchange','webkitfullscreenerror'],i=['mozFullScreenEnabled','mozFullScreenElement','mozRequestFullScreen','mozCancelFullScreen','mozfullscreenchange','mozfullscreenerror'],r=['msFullscreenEnabled','msFullscreenElement','msRequestFullscreen','msExitFullscreen','MSFullscreenChange','MSFullscreenError'],o='undefined'!=typeof window&&'undefined'!=typeof window.document?window.document:{},s='fullscreenEnabled'in o&&Object.keys(n)||a[0]in o&&a||i[0]in o&&i||r[0]in o&&r||[];t.default={requestFullscreen:function(e){return e[s[n.requestFullscreen]]()},requestFullscreenFunction:function(e){return e[s[n.requestFullscreen]]},get exitFullscreen(){return o[s[n.exitFullscreen]].bind(o)},addEventListener:function(e,t,a){return o.addEventListener(s[n[e]],t,a)},removeEventListener:function(e,t,a){return o.removeEventListener(s[n[e]],t,a)},get fullscreenEnabled(){return!!o[s[n.fullscreenEnabled]]},set fullscreenEnabled(e){},get fullscreenElement(){return o[s[n.fullscreenElement]]},set fullscreenElement(e){},get onfullscreenchange(){return o[('on'+s[n.fullscreenchange]).toLowerCase()]},set onfullscreenchange(e){return o[('on'+s[n.fullscreenchange]).toLowerCase()]=e},get onfullscreenerror(){return o[('on'+s[n.fullscreenerror]).toLowerCase()]},set onfullscreenerror(e){return o[('on'+s[n.fullscreenerror]).toLowerCase()]=e}}}]);
//# sourceMappingURL=bundle.js.map